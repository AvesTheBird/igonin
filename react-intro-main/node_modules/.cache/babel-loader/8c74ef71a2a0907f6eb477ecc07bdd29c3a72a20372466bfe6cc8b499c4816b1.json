{"ast":null,"code":"var _jsxFileName = \"D:\\\\OSPanel\\\\domains\\\\\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B open server\\\\old\\\\react\\\\react-intro-main\\\\src\\\\components\\\\GraphComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport { popup, ModelXmlSerializer, domUtils, styleUtils, mathUtils, cloneUtils, eventUtils, Graph, InternalEvent, RubberBandHandler, ConnectionHandler, ConnectionConstraint, Point, CylinderShape, CellRenderer, DomHelpers, EdgeStyle, Rectangle, EdgeHandler, StyleRegistry, EdgeSegmentHandler, UndoManager, CellEditorHandler, ConstraintHandler, Guide, ImageBox, GraphView, SelectionHandler, PanningHandler, TooltipHandler, SelectionCellsHandler, PopupMenuHandler, xmlUtils, Codec } from '@maxgraph/core';\nimport { contextMenuTypes, contextMenuValues, globalTypes, globalValues, rubberBandTypes, rubberBandValues } from './shared/args.js';\nimport { createGraphContainer } from './shared/configure.js';\n\n// style required by RubberBand\nimport '@maxgraph/core/css/common.css';\nimport { render } from 'react-dom';\nimport { MyCustomGraph, MyCustomEdgeSegmentHandler, MyCustomGraphView, MyCustomConnectionHandler, MyCustomPanningHandler, MyCustomSelectionHandler, MyCustomEdgeHandler, MyCustomConstraintHandler } from './MyCustomGraph.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const YourComponent = () => {\n  _s();\n  const importFileInputRef = useRef(null);\n  const graphContainerRef = useRef(null);\n  const [xmlText, setXmlText] = useState('');\n  // Инициализируем переменную для graph\n  let [graphInstance, setGraphInstance] = useState(null);\n  let [variableFromEffect, setVariableFromEffect] = useState(null);\n  const [graph, setGraph] = useState(null);\n  useEffect(() => {\n    if (graphContainerRef.current) {\n      const graphContainer = graphContainerRef.current;\n      const newGraph = new Graph(graphContainerRef.current);\n      setGraph(newGraph); // Сохраняем граф в состояние\n      ////\n      const importButton = document.getElementById(\"import\");\n      importButton.onclick = () => {\n        const cells = graph.getChildVertices(graph.getDefaultParent()); // Получаем все элементы (узлы и рёбра) графа\n        graph.removeCells(cells, true); // Удаляем все элементы, включая рёбра\n        console.log(importFileInputRef);\n        const fileInput = importFileInputRef.current;\n        if (fileInput) {\n          fileInput.click();\n          console.log(\"клик\"); // Открываем диалог выбора файла\n        }\n      };\n      ////\n      const parentContainer = document.createElement('div');\n      const container = createGraphContainer({\n        imageUrl: 'images/grid.gif'\n      });\n      parentContainer.appendChild(container);\n      //console.log({graph})\n      // Changes some default colors\n      // TODO Find a way of modifying globally or setting locally! See https://github.com/maxGraph/maxGraph/issues/192\n      //constants.SHADOWCOLOR = '#C0C0C0';\n\n      let joinNodeSize = 7;\n      let strokeWidth = 2;\n\n      // Switch for black background and bright styles\n      let invert = false;\n      let MyCustomCellEditorHandler;\n      if (!graphInstance) {\n        const newGraph = new MyCustomGraph(graphContainer, null, []);\n        setGraphInstance(newGraph);\n      }\n      if (invert) {\n        container.style.backgroundColor = 'black';\n\n        // White in-place editor text color\n        MyCustomCellEditorHandler = class extends CellEditorHandler {\n          startEditing(cell, trigger) {\n            super.startEditing.apply(this, arguments);\n            if (this.textarea != null) {\n              this.textarea.style.color = '#FFFFFF';\n            }\n          }\n        };\n      } else {\n        MyCustomCellEditorHandler = CellEditorHandler;\n      }\n\n      // Imlements a custom resistor shape. Direction currently ignored here.\n\n      class ResistorShape extends CylinderShape {\n        constructor() {\n          // TODO: The original didn't seem to call the super\n          super(null, null, null, null);\n        }\n        redrawPath(path, x, y, w, h, isForeground) {\n          let dx = w / 16;\n          if (isForeground) {\n            path.moveTo(0, h / 2);\n            path.lineTo(2 * dx, h / 2);\n            path.lineTo(3 * dx, 0);\n            path.lineTo(5 * dx, h);\n            path.lineTo(7 * dx, 0);\n            path.lineTo(9 * dx, h);\n            path.lineTo(11 * dx, 0);\n            path.lineTo(13 * dx, h);\n            path.lineTo(14 * dx, h / 2);\n            path.lineTo(16 * dx, h / 2);\n            path.end();\n          }\n        }\n      }\n      CellRenderer.registerShape('resistor', ResistorShape);\n\n      // Imlements a custom resistor shape. Direction currently ignored here.\n\n      EdgeStyle.WireConnector = function (state, source, target, hints, result) {\n        // Creates array of all way- and terminalpoints\n        let pts = state.absolutePoints;\n        let horizontal = true;\n        let hint = null;\n\n        // Gets the initial connection from the source terminal or edge\n        if (source != null && source.cell.isEdge()) {\n          horizontal = state.style.sourceConstraint == 'horizontal';\n        } else if (source != null) {\n          horizontal = source.style.portConstraint != 'vertical';\n\n          // Checks the direction of the shape and rotates\n          let direction = source.style.direction;\n          if (direction == 'north' || direction == 'south') {\n            horizontal = !horizontal;\n          }\n        }\n\n        // Adds the first point\n        // TODO: Should move along connected segment\n        let pt = pts[0];\n        if (pt == null && source != null) {\n          pt = new Point(state.view.getRoutingCenterX(source), state.view.getRoutingCenterY(source));\n        } else if (pt != null) {\n          pt = pt.clone();\n        }\n        let first = pt;\n\n        // Adds the waypoints\n        if (hints != null && hints.length > 0) {\n          // FIXME: First segment not movable\n          /*hint = state.view.transformControlPoint(state, hints[0]);\n          MaxLog.show();\n          MaxLog.debug(hints.length,'hints0.y='+hint.y, pt.y)\n           if (horizontal && Math.floor(hint.y) != Math.floor(pt.y))\n          {\n            MaxLog.show();\n            MaxLog.debug('add waypoint');\n             pt = new Point(pt.x, hint.y);\n            result.push(pt);\n            pt = pt.clone();\n            //horizontal = !horizontal;\n          }*/\n\n          for (let i = 0; i < hints.length; i++) {\n            horizontal = !horizontal;\n            hint = state.view.transformControlPoint(state, hints[i]);\n            if (horizontal) {\n              if (pt.y !== hint.y) {\n                pt.y = hint.y;\n                result.push(pt.clone());\n              }\n            } else if (pt.x !== hint.x) {\n              pt.x = hint.x;\n              result.push(pt.clone());\n            }\n          }\n        } else {\n          hint = pt;\n        }\n\n        // Adds the last point\n        pt = pts[pts.length - 1];\n\n        // TODO: Should move along connected segment\n        if (pt == null && target != null) {\n          pt = new Point(state.view.getRoutingCenterX(target), state.view.getRoutingCenterY(target));\n        }\n        if (horizontal) {\n          if (pt.y !== hint.y && first.x !== pt.x) {\n            result.push(new Point(pt.x, hint.y));\n          }\n        } else if (pt.x !== hint.x && first.y !== pt.y) {\n          result.push(new Point(hint.x, pt.y));\n        }\n      };\n      StyleRegistry.putValue('wireEdgeStyle', EdgeStyle.WireConnector);\n      let graph = new MyCustomGraph(container, null, [MyCustomCellEditorHandler, TooltipHandler, SelectionCellsHandler, PopupMenuHandler, MyCustomConnectionHandler, MyCustomSelectionHandler, MyCustomPanningHandler]);\n      setVariableFromEffect(graph);\n      let labelBackground = invert ? '#000000' : '#FFFFFF';\n      let fontColor = invert ? '#FFFFFF' : '#000000';\n      let strokeColor = invert ? '#C0C0C0' : '#000000';\n      let fillColor = invert ? 'none' : '#FFFFFF';\n      graph.view.scale = 1;\n      graph.setPanning(true);\n      graph.setConnectable(true);\n      graph.setConnectableEdges(true);\n      graph.setDisconnectOnMove(false);\n      graph.foldingEnabled = false;\n\n      //Maximum size\n      graph.maximumGraphBounds = new Rectangle(0, 0, 1000, 1000);\n      graph.border = 50;\n      graph.spacingLeft = 30;\n\n      // Enables return key to stop editing (use shift-enter for newlines)\n      graph.setEnterStopsCellEditing(true);\n\n      // Adds rubberband selection\n      new RubberBandHandler(graph);\n\n      // Adds a special tooltip for edges\n      graph.setTooltips(true);\n      let style = graph.getStylesheet().getDefaultEdgeStyle();\n      delete style.endArrow;\n      style.strokeColor = strokeColor;\n      style.labelBackgroundColor = labelBackground;\n      style.edgeStyle = 'wireEdgeStyle';\n      style.fontColor = fontColor;\n      style.fontSize = '9';\n      style.movable = '0';\n      style.strokeWidth = strokeWidth;\n      //style.rounded = '1';\n\n      // Sets join node size\n      style.startSize = joinNodeSize;\n      style.endSize = joinNodeSize;\n      style = graph.getStylesheet().getDefaultVertexStyle();\n      style.gradientDirection = 'south';\n      //style.gradientColor = '#909090';\n      style.strokeColor = strokeColor;\n      //style.fillColor = '#e0e0e0';\n      style.fillColor = 'none';\n      style.fontColor = fontColor;\n      style.fontStyle = '1';\n      style.fontSize = '12';\n      style.resizable = '0';\n      style.rounded = '1';\n      style.strokeWidth = strokeWidth;\n\n      // инородное дерьмо\n\n      const btn1 = document.getElementById('btn1');\n      const btn2 = document.getElementById('btn2');\n      const btn3 = document.getElementById('btn3');\n      const btn4 = document.getElementById('btn4');\n      const btn5 = document.getElementById('btn5');\n      const btn6 = document.getElementById('btn6');\n      const btn7 = document.getElementById('btn7');\n      const update = event => {\n        var parent = graph.getDefaultParent();\n        var doc = xmlUtils.createXmlDocument();\n        graph.batchUpdate(() => {\n          const targetId = event.target.id;\n          if (targetId === 'btn3') {\n            var v1 = graph.insertVertex(parent, null, '', 80, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n              shape: 'line',\n              align: 'left',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: -0.5,\n              spacingLeft: 12,\n              fontColor,\n              strokeColor\n            });\n            v11.geometry.relative = true;\n            v11.geometry.offset = new Point(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new Point(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingRight: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            };\n            v15.geometry.offset = new Point(5, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 30,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v16.geometry.x = 1;\n            v16.geometry.offset = new Point(49, 34);\n            v1.insert(v16);\n          } else if (targetId === 'btn6') {\n            var inputVertex = graph.insertVertex(parent, null, 'вход', 80, 40, 40, 80, {\n              shape: 'ellipse',\n              fillColor: 'green',\n              fontColor: 'white',\n              strokeColor: 'black'\n            });\n            inputVertex.setConnectable(true);\n            console.log(\"blyaa\");\n          } else if (targetId === 'btn7') {\n            var outputVertex = graph.insertVertex(parent, null, 'Выход', 80, 40, 40, 80, {\n              shape: 'ellipse',\n              fillColor: 'red',\n              fontColor: 'white',\n              strokeColor: 'black'\n            });\n            outputVertex.setConnectable(true);\n          } else if (targetId === 'btn1') {\n            var v1 = graph.insertVertex(parent, null, '', 180, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n              shape: 'line',\n              align: 'left',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: -0.5,\n              spacingLeft: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v11.geometry.relative = true;\n            v11.geometry.offset = new Point(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new Point(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingRight: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            };\n            v15.geometry.offset = new Point(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '&', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 20,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v16.geometry.x = 1;\n            v16.geometry.offset = new Point(28.5, 37);\n            v1.insert(v16);\n          } else if (targetId === 'btn2') {\n            var v1 = graph.insertVertex(parent, null, '', 250, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n              shape: 'line',\n              align: 'left',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: -0.5,\n              spacingLeft: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v11.geometry.relative = true;\n            v11.geometry.offset = new Point(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new Point(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingRight: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            };\n            v15.geometry.offset = new Point(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '|', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 20,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v16.geometry.x = 1;\n            v16.geometry.offset = new Point(24, 37);\n            v1.insert(v16);\n          } else if (targetId === 'btn5') {\n            var v1 = graph.insertVertex(parent, null, '', 180, 140, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n              shape: 'line',\n              align: 'left',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: -0.5,\n              spacingLeft: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v11.geometry.relative = true;\n            v11.geometry.offset = new Point(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new Point(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingRight: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            };\n            v15.geometry.offset = new Point(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '==', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 15,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v16.geometry.x = 1;\n            v16.geometry.offset = new Point(30, 38);\n            v1.insert(v16);\n          } else if (targetId === 'btn4') {\n            var v1 = graph.insertVertex(parent, null, '', 80, 140, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n            var v11 = graph.insertVertex(v1, null, '', 0, 0, 14, 16, {\n              shape: 'line',\n              align: 'left',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: -0.5,\n              spacingLeft: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v11.geometry.relative = true;\n            v11.geometry.offset = new Point(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = '';\n            v12.geometry.offset = new Point(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingRight: 12,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            };\n            v15.geometry.offset = new Point(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 25,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v16.geometry.x = 1;\n            v16.geometry.offset = new Point(8, 15);\n            v1.insert(v16);\n            var v17 = graph.insertVertex(v1, null, 'X', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v17.geometry.x = 1;\n            v17.geometry.offset = new Point(14, 20);\n            v1.insert(v17);\n            var v18 = graph.insertVertex(v1, null, 'Y', 0, 0, 0, 0, {\n              shape: 'line',\n              align: 'right',\n              verticalAlign: 'middle',\n              fontSize: 10,\n              routingCenterX: 0.5,\n              spacingLeft: 6,\n              fontColor: fontColor,\n              strokeColor: strokeColor\n            });\n            v18.geometry.x = 1;\n            v18.geometry.offset = new Point(14, 59);\n            v1.insert(v18);\n          }\n        });\n      };\n      btn1.addEventListener('click', update);\n      btn2.addEventListener('click', update);\n      btn3.addEventListener('click', update);\n      btn4.addEventListener('click', update);\n      btn5.addEventListener('click', update);\n      btn6.addEventListener('click', update);\n      btn7.addEventListener('click', update);\n\n      ////////////////////////////////////////////////////////\n      // XML \n\n      document.getElementById(\"xml\").onclick = () => {\n        // Получаем XML данные\n        const xml = new ModelXmlSerializer(graph.getDataModel()).export();\n\n        // Создаем новый Blob объект с XML данными\n        const blob = new Blob([xml], {\n          type: 'text/xml'\n        });\n\n        // Создаем ссылку на Blob объект\n        const url = window.URL.createObjectURL(blob);\n\n        // Создаем ссылку для скачивания\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'data.xml'; // Имя файла для скачивания\n        document.body.appendChild(a);\n\n        // Инициируем скачивание файла\n        a.click();\n\n        // Освобождаем ресурсы\n        window.URL.revokeObjectURL(url);\n      };\n\n      ///////////////////////////////////////////////////////////\n\n      document.getElementById(\"zoom\").onclick = () => graph.zoomIn();\n      document.getElementById(\"zoomout\").onclick = () => graph.zoomOut();\n\n      // Undo/redo\n      let undoManager = new UndoManager();\n      let listener = function (sender, evt) {\n        undoManager.undoableEditHappened(evt.getProperty('edit'));\n      };\n      graph.getDataModel().addListener(InternalEvent.UNDO, listener);\n      graph.getView().addListener(InternalEvent.UNDO, listener);\n      document.getElementById(\"undo\").onclick = () => undoManager.undo();\n      document.getElementById(\"redo\").onclick = () => undoManager.redo();\n      document.getElementById(\"delete\").onclick = () => graph.removeCells();\n\n      // Wire-mode\n      let checkbox = document.getElementById(\"wire\");\n\n      // Grid\n      let checkbox2 = document.getElementById(\"grid\");\n      checkbox2.setAttribute('checked', 'true');\n      InternalEvent.addListener(checkbox2, 'click', function (evt) {\n        if (checkbox2.checked) {\n          container.style.background = 'url(./images/grid.gif)';\n        } else {\n          container.style.background = '';\n        }\n        container.style.backgroundColor = invert ? 'black' : 'white';\n      });\n      InternalEvent.disableContextMenu(container);\n      graphContainer.appendChild(parentContainer);\n    }\n    return () => {\n      // Clean up if needed\n    };\n  }, []);\n  const handleFileImport = event => {\n    const file = event.target.files[0];\n    console.log('саси'); // Загружаем новую схему\n    console.log(file);\n    if (file) {\n      // Читаем XML файл и присваиваем его содержимое переменной\n      readXMLFile(file, xmlContent => {\n        setXmlText(xmlContent); // Присваиваем текст файла переменной xmlText\n        console.log(xmlContent); // Выводим текст файла в консоль\n        loadGraphFromXml(xmlContent, graph); // Загружаем схему\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".xml\",\n      ref: importFileInputRef,\n      style: {\n        display: 'none'\n      },\n      onChange: handleFileImport\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"import\",\n      children: \"\\u0418\\u043C\\u043F\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0445\\u0435\\u043C\\u0443\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: graphContainerRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 760,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 746,\n    columnNumber: 5\n  }, this);\n};\n\n// Функция для чтения XML файла\n_s(YourComponent, \"vOlmZy/K7jetclq4Bsv3wdTufik=\");\n_c = YourComponent;\nfunction readXMLFile(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function (event) {\n    const xmlContent = event.target.result; // Текст файла\n    callback(xmlContent); // Передаём текст файла в callback\n  };\n  reader.readAsText(file);\n}\nconst loadGraphFromXml = (xml, graph) => {\n  // Парсим XML в документ\n  const doc = xmlUtils.parseXml(xml);\n\n  // Создаем кодек для декодирования XML\n  const codec = new Codec(doc);\n\n  // Инициализируем массив для ячеек\n  const cells = [];\n\n  // Получаем первый элемент (ячейку) внутри <root>\n  let elt = doc.documentElement.firstChild;\n\n  // Проходим по каждому элементу и декодируем его\n  while (elt != null) {\n    if (elt.nodeType === 1) {\n      // Проверяем, что это элемент (узел типа 1)\n      console.log(\"Декодируем элемент:\", elt); // Выводим каждый элемент для проверки\n      const decodedCell = codec.decodeCell(elt); // Используем decodeCell\n      if (decodedCell) {\n        cells.push(decodedCell); // Добавляем в массив только валидные объекты\n      } else {\n        console.error(\"Не удалось декодировать элемент как валидную ячейку:\", elt);\n      }\n    } else {\n      console.warn(\"Пропуск текстового узла:\", elt); // Пропускаем текстовые узлы\n    }\n    elt = elt.nextSibling; // Переходим к следующему элементу\n  }\n\n  // Добавляем ячейки в граф\n  if (cells.length > 0) {\n    graph.addCells(cells); // Добавляем все ячейки в граф\n  }\n  graph.refresh(); // Обновляем граф\n};\nvar _c;\n$RefreshReg$(_c, \"YourComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","popup","ModelXmlSerializer","domUtils","styleUtils","mathUtils","cloneUtils","eventUtils","Graph","InternalEvent","RubberBandHandler","ConnectionHandler","ConnectionConstraint","Point","CylinderShape","CellRenderer","DomHelpers","EdgeStyle","Rectangle","EdgeHandler","StyleRegistry","EdgeSegmentHandler","UndoManager","CellEditorHandler","ConstraintHandler","Guide","ImageBox","GraphView","SelectionHandler","PanningHandler","TooltipHandler","SelectionCellsHandler","PopupMenuHandler","xmlUtils","Codec","contextMenuTypes","contextMenuValues","globalTypes","globalValues","rubberBandTypes","rubberBandValues","createGraphContainer","render","MyCustomGraph","MyCustomEdgeSegmentHandler","MyCustomGraphView","MyCustomConnectionHandler","MyCustomPanningHandler","MyCustomSelectionHandler","MyCustomEdgeHandler","MyCustomConstraintHandler","jsxDEV","_jsxDEV","YourComponent","_s","importFileInputRef","graphContainerRef","xmlText","setXmlText","graphInstance","setGraphInstance","variableFromEffect","setVariableFromEffect","graph","setGraph","current","graphContainer","newGraph","importButton","document","getElementById","onclick","cells","getChildVertices","getDefaultParent","removeCells","console","log","fileInput","click","parentContainer","createElement","container","imageUrl","appendChild","joinNodeSize","strokeWidth","invert","MyCustomCellEditorHandler","style","backgroundColor","startEditing","cell","trigger","apply","arguments","textarea","color","ResistorShape","constructor","redrawPath","path","x","y","w","h","isForeground","dx","moveTo","lineTo","end","registerShape","WireConnector","state","source","target","hints","result","pts","absolutePoints","horizontal","hint","isEdge","sourceConstraint","portConstraint","direction","pt","view","getRoutingCenterX","getRoutingCenterY","clone","first","length","i","transformControlPoint","push","putValue","labelBackground","fontColor","strokeColor","fillColor","scale","setPanning","setConnectable","setConnectableEdges","setDisconnectOnMove","foldingEnabled","maximumGraphBounds","border","spacingLeft","setEnterStopsCellEditing","setTooltips","getStylesheet","getDefaultEdgeStyle","endArrow","labelBackgroundColor","edgeStyle","fontSize","movable","startSize","endSize","getDefaultVertexStyle","gradientDirection","fontStyle","resizable","rounded","btn1","btn2","btn3","btn4","btn5","btn6","btn7","update","event","parent","doc","createXmlDocument","batchUpdate","targetId","id","v1","insertVertex","v11","shape","align","verticalAlign","routingCenterX","geometry","relative","offset","width","v12","value","insert","v15","spacingRight","v16","inputVertex","outputVertex","v17","v18","addEventListener","xml","getDataModel","export","blob","Blob","type","url","window","URL","createObjectURL","a","href","download","body","revokeObjectURL","zoomIn","zoomOut","undoManager","listener","sender","evt","undoableEditHappened","getProperty","addListener","UNDO","getView","undo","redo","checkbox","checkbox2","setAttribute","checked","background","disableContextMenu","handleFileImport","file","files","readXMLFile","xmlContent","loadGraphFromXml","children","accept","ref","display","onChange","fileName","_jsxFileName","lineNumber","columnNumber","height","_c","callback","reader","FileReader","onload","readAsText","parseXml","codec","elt","documentElement","firstChild","nodeType","decodedCell","decodeCell","error","warn","nextSibling","addCells","refresh","$RefreshReg$"],"sources":["D:/OSPanel/domains/проекты open server/old/react/react-intro-main/src/components/GraphComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nimport axios from 'axios';\nimport {\n  popup,\n  ModelXmlSerializer,\n  domUtils,\n  styleUtils,\n  mathUtils,\n  cloneUtils,\n  eventUtils,\n  Graph,\n  InternalEvent,\n  RubberBandHandler,\n  ConnectionHandler,\n  ConnectionConstraint,\n  Point,\n  CylinderShape,\n  CellRenderer,\n  DomHelpers,\n  EdgeStyle,\n  Rectangle,\n  EdgeHandler,\n  StyleRegistry,\n  EdgeSegmentHandler,\n  UndoManager,\n  CellEditorHandler,\n  ConstraintHandler,\n  Guide,\n  ImageBox,\n  GraphView,\n  SelectionHandler,\n  PanningHandler,\n  TooltipHandler,\n  SelectionCellsHandler,\n  PopupMenuHandler,\n  xmlUtils,\n  Codec,\n} from '@maxgraph/core';\n\nimport {\n  contextMenuTypes,\n  contextMenuValues,\n  globalTypes,\n  globalValues,\n  rubberBandTypes,\n  rubberBandValues,\n} from './shared/args.js';\n\nimport { createGraphContainer } from './shared/configure.js';\n\n// style required by RubberBand\nimport '@maxgraph/core/css/common.css';\n\nimport { render } from 'react-dom';\n\nimport {\n  MyCustomGraph, \n  MyCustomEdgeSegmentHandler, \n  MyCustomGraphView, \n  MyCustomConnectionHandler,  \n  MyCustomPanningHandler, \n  MyCustomSelectionHandler,\n  MyCustomEdgeHandler,\n  MyCustomConstraintHandler\n} from './MyCustomGraph.jsx';\n\n\nexport const YourComponent = () => {\n  const importFileInputRef = useRef(null);\n  const graphContainerRef = useRef(null);\n  const [xmlText, setXmlText] = useState('');\n  // Инициализируем переменную для graph\n  let [graphInstance, setGraphInstance] = useState(null);\n  let [variableFromEffect, setVariableFromEffect] = useState(null);\n\n  const [graph, setGraph] = useState(null);\n\n  useEffect(() => {\n    if (graphContainerRef.current) {\n    const graphContainer = graphContainerRef.current;\n    const newGraph = new Graph(graphContainerRef.current);\n    setGraph(newGraph); // Сохраняем граф в состояние\n   ////\n    const importButton = document.getElementById(\"import\");\n    importButton.onclick = () => {\n      const cells = graph.getChildVertices(graph.getDefaultParent()); // Получаем все элементы (узлы и рёбра) графа\n      graph.removeCells(cells, true); // Удаляем все элементы, включая рёбра\n      console.log(importFileInputRef);\n      const fileInput = importFileInputRef.current;\n      if (fileInput) {\n        fileInput.click();  \n        console.log(\"клик\"); // Открываем диалог выбора файла\n      }\n    };\n////\n    const parentContainer = document.createElement('div');\n    const container = createGraphContainer({\n      imageUrl: 'images/grid.gif'\n    });\n    parentContainer.appendChild(container);\n    //console.log({graph})\n      // Changes some default colors\n  // TODO Find a way of modifying globally or setting locally! See https://github.com/maxGraph/maxGraph/issues/192\n  //constants.SHADOWCOLOR = '#C0C0C0';\n\n  let joinNodeSize = 7;\n  let strokeWidth = 2;\n\n  // Switch for black background and bright styles\n  let invert = false;\n  let MyCustomCellEditorHandler;\n\n  if (!graphInstance) {\n    const newGraph = new MyCustomGraph(graphContainer, null, []);\n    setGraphInstance(newGraph);\n  }\n\n  if (invert) {\n    container.style.backgroundColor = 'black';\n\n    // White in-place editor text color\n    MyCustomCellEditorHandler = class extends CellEditorHandler {\n      startEditing(cell, trigger) {\n        super.startEditing.apply(this, arguments);\n\n        if (this.textarea != null) {\n          this.textarea.style.color = '#FFFFFF';\n        }\n      }\n    };\n  } else {\n    MyCustomCellEditorHandler = CellEditorHandler;\n  }\n\n  // Imlements a custom resistor shape. Direction currently ignored here.\n\n  class ResistorShape extends CylinderShape {\n    constructor() {\n      // TODO: The original didn't seem to call the super\n      super(null, null, null, null);\n    }\n\n    redrawPath(path, x, y, w, h, isForeground) {\n      let dx = w / 16;\n\n      if (isForeground) {\n        path.moveTo(0, h / 2);\n        path.lineTo(2 * dx, h / 2);\n        path.lineTo(3 * dx, 0);\n        path.lineTo(5 * dx, h);\n        path.lineTo(7 * dx, 0);\n        path.lineTo(9 * dx, h);\n        path.lineTo(11 * dx, 0);\n        path.lineTo(13 * dx, h);\n        path.lineTo(14 * dx, h / 2);\n        path.lineTo(16 * dx, h / 2);\n        path.end();\n      }\n    }\n  }\n\n  CellRenderer.registerShape('resistor', ResistorShape);\n\n  // Imlements a custom resistor shape. Direction currently ignored here.\n\n  EdgeStyle.WireConnector = function (state, source, target, hints, result) {\n    // Creates array of all way- and terminalpoints\n    let pts = state.absolutePoints;\n    let horizontal = true;\n    let hint = null;\n\n    // Gets the initial connection from the source terminal or edge\n    if (source != null && source.cell.isEdge()) {\n      horizontal = state.style.sourceConstraint == 'horizontal';\n    } else if (source != null) {\n      horizontal = source.style.portConstraint != 'vertical';\n\n      // Checks the direction of the shape and rotates\n      let direction = source.style.direction;\n\n      if (direction == 'north' || direction == 'south') {\n        horizontal = !horizontal;\n      }\n    }\n\n    // Adds the first point\n    // TODO: Should move along connected segment\n    let pt = pts[0];\n\n    if (pt == null && source != null) {\n      pt = new Point(\n        state.view.getRoutingCenterX(source),\n        state.view.getRoutingCenterY(source)\n      );\n    } else if (pt != null) {\n      pt = pt.clone();\n    }\n\n    let first = pt;\n\n    // Adds the waypoints\n    if (hints != null && hints.length > 0) {\n      // FIXME: First segment not movable\n      /*hint = state.view.transformControlPoint(state, hints[0]);\n      MaxLog.show();\n      MaxLog.debug(hints.length,'hints0.y='+hint.y, pt.y)\n\n      if (horizontal && Math.floor(hint.y) != Math.floor(pt.y))\n      {\n        MaxLog.show();\n        MaxLog.debug('add waypoint');\n\n        pt = new Point(pt.x, hint.y);\n        result.push(pt);\n        pt = pt.clone();\n        //horizontal = !horizontal;\n      }*/\n\n      for (let i = 0; i < hints.length; i++) {\n        horizontal = !horizontal;\n        hint = state.view.transformControlPoint(state, hints[i]);\n\n        if (horizontal) {\n          if (pt.y !== hint.y) {\n            pt.y = hint.y;\n            result.push(pt.clone());\n          }\n        } else if (pt.x !== hint.x) {\n          pt.x = hint.x;\n          result.push(pt.clone());\n        }\n      }\n    } else {\n      hint = pt;\n    }\n\n    // Adds the last point\n    pt = pts[pts.length - 1];\n\n    // TODO: Should move along connected segment\n    if (pt == null && target != null) {\n      pt = new Point(\n        state.view.getRoutingCenterX(target),\n        state.view.getRoutingCenterY(target)\n      );\n    }\n\n    if (horizontal) {\n      if (pt.y !== hint.y && first.x !== pt.x) {\n        result.push(new Point(pt.x, hint.y));\n      }\n    } else if (pt.x !== hint.x && first.y !== pt.y) {\n      result.push(new Point(hint.x, pt.y));\n    }\n  };\n\n  StyleRegistry.putValue('wireEdgeStyle', EdgeStyle.WireConnector);\n\n\n    let graph = new MyCustomGraph(container, null, [\n      MyCustomCellEditorHandler,\n      TooltipHandler,\n      SelectionCellsHandler,\n      PopupMenuHandler,\n      MyCustomConnectionHandler,\n      MyCustomSelectionHandler,\n      MyCustomPanningHandler,\n    ]);\n    setVariableFromEffect(graph);\n\n  let labelBackground = invert ? '#000000' : '#FFFFFF';\n  let fontColor = invert ? '#FFFFFF' : '#000000';\n  let strokeColor = invert ? '#C0C0C0' : '#000000';\n  let fillColor = invert ? 'none' : '#FFFFFF';\n\n  graph.view.scale = 1;\n  graph.setPanning(true);\n  graph.setConnectable(true);\n  graph.setConnectableEdges(true);\n  graph.setDisconnectOnMove(false);\n  graph.foldingEnabled = false;\n\n  //Maximum size\n  graph.maximumGraphBounds = new Rectangle(0, 0, 1000, 1000);\n  graph.border = 50;\n  graph.spacingLeft = 30;\n\n  // Enables return key to stop editing (use shift-enter for newlines)\n  graph.setEnterStopsCellEditing(true);\n\n  // Adds rubberband selection\n  new RubberBandHandler(graph);\n\n  // Adds a special tooltip for edges\n  graph.setTooltips(true);\n\n  let style = graph.getStylesheet().getDefaultEdgeStyle();\n  delete style.endArrow;\n  style.strokeColor = strokeColor;\n  style.labelBackgroundColor = labelBackground;\n  style.edgeStyle = 'wireEdgeStyle';\n  style.fontColor = fontColor;\n  style.fontSize = '9';\n  style.movable = '0';\n  style.strokeWidth = strokeWidth;\n  //style.rounded = '1';\n\n  // Sets join node size\n  style.startSize = joinNodeSize;\n  style.endSize = joinNodeSize;\n\n  style = graph.getStylesheet().getDefaultVertexStyle();\n  style.gradientDirection = 'south';\n  //style.gradientColor = '#909090';\n  style.strokeColor = strokeColor;\n  //style.fillColor = '#e0e0e0';\n  style.fillColor = 'none';\n  style.fontColor = fontColor;\n  style.fontStyle = '1';\n  style.fontSize = '12';\n  style.resizable = '0';\n  style.rounded = '1';\n  style.strokeWidth = strokeWidth;\n\n  // инородное дерьмо\n\n  const btn1 = document.getElementById('btn1');\n  const btn2 = document.getElementById('btn2');\n  const btn3 = document.getElementById('btn3');\n  const btn4 = document.getElementById('btn4');\n  const btn5 = document.getElementById('btn5');\n  const btn6 = document.getElementById('btn6');\n  const btn7 = document.getElementById('btn7');\n\n  const update = (event) => {\n    var parent = graph.getDefaultParent();\n    var doc = xmlUtils.createXmlDocument();\n    graph.batchUpdate(() => {\n      const targetId = event.target.id;\n      if (targetId === 'btn3') {\n        var v1 = graph.insertVertex(parent, null, '', 80, 40, 40, 80,\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n        v1.setConnectable(false);\n\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n          shape: 'line',\n          align: 'left',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: -0.5,\n          spacingLeft: 12,\n          fontColor,\n          strokeColor,\n        });\n        v11.geometry.relative = true;\n        v11.geometry.offset = new Point(-v11.geometry.width, 12);\n        var v12 = v11.clone();\n        v12.value = 'Y';\n        v12.geometry.offset = new Point(-v11.geometry.width, 52);\n        v1.insert(v12);\n        var v15 = v11.clone();\n        v15.value = '';\n        v15.geometry.x = 1;\n        v15.style = {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingRight: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        }\n\n        v15.geometry.offset = new Point(5, 32);\n        v1.insert(v15);\n\n        var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 30,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v16.geometry.x = 1;\n        v16.geometry.offset = new Point(49, 34);\n        v1.insert(v16);\n      }\n        else if (targetId === 'btn6') {\n        var inputVertex = graph.insertVertex(parent, null, 'вход', 80, 40, 40, 80, {\n          shape: 'ellipse',\n          fillColor: 'green',\n          fontColor: 'white',\n          strokeColor: 'black'\n        });\n        inputVertex.setConnectable(true);\n        console.log(\"blyaa\")\n      } \n      else if (targetId === 'btn7') {\n        var outputVertex = graph.insertVertex(parent, null, 'Выход', 80, 40, 40, 80, {\n          shape: 'ellipse',\n          fillColor: 'red',\n          fontColor: 'white',\n          strokeColor: 'black'\n        });\n        outputVertex.setConnectable(true);\n      } else if (targetId === 'btn1') {\n        var v1 = graph.insertVertex(parent, null, '', 180, 40, 40, 80,\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n        v1.setConnectable(false);\n\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n          shape: 'line',\n          align: 'left',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: -0.5,\n          spacingLeft: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v11.geometry.relative = true;\n        v11.geometry.offset = new Point(-v11.geometry.width, 12);\n        var v12 = v11.clone();\n        v12.value = 'Y';\n        v12.geometry.offset = new Point(-v11.geometry.width, 52);\n        v1.insert(v12);\n        var v15 = v11.clone();\n        v15.value = '';\n        v15.geometry.x = 1;\n        v15.style = {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingRight: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        };\n        v15.geometry.offset = new Point(0, 32);\n        v1.insert(v15);\n\n        var v16 = graph.insertVertex(v1, null, '&', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 20,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v16.geometry.x = 1;\n        v16.geometry.offset = new Point(28.5, 37);\n        v1.insert(v16);\n      } else if (targetId === 'btn2') {\n        var v1 = graph.insertVertex(parent, null, '', 250, 40, 40, 80,\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n        v1.setConnectable(false);\n\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n          shape: 'line',\n          align: 'left',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: -0.5,\n          spacingLeft: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v11.geometry.relative = true;\n        v11.geometry.offset = new Point(-v11.geometry.width, 12);\n        var v12 = v11.clone();\n        v12.value = 'Y';\n        v12.geometry.offset = new Point(-v11.geometry.width, 52);\n        v1.insert(v12);\n        var v15 = v11.clone();\n        v15.value = '';\n        v15.geometry.x = 1;\n        v15.style = {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingRight: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        };\n        v15.geometry.offset = new Point(0, 32);\n        v1.insert(v15);\n\n        var v16 = graph.insertVertex(v1, null, '|', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 20,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v16.geometry.x = 1;\n        v16.geometry.offset = new Point(24, 37);\n        v1.insert(v16);\n      } else if (targetId === 'btn5') {\n        var v1 = graph.insertVertex(parent, null, '', 180, 140, 40, 80,\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n        v1.setConnectable(false);\n\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, {\n          shape: 'line',\n          align: 'left',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: -0.5,\n          spacingLeft: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v11.geometry.relative = true;\n        v11.geometry.offset = new Point(-v11.geometry.width, 12);\n        var v12 = v11.clone();\n        v12.value = 'Y';\n        v12.geometry.offset = new Point(-v11.geometry.width, 52);\n        v1.insert(v12);\n        var v15 = v11.clone();\n        v15.value = '';\n        v15.geometry.x = 1;\n        v15.style = {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingRight: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        };\n        v15.geometry.offset = new Point(0, 32);\n        v1.insert(v15);\n\n        var v16 = graph.insertVertex(v1, null, '==', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 15,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v16.geometry.x = 1;\n        v16.geometry.offset = new Point(30, 38);\n        v1.insert(v16);\n      } else if (targetId === 'btn4') {\n        var v1 = graph.insertVertex(parent, null, '', 80, 140, 40, 80,\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n        v1.setConnectable(false);\n\n        var v11 = graph.insertVertex(v1, null, '', 0, 0, 14, 16, {\n          shape: 'line',\n          align: 'left',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: -0.5,\n          spacingLeft: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v11.geometry.relative = true;\n        v11.geometry.offset = new Point(-v11.geometry.width, 12);\n        var v12 = v11.clone();\n        v12.value = '';\n        v12.geometry.offset = new Point(-v11.geometry.width, 52);\n        v1.insert(v12);\n        var v15 = v11.clone();\n        v15.value = '';\n        v15.geometry.x = 1;\n        v15.style = {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingRight: 12,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        };\n        v15.geometry.offset = new Point(0, 32);\n        v1.insert(v15);\n\n        var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 25,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v16.geometry.x = 1;\n        v16.geometry.offset = new Point(8, 15);\n        v1.insert(v16);\n        var v17 = graph.insertVertex(v1, null, 'X', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v17.geometry.x = 1;\n        v17.geometry.offset = new Point(14, 20);\n        v1.insert(v17);\n        var v18 = graph.insertVertex(v1, null, 'Y', 0, 0, 0, 0, {\n          shape: 'line',\n          align: 'right',\n          verticalAlign: 'middle',\n          fontSize: 10,\n          routingCenterX: 0.5,\n          spacingLeft: 6,\n          fontColor: fontColor,\n          strokeColor: strokeColor\n        });\n        v18.geometry.x = 1;\n        v18.geometry.offset = new Point(14, 59);\n        v1.insert(v18);\n      }\n    });\n  };\n\n\n  btn1.addEventListener('click', update);\n  btn2.addEventListener('click', update);\n  btn3.addEventListener('click', update);\n  btn4.addEventListener('click', update);\n  btn5.addEventListener('click', update);\n  btn6.addEventListener('click', update);\n  btn7.addEventListener('click', update);\n\n  ////////////////////////////////////////////////////////\n// XML \n\ndocument.getElementById(\"xml\").onclick = () => {\n  // Получаем XML данные\n  const xml = new ModelXmlSerializer(graph.getDataModel()).export();\n  \n  // Создаем новый Blob объект с XML данными\n  const blob = new Blob([xml], { type: 'text/xml' });\n  \n  // Создаем ссылку на Blob объект\n  const url = window.URL.createObjectURL(blob);\n  \n  // Создаем ссылку для скачивания\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'data.xml'; // Имя файла для скачивания\n  document.body.appendChild(a);\n  \n  // Инициируем скачивание файла\n  a.click();\n  \n  // Освобождаем ресурсы\n  window.URL.revokeObjectURL(url);\n};\n\n\n\n\n\n\n\n\n\n///////////////////////////////////////////////////////////\n\n\n    document.getElementById(\"zoom\").onclick = () => graph.zoomIn();\n    document.getElementById(\"zoomout\").onclick = () => graph.zoomOut();\n\n  // Undo/redo\n  let undoManager = new UndoManager();\n  let listener = function (sender, evt) {\n    undoManager.undoableEditHappened(evt.getProperty('edit'));\n  };\n  graph.getDataModel().addListener(InternalEvent.UNDO, listener);\n  graph.getView().addListener(InternalEvent.UNDO, listener);\n\n  document.getElementById(\"undo\").onclick = () => undoManager.undo();\n  document.getElementById(\"redo\").onclick = () => undoManager.redo();\n\n\n  document.getElementById(\"delete\").onclick = () => graph.removeCells();\n\n  // Wire-mode\n  let checkbox = document.getElementById(\"wire\");\n\n  // Grid\n  let checkbox2 = document.getElementById(\"grid\");\n  checkbox2.setAttribute('checked', 'true');\n\n\n  InternalEvent.addListener(checkbox2, 'click', function (evt) {\n    if (checkbox2.checked) {\n      container.style.background = 'url(./images/grid.gif)';\n    } else {\n      container.style.background = '';\n    }\n    container.style.backgroundColor = invert ? 'black' : 'white';\n  });\n  InternalEvent.disableContextMenu(container);\n\n\n    graphContainer.appendChild(parentContainer);\n}\n  \n    return () => {\n      // Clean up if needed\n    }; \n  }, []);\n  \n  const handleFileImport = (event) => {\n    const file = event.target.files[0];\n    console.log('саси'); // Загружаем новую схему\n    console.log(file);  \n    if (file) {\n      // Читаем XML файл и присваиваем его содержимое переменной\n      readXMLFile(file, (xmlContent) => {\n        setXmlText(xmlContent);  // Присваиваем текст файла переменной xmlText\n        console.log(xmlContent);  // Выводим текст файла в консоль\n        loadGraphFromXml(xmlContent, graph); // Загружаем схему\n      });\n    }\n  };\n\n  return (\n    <div>\n      {/* Скрытый input для выбора XML файла */}\n      <input \n        type=\"file\" \n        accept=\".xml\" \n        ref={importFileInputRef} \n        style={{ display: 'none' }} \n        onChange={handleFileImport} \n      />\n  \n      {/* Кнопка импорта */}\n      <button id=\"import\">Импортировать схему</button>\n      \n      {/* Контейнер для графа */}\n      <div ref={graphContainerRef} style={{ width: '100%', height: '100%' }} />\n    </div>\n  );\n  \n};\n\n\n// Функция для чтения XML файла\nfunction readXMLFile(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(event) {\n    const xmlContent = event.target.result;  // Текст файла\n    callback(xmlContent);  // Передаём текст файла в callback\n  };\n  reader.readAsText(file);\n}\n\n\nconst loadGraphFromXml = (xml, graph) => {\n  // Парсим XML в документ\n  const doc = xmlUtils.parseXml(xml);\n\n  // Создаем кодек для декодирования XML\n  const codec = new Codec(doc);\n\n  // Инициализируем массив для ячеек\n  const cells = [];\n\n  // Получаем первый элемент (ячейку) внутри <root>\n  let elt = doc.documentElement.firstChild;\n\n  // Проходим по каждому элементу и декодируем его\n  while (elt != null) {\n    if (elt.nodeType === 1) {  // Проверяем, что это элемент (узел типа 1)\n      console.log(\"Декодируем элемент:\", elt);  // Выводим каждый элемент для проверки\n      const decodedCell = codec.decodeCell(elt);  // Используем decodeCell\n      if (decodedCell) {\n        cells.push(decodedCell);  // Добавляем в массив только валидные объекты\n      } else {\n        console.error(\"Не удалось декодировать элемент как валидную ячейку:\", elt);\n      }\n    } else {\n      console.warn(\"Пропуск текстового узла:\", elt);  // Пропускаем текстовые узлы\n    }\n    elt = elt.nextSibling;  // Переходим к следующему элементу\n  }\n\n  // Добавляем ячейки в граф\n  if (cells.length > 0) {\n    graph.addCells(cells);  // Добавляем все ячейки в граф\n  }\n\n  graph.refresh();  // Обновляем граф\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}