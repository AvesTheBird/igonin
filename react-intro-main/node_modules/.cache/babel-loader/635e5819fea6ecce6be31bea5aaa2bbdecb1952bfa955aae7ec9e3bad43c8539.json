{"ast":null,"code":"export class ObjectPool {\n  constructor(_create) {\n    this._create = _create;\n    this._unused = new Set();\n    this._used = new Set();\n    this._itemData = new Map();\n  }\n  getUnusedObj(data) {\n    let obj;\n    if (this._unused.size === 0) {\n      obj = this._create(data);\n      this._itemData.set(obj, data);\n    } else {\n      var _values$find;\n      const values = [...this._unused.values()];\n      obj = (_values$find = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _values$find !== void 0 ? _values$find : values[0];\n      this._unused.delete(obj);\n      this._itemData.set(obj, data);\n      obj.setData(data);\n    }\n    this._used.add(obj);\n    return {\n      object: obj,\n      dispose: () => {\n        this._used.delete(obj);\n        if (this._unused.size > 5) {\n          obj.dispose();\n        } else {\n          this._unused.add(obj);\n        }\n      }\n    };\n  }\n  dispose() {\n    for (const obj of this._used) {\n      obj.dispose();\n    }\n    for (const obj of this._unused) {\n      obj.dispose();\n    }\n    this._used.clear();\n    this._unused.clear();\n  }\n}","map":{"version":3,"names":["ObjectPool","constructor","_create","_unused","Set","_used","_itemData","Map","getUnusedObj","data","obj","size","set","_values$find","values","find","get","getId","delete","setData","add","object","dispose","clear"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/objectPool.js"],"sourcesContent":["export class ObjectPool {\n    constructor(_create) {\n        this._create = _create;\n        this._unused = new Set();\n        this._used = new Set();\n        this._itemData = new Map();\n    }\n    getUnusedObj(data) {\n        let obj;\n        if (this._unused.size === 0) {\n            obj = this._create(data);\n            this._itemData.set(obj, data);\n        }\n        else {\n            const values = [...this._unused.values()];\n            obj = values.find(obj => this._itemData.get(obj).getId() === data.getId()) ?? values[0];\n            this._unused.delete(obj);\n            this._itemData.set(obj, data);\n            obj.setData(data);\n        }\n        this._used.add(obj);\n        return {\n            object: obj,\n            dispose: () => {\n                this._used.delete(obj);\n                if (this._unused.size > 5) {\n                    obj.dispose();\n                }\n                else {\n                    this._unused.add(obj);\n                }\n            }\n        };\n    }\n    dispose() {\n        for (const obj of this._used) {\n            obj.dispose();\n        }\n        for (const obj of this._unused) {\n            obj.dispose();\n        }\n        this._used.clear();\n        this._unused.clear();\n    }\n}\n"],"mappings":"AAAA,OAAO,MAAMA,UAAU,CAAC;EACpBC,WAAWA,CAACC,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;IACxB,IAAI,CAACC,KAAK,GAAG,IAAID,GAAG,CAAC,CAAC;IACtB,IAAI,CAACE,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC9B;EACAC,YAAYA,CAACC,IAAI,EAAE;IACf,IAAIC,GAAG;IACP,IAAI,IAAI,CAACP,OAAO,CAACQ,IAAI,KAAK,CAAC,EAAE;MACzBD,GAAG,GAAG,IAAI,CAACR,OAAO,CAACO,IAAI,CAAC;MACxB,IAAI,CAACH,SAAS,CAACM,GAAG,CAACF,GAAG,EAAED,IAAI,CAAC;IACjC,CAAC,MACI;MAAA,IAAAI,YAAA;MACD,MAAMC,MAAM,GAAG,CAAC,GAAG,IAAI,CAACX,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC;MACzCJ,GAAG,IAAAG,YAAA,GAAGC,MAAM,CAACC,IAAI,CAACL,GAAG,IAAI,IAAI,CAACJ,SAAS,CAACU,GAAG,CAACN,GAAG,CAAC,CAACO,KAAK,CAAC,CAAC,KAAKR,IAAI,CAACQ,KAAK,CAAC,CAAC,CAAC,cAAAJ,YAAA,cAAAA,YAAA,GAAIC,MAAM,CAAC,CAAC,CAAC;MACvF,IAAI,CAACX,OAAO,CAACe,MAAM,CAACR,GAAG,CAAC;MACxB,IAAI,CAACJ,SAAS,CAACM,GAAG,CAACF,GAAG,EAAED,IAAI,CAAC;MAC7BC,GAAG,CAACS,OAAO,CAACV,IAAI,CAAC;IACrB;IACA,IAAI,CAACJ,KAAK,CAACe,GAAG,CAACV,GAAG,CAAC;IACnB,OAAO;MACHW,MAAM,EAAEX,GAAG;MACXY,OAAO,EAAEA,CAAA,KAAM;QACX,IAAI,CAACjB,KAAK,CAACa,MAAM,CAACR,GAAG,CAAC;QACtB,IAAI,IAAI,CAACP,OAAO,CAACQ,IAAI,GAAG,CAAC,EAAE;UACvBD,GAAG,CAACY,OAAO,CAAC,CAAC;QACjB,CAAC,MACI;UACD,IAAI,CAACnB,OAAO,CAACiB,GAAG,CAACV,GAAG,CAAC;QACzB;MACJ;IACJ,CAAC;EACL;EACAY,OAAOA,CAAA,EAAG;IACN,KAAK,MAAMZ,GAAG,IAAI,IAAI,CAACL,KAAK,EAAE;MAC1BK,GAAG,CAACY,OAAO,CAAC,CAAC;IACjB;IACA,KAAK,MAAMZ,GAAG,IAAI,IAAI,CAACP,OAAO,EAAE;MAC5BO,GAAG,CAACY,OAAO,CAAC,CAAC;IACjB;IACA,IAAI,CAACjB,KAAK,CAACkB,KAAK,CAAC,CAAC;IAClB,IAAI,CAACpB,OAAO,CAACoB,KAAK,CAAC,CAAC;EACxB;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}