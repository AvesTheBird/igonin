{"ast":null,"code":"/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport ObjectCodec from './ObjectCodec';\n/**\n * Singleton class that acts as a global registry for codecs.\n *\n * ### Adding a Codec\n *\n * 1. Define a default codec with a new instance of the object to be handled.\n *\n *     ```javascript\n *     const codec = new ObjectCodec(new Transactions());\n *     ```\n *\n * 2. Define the functions required for encoding and decoding objects.\n *\n *     ```javascript\n *     codec.encode = function(enc, obj) { ... }\n *     codec.decode = function(dec: Codec, node: Element, into: any): any { ... }\n *     ```\n *\n * 3. Register the codec in the CodecRegistry.\n *\n *     ```javascript\n *     CodecRegistry.register(codec);\n *     ```\n *\n * {@link ObjectCodec.decode} may be used to either create a new instance of an object or to configure an existing instance,\n * in which case the into argument points to the existing object. In this case, we say the codec \"configures\" the object.\n */\nclass CodecRegistry {\n  /**\n   * Registers a new codec and associates the name of the codec via {@link ObjectCodec.getName} with the codec object.\n   *\n   * @param codec ObjectCodec to be registered.\n   * @param registerAlias if `true`, register an alias if the codec name doesn't match the name of the constructor of {@link ObjectCodec.template}.\n   */\n  static register(codec, registerAlias = true) {\n    if (codec != null) {\n      const name = codec.getName();\n      CodecRegistry.codecs[name] = codec;\n      const classname = codec.template.constructor.name;\n      if (registerAlias && classname !== name) {\n        CodecRegistry.addAlias(classname, name);\n      }\n    }\n    return codec;\n  }\n  /**\n   * Adds an alias for mapping a classname to a codec name.\n   */\n  static addAlias(classname, codecname) {\n    CodecRegistry.aliases[classname] = codecname;\n  }\n  /**\n   * Returns a codec that handles objects that are constructed using the given constructor or a codec registered under the provided name.\n   *\n   * When passing a name, the method first check if an alias exists for the name, and if so, it uses it to retrieve the codec.\n   *\n   * If there is no registered Codec, the method tries to register a new Codec using the provided constructor.\n   *\n   * @param constructorOrName JavaScript constructor function of the Codec or Codec name.\n   */\n  static getCodec(constructorOrName) {\n    if (constructorOrName == null) {\n      return null;\n    }\n    let codec = null;\n    // Equivalent of calling import { getFunctionName } from '../util/StringUtils';\n    let name = typeof constructorOrName === 'string' ? constructorOrName : constructorOrName.name;\n    const tmp = CodecRegistry.aliases[name];\n    if (tmp != null) {\n      name = tmp;\n    }\n    codec = CodecRegistry.codecs[name] ?? null;\n    // Registers a new default codec for the given constructor if no codec has been previously defined.\n    if (codec == null) {\n      try {\n        codec = new ObjectCodec(new constructorOrName());\n        CodecRegistry.register(codec);\n      } catch (e) {\n        // ignore\n      }\n    }\n    return codec;\n  }\n  /**\n   * First try to get the codec by the name it is registered with. If it doesn't exist, use the alias eventually declared\n   * to get the codec.\n   * @param name the name of the codec that is willing to be retrieved.\n   */\n  static getCodecByName(name) {\n    let codec = CodecRegistry.codecs[name];\n    if (!codec) {\n      const alias = CodecRegistry.aliases[name];\n      if (alias) {\n        codec = CodecRegistry.codecs[alias];\n      }\n    }\n    return codec ?? null;\n  }\n}\nCodecRegistry.codecs = {};\n/**\n * Maps from classnames to codec names.\n */\nCodecRegistry.aliases = {};\nexport default CodecRegistry;","map":{"version":3,"names":["ObjectCodec","CodecRegistry","register","codec","registerAlias","name","getName","codecs","classname","template","constructor","addAlias","codecname","aliases","getCodec","constructorOrName","tmp","e","getCodecByName","alias"],"sources":["D:/OSPanel/domains/react/react-intro-main/node_modules/@maxgraph/core/dist/serialization/CodecRegistry.js"],"sourcesContent":["/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport ObjectCodec from './ObjectCodec';\n/**\n * Singleton class that acts as a global registry for codecs.\n *\n * ### Adding a Codec\n *\n * 1. Define a default codec with a new instance of the object to be handled.\n *\n *     ```javascript\n *     const codec = new ObjectCodec(new Transactions());\n *     ```\n *\n * 2. Define the functions required for encoding and decoding objects.\n *\n *     ```javascript\n *     codec.encode = function(enc, obj) { ... }\n *     codec.decode = function(dec: Codec, node: Element, into: any): any { ... }\n *     ```\n *\n * 3. Register the codec in the CodecRegistry.\n *\n *     ```javascript\n *     CodecRegistry.register(codec);\n *     ```\n *\n * {@link ObjectCodec.decode} may be used to either create a new instance of an object or to configure an existing instance,\n * in which case the into argument points to the existing object. In this case, we say the codec \"configures\" the object.\n */\nclass CodecRegistry {\n    /**\n     * Registers a new codec and associates the name of the codec via {@link ObjectCodec.getName} with the codec object.\n     *\n     * @param codec ObjectCodec to be registered.\n     * @param registerAlias if `true`, register an alias if the codec name doesn't match the name of the constructor of {@link ObjectCodec.template}.\n     */\n    static register(codec, registerAlias = true) {\n        if (codec != null) {\n            const name = codec.getName();\n            CodecRegistry.codecs[name] = codec;\n            const classname = codec.template.constructor.name;\n            if (registerAlias && classname !== name) {\n                CodecRegistry.addAlias(classname, name);\n            }\n        }\n        return codec;\n    }\n    /**\n     * Adds an alias for mapping a classname to a codec name.\n     */\n    static addAlias(classname, codecname) {\n        CodecRegistry.aliases[classname] = codecname;\n    }\n    /**\n     * Returns a codec that handles objects that are constructed using the given constructor or a codec registered under the provided name.\n     *\n     * When passing a name, the method first check if an alias exists for the name, and if so, it uses it to retrieve the codec.\n     *\n     * If there is no registered Codec, the method tries to register a new Codec using the provided constructor.\n     *\n     * @param constructorOrName JavaScript constructor function of the Codec or Codec name.\n     */\n    static getCodec(constructorOrName) {\n        if (constructorOrName == null) {\n            return null;\n        }\n        let codec = null;\n        // Equivalent of calling import { getFunctionName } from '../util/StringUtils';\n        let name = typeof constructorOrName === 'string' ? constructorOrName : constructorOrName.name;\n        const tmp = CodecRegistry.aliases[name];\n        if (tmp != null) {\n            name = tmp;\n        }\n        codec = CodecRegistry.codecs[name] ?? null;\n        // Registers a new default codec for the given constructor if no codec has been previously defined.\n        if (codec == null) {\n            try {\n                codec = new ObjectCodec(new constructorOrName());\n                CodecRegistry.register(codec);\n            }\n            catch (e) {\n                // ignore\n            }\n        }\n        return codec;\n    }\n    /**\n     * First try to get the codec by the name it is registered with. If it doesn't exist, use the alias eventually declared\n     * to get the codec.\n     * @param name the name of the codec that is willing to be retrieved.\n     */\n    static getCodecByName(name) {\n        let codec = CodecRegistry.codecs[name];\n        if (!codec) {\n            const alias = CodecRegistry.aliases[name];\n            if (alias) {\n                codec = CodecRegistry.codecs[alias];\n            }\n        }\n        return codec ?? null;\n    }\n}\nCodecRegistry.codecs = {};\n/**\n * Maps from classnames to codec names.\n */\nCodecRegistry.aliases = {};\nexport default CodecRegistry;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,WAAW,MAAM,eAAe;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAa,CAAC;EAChB;AACJ;AACA;AACA;AACA;AACA;EACI,OAAOC,QAAQA,CAACC,KAAK,EAAEC,aAAa,GAAG,IAAI,EAAE;IACzC,IAAID,KAAK,IAAI,IAAI,EAAE;MACf,MAAME,IAAI,GAAGF,KAAK,CAACG,OAAO,CAAC,CAAC;MAC5BL,aAAa,CAACM,MAAM,CAACF,IAAI,CAAC,GAAGF,KAAK;MAClC,MAAMK,SAAS,GAAGL,KAAK,CAACM,QAAQ,CAACC,WAAW,CAACL,IAAI;MACjD,IAAID,aAAa,IAAII,SAAS,KAAKH,IAAI,EAAE;QACrCJ,aAAa,CAACU,QAAQ,CAACH,SAAS,EAAEH,IAAI,CAAC;MAC3C;IACJ;IACA,OAAOF,KAAK;EAChB;EACA;AACJ;AACA;EACI,OAAOQ,QAAQA,CAACH,SAAS,EAAEI,SAAS,EAAE;IAClCX,aAAa,CAACY,OAAO,CAACL,SAAS,CAAC,GAAGI,SAAS;EAChD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOE,QAAQA,CAACC,iBAAiB,EAAE;IAC/B,IAAIA,iBAAiB,IAAI,IAAI,EAAE;MAC3B,OAAO,IAAI;IACf;IACA,IAAIZ,KAAK,GAAG,IAAI;IAChB;IACA,IAAIE,IAAI,GAAG,OAAOU,iBAAiB,KAAK,QAAQ,GAAGA,iBAAiB,GAAGA,iBAAiB,CAACV,IAAI;IAC7F,MAAMW,GAAG,GAAGf,aAAa,CAACY,OAAO,CAACR,IAAI,CAAC;IACvC,IAAIW,GAAG,IAAI,IAAI,EAAE;MACbX,IAAI,GAAGW,GAAG;IACd;IACAb,KAAK,GAAGF,aAAa,CAACM,MAAM,CAACF,IAAI,CAAC,IAAI,IAAI;IAC1C;IACA,IAAIF,KAAK,IAAI,IAAI,EAAE;MACf,IAAI;QACAA,KAAK,GAAG,IAAIH,WAAW,CAAC,IAAIe,iBAAiB,CAAC,CAAC,CAAC;QAChDd,aAAa,CAACC,QAAQ,CAACC,KAAK,CAAC;MACjC,CAAC,CACD,OAAOc,CAAC,EAAE;QACN;MAAA;IAER;IACA,OAAOd,KAAK;EAChB;EACA;AACJ;AACA;AACA;AACA;EACI,OAAOe,cAAcA,CAACb,IAAI,EAAE;IACxB,IAAIF,KAAK,GAAGF,aAAa,CAACM,MAAM,CAACF,IAAI,CAAC;IACtC,IAAI,CAACF,KAAK,EAAE;MACR,MAAMgB,KAAK,GAAGlB,aAAa,CAACY,OAAO,CAACR,IAAI,CAAC;MACzC,IAAIc,KAAK,EAAE;QACPhB,KAAK,GAAGF,aAAa,CAACM,MAAM,CAACY,KAAK,CAAC;MACvC;IACJ;IACA,OAAOhB,KAAK,IAAI,IAAI;EACxB;AACJ;AACAF,aAAa,CAACM,MAAM,GAAG,CAAC,CAAC;AACzB;AACA;AACA;AACAN,aAAa,CAACY,OAAO,GAAG,CAAC,CAAC;AAC1B,eAAeZ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}