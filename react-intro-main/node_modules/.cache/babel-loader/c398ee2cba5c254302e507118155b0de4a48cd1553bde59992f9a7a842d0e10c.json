{"ast":null,"code":"var _jsxFileName = \"D:\\\\OSPanel\\\\domains\\\\react\\\\react-intro-main\\\\src\\\\components\\\\SignalGraph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport VCDParser from 'vcd-parser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignalGraph = () => {\n  _s();\n  const [chartData, setChartData] = useState(null);\n  useEffect(() => {\n    loadVCDData();\n  }, []);\n\n  // Функция для загрузки VCD\n  const loadVCDData = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/get-cvd');\n      if (!response.ok) {\n        throw new Error('Ошибка загрузки файла');\n      }\n      const data = await response.text();\n      console.log('VCD данные:', data);\n\n      // Парсим VCD\n      const parsedData = await VCDParser.parse(data);\n      setChartData(formatChartData(parsedData));\n    } catch (error) {\n      console.error('Ошибка загрузки данных:', error);\n    }\n  };\n\n  // Преобразуем JSON-структуру в данные для графика\n  const formatChartData = parsedData => {\n    if (!parsedData.signal || parsedData.signal.length === 0) {\n      return null;\n    }\n    const timestamps = [];\n    const datasets = parsedData.signal.map((signal, index) => {\n      const dataPoints = signal.wave.map(([time, value]) => {\n        if (!timestamps.includes(time)) timestamps.push(time); // Добавляем уникальные метки времени\n        return value === 'x' || value === 'z' ? 0 : Number(value); // Преобразуем значение\n      });\n      return {\n        label: signal.name,\n        data: dataPoints,\n        borderColor: index % 2 === 0 ? 'rgb(75, 192, 192)' : 'rgb(255, 99, 132)',\n        tension: 0.1\n      };\n    });\n    return {\n      labels: timestamps,\n      datasets: datasets\n    };\n  };\n  if (!chartData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0421\\u0438\\u0433\\u043D\\u0430\\u043B-\\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: {\n        responsive: true,\n        plugins: {\n          legend: {\n            position: 'top'\n          },\n          title: {\n            display: true,\n            text: 'Сигнал-график VCD файла'\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(SignalGraph, \"9euvDhZ+n6eLTlbzwvHmNPhoqAw=\");\n_c = SignalGraph;\nexport default SignalGraph;\nvar _c;\n$RefreshReg$(_c, \"SignalGraph\");","map":{"version":3,"names":["React","useState","useEffect","Line","VCDParser","jsxDEV","_jsxDEV","SignalGraph","_s","chartData","setChartData","loadVCDData","response","fetch","ok","Error","data","text","console","log","parsedData","parse","formatChartData","error","signal","length","timestamps","datasets","map","index","dataPoints","wave","time","value","includes","push","Number","label","name","borderColor","tension","labels","children","fileName","_jsxFileName","lineNumber","columnNumber","options","responsive","plugins","legend","position","title","display","_c","$RefreshReg$"],"sources":["D:/OSPanel/domains/react/react-intro-main/src/components/SignalGraph.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport VCDParser from 'vcd-parser';\r\n\r\nconst SignalGraph = () => {\r\n    const [chartData, setChartData] = useState(null);\r\n\r\n    useEffect(() => {\r\n        loadVCDData();\r\n    }, []);\r\n\r\n    // Функция для загрузки VCD\r\n    const loadVCDData = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/get-cvd');\r\n            if (!response.ok) {\r\n                throw new Error('Ошибка загрузки файла');\r\n            }\r\n            const data = await response.text();\r\n            console.log('VCD данные:', data);\r\n\r\n            // Парсим VCD\r\n            const parsedData = await VCDParser.parse(data);\r\n            setChartData(formatChartData(parsedData));\r\n\r\n        } catch (error) {\r\n            console.error('Ошибка загрузки данных:', error);\r\n        }\r\n    };\r\n\r\n    // Преобразуем JSON-структуру в данные для графика\r\n    const formatChartData = (parsedData) => {\r\n        if (!parsedData.signal || parsedData.signal.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const timestamps = [];\r\n        const datasets = parsedData.signal.map((signal, index) => {\r\n            const dataPoints = signal.wave.map(([time, value]) => {\r\n                if (!timestamps.includes(time)) timestamps.push(time); // Добавляем уникальные метки времени\r\n                return value === 'x' || value === 'z' ? 0 : Number(value); // Преобразуем значение\r\n            });\r\n\r\n            return {\r\n                label: signal.name,\r\n                data: dataPoints,\r\n                borderColor: index % 2 === 0 ? 'rgb(75, 192, 192)' : 'rgb(255, 99, 132)',\r\n                tension: 0.1,\r\n            };\r\n        });\r\n\r\n        return {\r\n            labels: timestamps,\r\n            datasets: datasets,\r\n        };\r\n    };\r\n\r\n    if (!chartData) {\r\n        return <div>Загрузка данных графика...</div>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Сигнал-график</h1>\r\n            <Line\r\n                data={chartData}\r\n                options={{\r\n                    responsive: true,\r\n                    plugins: {\r\n                        legend: {\r\n                            position: 'top',\r\n                        },\r\n                        title: {\r\n                            display: true,\r\n                            text: 'Сигнал-график VCD файла',\r\n                        },\r\n                    },\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignalGraph;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}