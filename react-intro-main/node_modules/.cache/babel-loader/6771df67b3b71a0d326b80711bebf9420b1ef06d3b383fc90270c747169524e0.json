{"ast":null,"code":"/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport InternalEvent from '../view/event/InternalEvent';\nimport EventObject from '../view/event/EventObject';\nimport KeyHandler from '../view/handler/KeyHandler';\n/**\n * Binds keycodes to actionnames in an editor.  This aggregates an internal {@link handler} and extends the implementation of {@link KeyHandler.escape} to not only cancel the editing, but also hide the properties dialog and fire an <Editor.escape> event via {@link editor}.  An instance of this class is created by {@link Editor} and stored in {@link Editor.keyHandler}.\n *\n * @Example\n * Bind the delete key to the delete action in an existing editor.\n * ```javascript\n * var keyHandler = new EditorKeyHandler(editor);\n * keyHandler.bindAction(46, 'delete');\n * ```\n *\n * @Codec\n * This class uses the {@link DefaultKeyHandlerCodec} to read configuration data into an existing instance.  See {@link DefaultKeyHandlerCodec} for a description of the configuration format.\n *\n * @Keycodes\n * See {@link KeyHandler}.\n * An {@link InternalEvent.ESCAPE} event is fired via the editor if the escape key is pressed.\n */\nexport class EditorKeyHandler {\n  constructor(editor = null) {\n    /**\n     * Reference to the enclosing {@link Editor}.\n     */\n    this.editor = null;\n    /**\n     * Holds the {@link KeyHandler} for key event handling.\n     */\n    this.handler = null;\n    if (editor != null) {\n      this.editor = editor;\n      const handler = this.handler = new KeyHandler(editor.graph);\n      // Extends the escape function of the internal key\n      // handle to hide the properties dialog and fire\n      // the escape event via the editor instance\n      const old = this.handler.escape;\n      this.handler.escape = evt => {\n        old.apply(handler, [evt]);\n        editor.hideProperties();\n        editor.fireEvent(new EventObject(InternalEvent.ESCAPE, {\n          event: evt\n        }));\n      };\n    }\n  }\n  /**\n   * Binds the specified keycode to the given action in {@link editor}.  The optional control flag specifies if the control key must be pressed to trigger the action.\n   *\n   * @param code      Integer that specifies the keycode.\n   * @param action    Name of the action to execute in {@link editor}.\n   * @param control   Optional boolean that specifies if control must be pressed.  Default is false.\n   */\n  bindAction(code, action, control) {\n    const keyHandler = () => {\n      this.editor.execute(action);\n    };\n    if (control) {\n      // Binds the function to control-down keycode\n      this.handler.bindControlKey(code, keyHandler);\n    } else {\n      // Binds the function to the normal keycode\n      this.handler.bindKey(code, keyHandler);\n    }\n  }\n  /**\n   * Destroys the {@link handler} associated with this object.  This does normally not need to be called, the {@link handler} is destroyed automatically when the window unloads (in IE) by {@link Editor}.\n   */\n  destroy() {\n    this.handler.onDestroy();\n    this.handler = null;\n  }\n}\nexport default EditorKeyHandler;","map":{"version":3,"names":["InternalEvent","EventObject","KeyHandler","EditorKeyHandler","constructor","editor","handler","graph","old","escape","evt","apply","hideProperties","fireEvent","ESCAPE","event","bindAction","code","action","control","keyHandler","execute","bindControlKey","bindKey","destroy","onDestroy"],"sources":["D:/ospanel/domains/react/react-intro/node_modules/@maxgraph/core/dist/editor/EditorKeyHandler.js"],"sourcesContent":["/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport InternalEvent from '../view/event/InternalEvent';\nimport EventObject from '../view/event/EventObject';\nimport KeyHandler from '../view/handler/KeyHandler';\n/**\n * Binds keycodes to actionnames in an editor.  This aggregates an internal {@link handler} and extends the implementation of {@link KeyHandler.escape} to not only cancel the editing, but also hide the properties dialog and fire an <Editor.escape> event via {@link editor}.  An instance of this class is created by {@link Editor} and stored in {@link Editor.keyHandler}.\n *\n * @Example\n * Bind the delete key to the delete action in an existing editor.\n * ```javascript\n * var keyHandler = new EditorKeyHandler(editor);\n * keyHandler.bindAction(46, 'delete');\n * ```\n *\n * @Codec\n * This class uses the {@link DefaultKeyHandlerCodec} to read configuration data into an existing instance.  See {@link DefaultKeyHandlerCodec} for a description of the configuration format.\n *\n * @Keycodes\n * See {@link KeyHandler}.\n * An {@link InternalEvent.ESCAPE} event is fired via the editor if the escape key is pressed.\n */\nexport class EditorKeyHandler {\n    constructor(editor = null) {\n        /**\n         * Reference to the enclosing {@link Editor}.\n         */\n        this.editor = null;\n        /**\n         * Holds the {@link KeyHandler} for key event handling.\n         */\n        this.handler = null;\n        if (editor != null) {\n            this.editor = editor;\n            const handler = (this.handler = new KeyHandler(editor.graph));\n            // Extends the escape function of the internal key\n            // handle to hide the properties dialog and fire\n            // the escape event via the editor instance\n            const old = this.handler.escape;\n            this.handler.escape = (evt) => {\n                old.apply(handler, [evt]);\n                editor.hideProperties();\n                editor.fireEvent(new EventObject(InternalEvent.ESCAPE, { event: evt }));\n            };\n        }\n    }\n    /**\n     * Binds the specified keycode to the given action in {@link editor}.  The optional control flag specifies if the control key must be pressed to trigger the action.\n     *\n     * @param code      Integer that specifies the keycode.\n     * @param action    Name of the action to execute in {@link editor}.\n     * @param control   Optional boolean that specifies if control must be pressed.  Default is false.\n     */\n    bindAction(code, action, control) {\n        const keyHandler = () => {\n            this.editor.execute(action);\n        };\n        if (control) {\n            // Binds the function to control-down keycode\n            this.handler.bindControlKey(code, keyHandler);\n        }\n        else {\n            // Binds the function to the normal keycode\n            this.handler.bindKey(code, keyHandler);\n        }\n    }\n    /**\n     * Destroys the {@link handler} associated with this object.  This does normally not need to be called, the {@link handler} is destroyed automatically when the window unloads (in IE) by {@link Editor}.\n     */\n    destroy() {\n        this.handler.onDestroy();\n        this.handler = null;\n    }\n}\nexport default EditorKeyHandler;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,6BAA6B;AACvD,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,UAAU,MAAM,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,CAAC;EAC1BC,WAAWA,CAACC,MAAM,GAAG,IAAI,EAAE;IACvB;AACR;AACA;IACQ,IAAI,CAACA,MAAM,GAAG,IAAI;IAClB;AACR;AACA;IACQ,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAID,MAAM,IAAI,IAAI,EAAE;MAChB,IAAI,CAACA,MAAM,GAAGA,MAAM;MACpB,MAAMC,OAAO,GAAI,IAAI,CAACA,OAAO,GAAG,IAAIJ,UAAU,CAACG,MAAM,CAACE,KAAK,CAAE;MAC7D;MACA;MACA;MACA,MAAMC,GAAG,GAAG,IAAI,CAACF,OAAO,CAACG,MAAM;MAC/B,IAAI,CAACH,OAAO,CAACG,MAAM,GAAIC,GAAG,IAAK;QAC3BF,GAAG,CAACG,KAAK,CAACL,OAAO,EAAE,CAACI,GAAG,CAAC,CAAC;QACzBL,MAAM,CAACO,cAAc,CAAC,CAAC;QACvBP,MAAM,CAACQ,SAAS,CAAC,IAAIZ,WAAW,CAACD,aAAa,CAACc,MAAM,EAAE;UAAEC,KAAK,EAAEL;QAAI,CAAC,CAAC,CAAC;MAC3E,CAAC;IACL;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIM,UAAUA,CAACC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAE;IAC9B,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACrB,IAAI,CAACf,MAAM,CAACgB,OAAO,CAACH,MAAM,CAAC;IAC/B,CAAC;IACD,IAAIC,OAAO,EAAE;MACT;MACA,IAAI,CAACb,OAAO,CAACgB,cAAc,CAACL,IAAI,EAAEG,UAAU,CAAC;IACjD,CAAC,MACI;MACD;MACA,IAAI,CAACd,OAAO,CAACiB,OAAO,CAACN,IAAI,EAAEG,UAAU,CAAC;IAC1C;EACJ;EACA;AACJ;AACA;EACII,OAAOA,CAAA,EAAG;IACN,IAAI,CAAClB,OAAO,CAACmB,SAAS,CAAC,CAAC;IACxB,IAAI,CAACnB,OAAO,GAAG,IAAI;EACvB;AACJ;AACA,eAAeH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}