{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { getCodiconFontCharacters } from '../../../common/codiconsUtil.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n  HorizontalDirection[HorizontalDirection[\"Right\"] = 0] = \"Right\";\n  HorizontalDirection[HorizontalDirection[\"Left\"] = 1] = \"Left\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n  VerticalDirection[VerticalDirection[\"Above\"] = 0] = \"Above\";\n  VerticalDirection[VerticalDirection[\"Below\"] = 1] = \"Below\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport class Menu extends ActionBar {\n  constructor(container, actions, options, menuStyles) {\n    container.classList.add('monaco-menu-container');\n    container.setAttribute('role', 'presentation');\n    const menuElement = document.createElement('div');\n    menuElement.classList.add('monaco-menu');\n    menuElement.setAttribute('role', 'presentation');\n    super(menuElement, {\n      orientation: 1 /* ActionsOrientation.VERTICAL */,\n      actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n      context: options.context,\n      actionRunner: options.actionRunner,\n      ariaLabel: options.ariaLabel,\n      ariaRole: 'menu',\n      focusOnlyEnabledItems: true,\n      triggerKeys: {\n        keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])],\n        keyDown: true\n      }\n    });\n    this.menuStyles = menuStyles;\n    this.menuElement = menuElement;\n    this.actionsList.tabIndex = 0;\n    this.initializeOrUpdateStyleSheet(container, menuStyles);\n    this._register(Gesture.addTarget(menuElement));\n    this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n      const event = new StandardKeyboardEvent(e);\n      // Stop tab navigation of menus\n      if (event.equals(2 /* KeyCode.Tab */)) {\n        e.preventDefault();\n      }\n    }));\n    if (options.enableMnemonics) {\n      this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n        const key = e.key.toLocaleLowerCase();\n        if (this.mnemonics.has(key)) {\n          EventHelper.stop(e, true);\n          const actions = this.mnemonics.get(key);\n          if (actions.length === 1) {\n            if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n              this.focusItemByElement(actions[0].container);\n            }\n            actions[0].onClick(e);\n          }\n          if (actions.length > 1) {\n            const action = actions.shift();\n            if (action && action.container) {\n              this.focusItemByElement(action.container);\n              actions.push(action);\n            }\n            this.mnemonics.set(key, actions);\n          }\n        }\n      }));\n    }\n    if (isLinux) {\n      this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n        const event = new StandardKeyboardEvent(e);\n        if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n          this.focusedItem = this.viewItems.length - 1;\n          this.focusNext();\n          EventHelper.stop(e, true);\n        } else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n          this.focusedItem = 0;\n          this.focusPrevious();\n          EventHelper.stop(e, true);\n        }\n      }));\n    }\n    this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n      const relatedTarget = e.relatedTarget;\n      if (!isAncestor(relatedTarget, this.domNode)) {\n        this.focusedItem = undefined;\n        this.updateFocus();\n        e.stopPropagation();\n      }\n    }));\n    this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n      let target = e.target;\n      if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n        return;\n      }\n      while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n        target = target.parentElement;\n      }\n      if (target.classList.contains('action-item')) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(target);\n        if (lastFocusedItem !== this.focusedItem) {\n          this.updateFocus();\n        }\n      }\n    }));\n    // Support touch on actions list to focus items (needed for submenus)\n    this._register(Gesture.addTarget(this.actionsList));\n    this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n      let target = e.initialTarget;\n      if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n        return;\n      }\n      while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n        target = target.parentElement;\n      }\n      if (target.classList.contains('action-item')) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(target);\n        if (lastFocusedItem !== this.focusedItem) {\n          this.updateFocus();\n        }\n      }\n    }));\n    const parentData = {\n      parent: this\n    };\n    this.mnemonics = new Map();\n    // Scroll Logic\n    this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: 2 /* ScrollbarVisibility.Hidden */,\n      vertical: 3 /* ScrollbarVisibility.Visible */,\n      verticalScrollbarSize: 7,\n      handleMouseWheel: true,\n      useShadows: true\n    }));\n    const scrollElement = this.scrollableElement.getDomNode();\n    scrollElement.style.position = '';\n    this.styleScrollElement(scrollElement, menuStyles);\n    // Support scroll on menu drag\n    this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n      EventHelper.stop(e, true);\n      const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n      this.scrollableElement.setScrollPosition({\n        scrollTop: scrollTop - e.translationY\n      });\n    }));\n    this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n      // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n      // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n      e.preventDefault();\n    }));\n    const window = getWindow(container);\n    menuElement.style.maxHeight = \"\".concat(Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35), \"px\");\n    actions = actions.filter((a, idx) => {\n      var _options$submenuIds;\n      if ((_options$submenuIds = options.submenuIds) !== null && _options$submenuIds !== void 0 && _options$submenuIds.has(a.id)) {\n        console.warn(\"Found submenu cycle: \".concat(a.id));\n        return false;\n      }\n      // Filter out consecutive or useless separators\n      if (a instanceof Separator) {\n        if (idx === actions.length - 1 || idx === 0) {\n          return false;\n        }\n        const prevAction = actions[idx - 1];\n        if (prevAction instanceof Separator) {\n          return false;\n        }\n      }\n      return true;\n    });\n    this.push(actions, {\n      icon: true,\n      label: true,\n      isMenu: true\n    });\n    container.appendChild(this.scrollableElement.getDomNode());\n    this.scrollableElement.scanDomNode();\n    this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n      item.updatePositionInSet(index + 1, array.length);\n    });\n  }\n  initializeOrUpdateStyleSheet(container, style) {\n    if (!this.styleSheet) {\n      if (isInShadowDOM(container)) {\n        this.styleSheet = createStyleSheet(container);\n      } else {\n        if (!Menu.globalStyleSheet) {\n          Menu.globalStyleSheet = createStyleSheet();\n        }\n        this.styleSheet = Menu.globalStyleSheet;\n      }\n    }\n    this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n  }\n  styleScrollElement(scrollElement, style) {\n    var _style$foregroundColo, _style$backgroundColo;\n    const fgColor = (_style$foregroundColo = style.foregroundColor) !== null && _style$foregroundColo !== void 0 ? _style$foregroundColo : '';\n    const bgColor = (_style$backgroundColo = style.backgroundColor) !== null && _style$backgroundColo !== void 0 ? _style$backgroundColo : '';\n    const border = style.borderColor ? \"1px solid \".concat(style.borderColor) : '';\n    const borderRadius = '5px';\n    const shadow = style.shadowColor ? \"0 2px 8px \".concat(style.shadowColor) : '';\n    scrollElement.style.outline = border;\n    scrollElement.style.borderRadius = borderRadius;\n    scrollElement.style.color = fgColor;\n    scrollElement.style.backgroundColor = bgColor;\n    scrollElement.style.boxShadow = shadow;\n  }\n  getContainer() {\n    return this.scrollableElement.getDomNode();\n  }\n  get onScroll() {\n    return this.scrollableElement.onScroll;\n  }\n  focusItemByElement(element) {\n    const lastFocusedItem = this.focusedItem;\n    this.setFocusedItem(element);\n    if (lastFocusedItem !== this.focusedItem) {\n      this.updateFocus();\n    }\n  }\n  setFocusedItem(element) {\n    for (let i = 0; i < this.actionsList.children.length; i++) {\n      const elem = this.actionsList.children[i];\n      if (element === elem) {\n        this.focusedItem = i;\n        break;\n      }\n    }\n  }\n  updateFocus(fromRight) {\n    super.updateFocus(fromRight, true, true);\n    if (typeof this.focusedItem !== 'undefined') {\n      // Workaround for #80047 caused by an issue in chromium\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n      // When that's fixed, just call this.scrollableElement.scanDomNode()\n      this.scrollableElement.setScrollPosition({\n        scrollTop: Math.round(this.menuElement.scrollTop)\n      });\n    }\n  }\n  doGetActionViewItem(action, options, parentData) {\n    if (action instanceof Separator) {\n      return new MenuSeparatorActionViewItem(options.context, action, {\n        icon: true\n      }, this.menuStyles);\n    } else if (action instanceof SubmenuAction) {\n      const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, {\n        ...options,\n        submenuIds: new Set([...(options.submenuIds || []), action.id])\n      }, this.menuStyles);\n      if (options.enableMnemonics) {\n        const mnemonic = menuActionViewItem.getMnemonic();\n        if (mnemonic && menuActionViewItem.isEnabled()) {\n          let actionViewItems = [];\n          if (this.mnemonics.has(mnemonic)) {\n            actionViewItems = this.mnemonics.get(mnemonic);\n          }\n          actionViewItems.push(menuActionViewItem);\n          this.mnemonics.set(mnemonic, actionViewItems);\n        }\n      }\n      return menuActionViewItem;\n    } else {\n      const menuItemOptions = {\n        enableMnemonics: options.enableMnemonics,\n        useEventAsContext: options.useEventAsContext\n      };\n      if (options.getKeyBinding) {\n        const keybinding = options.getKeyBinding(action);\n        if (keybinding) {\n          const keybindingLabel = keybinding.getLabel();\n          if (keybindingLabel) {\n            menuItemOptions.keybinding = keybindingLabel;\n          }\n        }\n      }\n      const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n      if (options.enableMnemonics) {\n        const mnemonic = menuActionViewItem.getMnemonic();\n        if (mnemonic && menuActionViewItem.isEnabled()) {\n          let actionViewItems = [];\n          if (this.mnemonics.has(mnemonic)) {\n            actionViewItems = this.mnemonics.get(mnemonic);\n          }\n          actionViewItems.push(menuActionViewItem);\n          this.mnemonics.set(mnemonic, actionViewItems);\n        }\n      }\n      return menuActionViewItem;\n    }\n  }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n  constructor(ctx, action, options, menuStyle) {\n    options.isMenu = true;\n    super(action, action, options);\n    this.menuStyle = menuStyle;\n    this.options = options;\n    this.options.icon = options.icon !== undefined ? options.icon : false;\n    this.options.label = options.label !== undefined ? options.label : true;\n    this.cssClass = '';\n    // Set mnemonic\n    if (this.options.label && options.enableMnemonics) {\n      const label = this.action.label;\n      if (label) {\n        const matches = MENU_MNEMONIC_REGEX.exec(label);\n        if (matches) {\n          this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n        }\n      }\n    }\n    // Add mouse up listener later to avoid accidental clicks\n    this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n      if (!this.element) {\n        return;\n      }\n      this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n        // removed default prevention as it conflicts\n        // with BaseActionViewItem #101537\n        // add back if issues arise and link new issue\n        EventHelper.stop(e, true);\n        // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n        // > Writing to the clipboard\n        // > You can use the \"cut\" and \"copy\" commands without any special\n        // permission if you are using them in a short-lived event handler\n        // for a user action (for example, a click handler).\n        // => to get the Copy and Paste context menu actions working on Firefox,\n        // there should be no timeout here\n        if (isFirefox) {\n          const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\n          // Allowing right click to trigger the event causes the issue described below,\n          // but since the solution below does not work in FF, we must disable right click\n          if (mouseEvent.rightButton) {\n            return;\n          }\n          this.onClick(e);\n        }\n        // In all other cases, set timeout to allow context menu cancellation to trigger\n        // otherwise the action will destroy the menu and a second context menu\n        // will still trigger for right click.\n        else {\n          setTimeout(() => {\n            this.onClick(e);\n          }, 0);\n        }\n      }));\n      this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n        EventHelper.stop(e, true);\n      }));\n    }, 100);\n    this._register(this.runOnceToEnableMouseUp);\n  }\n  render(container) {\n    super.render(container);\n    if (!this.element) {\n      return;\n    }\n    this.container = container;\n    this.item = append(this.element, $('a.action-menu-item'));\n    if (this._action.id === Separator.ID) {\n      // A separator is a presentation item\n      this.item.setAttribute('role', 'presentation');\n    } else {\n      this.item.setAttribute('role', 'menuitem');\n      if (this.mnemonic) {\n        this.item.setAttribute('aria-keyshortcuts', \"\".concat(this.mnemonic));\n      }\n    }\n    this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n    this.check.setAttribute('role', 'none');\n    this.label = append(this.item, $('span.action-label'));\n    if (this.options.label && this.options.keybinding) {\n      append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n    }\n    // Adds mouse up listener to actually run the action\n    this.runOnceToEnableMouseUp.schedule();\n    this.updateClass();\n    this.updateLabel();\n    this.updateTooltip();\n    this.updateEnabled();\n    this.updateChecked();\n    this.applyStyle();\n  }\n  blur() {\n    super.blur();\n    this.applyStyle();\n  }\n  focus() {\n    var _this$item;\n    super.focus();\n    (_this$item = this.item) === null || _this$item === void 0 || _this$item.focus();\n    this.applyStyle();\n  }\n  updatePositionInSet(pos, setSize) {\n    if (this.item) {\n      this.item.setAttribute('aria-posinset', \"\".concat(pos));\n      this.item.setAttribute('aria-setsize', \"\".concat(setSize));\n    }\n  }\n  updateLabel() {\n    if (!this.label) {\n      return;\n    }\n    if (this.options.label) {\n      clearNode(this.label);\n      let label = stripIcons(this.action.label);\n      if (label) {\n        const cleanLabel = cleanMnemonic(label);\n        if (!this.options.enableMnemonics) {\n          label = cleanLabel;\n        }\n        this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n        const matches = MENU_MNEMONIC_REGEX.exec(label);\n        if (matches) {\n          var _this$item2;\n          label = strings.escape(label);\n          // This is global, reset it\n          MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n          let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n          // We can't use negative lookbehind so if we match our negative and skip\n          while (escMatch && escMatch[1]) {\n            escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n          }\n          const replaceDoubleEscapes = str => str.replace(/&amp;&amp;/g, '&amp;');\n          if (escMatch) {\n            this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', {\n              'aria-hidden': 'true'\n            }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n          } else {\n            this.label.innerText = replaceDoubleEscapes(label).trim();\n          }\n          (_this$item2 = this.item) === null || _this$item2 === void 0 || _this$item2.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n        } else {\n          this.label.innerText = label.replace(/&&/g, '&').trim();\n        }\n      }\n    }\n  }\n  updateTooltip() {\n    // menus should function like native menus and they do not have tooltips\n  }\n  updateClass() {\n    if (this.cssClass && this.item) {\n      this.item.classList.remove(...this.cssClass.split(' '));\n    }\n    if (this.options.icon && this.label) {\n      this.cssClass = this.action.class || '';\n      this.label.classList.add('icon');\n      if (this.cssClass) {\n        this.label.classList.add(...this.cssClass.split(' '));\n      }\n      this.updateEnabled();\n    } else if (this.label) {\n      this.label.classList.remove('icon');\n    }\n  }\n  updateEnabled() {\n    if (this.action.enabled) {\n      if (this.element) {\n        this.element.classList.remove('disabled');\n        this.element.removeAttribute('aria-disabled');\n      }\n      if (this.item) {\n        this.item.classList.remove('disabled');\n        this.item.removeAttribute('aria-disabled');\n        this.item.tabIndex = 0;\n      }\n    } else {\n      if (this.element) {\n        this.element.classList.add('disabled');\n        this.element.setAttribute('aria-disabled', 'true');\n      }\n      if (this.item) {\n        this.item.classList.add('disabled');\n        this.item.setAttribute('aria-disabled', 'true');\n      }\n    }\n  }\n  updateChecked() {\n    if (!this.item) {\n      return;\n    }\n    const checked = this.action.checked;\n    this.item.classList.toggle('checked', !!checked);\n    if (checked !== undefined) {\n      this.item.setAttribute('role', 'menuitemcheckbox');\n      this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n    } else {\n      this.item.setAttribute('role', 'menuitem');\n      this.item.setAttribute('aria-checked', '');\n    }\n  }\n  getMnemonic() {\n    return this.mnemonic;\n  }\n  applyStyle() {\n    const isSelected = this.element && this.element.classList.contains('focused');\n    const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n    const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n    const outline = isSelected && this.menuStyle.selectionBorderColor ? \"1px solid \".concat(this.menuStyle.selectionBorderColor) : '';\n    const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? \"-1px\" : '';\n    if (this.item) {\n      this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n      this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n      this.item.style.outline = outline;\n      this.item.style.outlineOffset = outlineOffset;\n    }\n    if (this.check) {\n      this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n    }\n  }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n  constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n    super(action, action, submenuOptions, menuStyles);\n    this.submenuActions = submenuActions;\n    this.parentData = parentData;\n    this.submenuOptions = submenuOptions;\n    this.mysubmenu = null;\n    this.submenuDisposables = this._register(new DisposableStore());\n    this.mouseOver = false;\n    this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : {\n      horizontal: HorizontalDirection.Right,\n      vertical: VerticalDirection.Below\n    };\n    this.showScheduler = new RunOnceScheduler(() => {\n      if (this.mouseOver) {\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(false);\n      }\n    }, 250);\n    this.hideScheduler = new RunOnceScheduler(() => {\n      if (this.element && !isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu) {\n        this.parentData.parent.focus(false);\n        this.cleanupExistingSubmenu(true);\n      }\n    }, 750);\n  }\n  render(container) {\n    super.render(container);\n    if (!this.element) {\n      return;\n    }\n    if (this.item) {\n      this.item.classList.add('monaco-submenu-item');\n      this.item.tabIndex = 0;\n      this.item.setAttribute('aria-haspopup', 'true');\n      this.updateAriaExpanded('false');\n      this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n      this.submenuIndicator.setAttribute('aria-hidden', 'true');\n    }\n    this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n      const event = new StandardKeyboardEvent(e);\n      if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n        EventHelper.stop(e, true);\n        this.createSubmenu(true);\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n      const event = new StandardKeyboardEvent(e);\n      if (getActiveElement() === this.item) {\n        if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n          EventHelper.stop(e, true);\n        }\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n      if (!this.mouseOver) {\n        this.mouseOver = true;\n        this.showScheduler.schedule();\n      }\n    }));\n    this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n      this.mouseOver = false;\n    }));\n    this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n      if (this.element && !isAncestor(getActiveElement(), this.element)) {\n        this.hideScheduler.schedule();\n      }\n    }));\n    this._register(this.parentData.parent.onScroll(() => {\n      if (this.parentData.submenu === this.mysubmenu) {\n        this.parentData.parent.focus(false);\n        this.cleanupExistingSubmenu(true);\n      }\n    }));\n  }\n  updateEnabled() {\n    // override on submenu entry\n    // native menus do not observe enablement on sumbenus\n    // we mimic that behavior\n  }\n  onClick(e) {\n    // stop clicking from trying to run an action\n    EventHelper.stop(e, true);\n    this.cleanupExistingSubmenu(false);\n    this.createSubmenu(true);\n  }\n  cleanupExistingSubmenu(force) {\n    if (this.parentData.submenu && (force || this.parentData.submenu !== this.mysubmenu)) {\n      // disposal may throw if the submenu has already been removed\n      try {\n        this.parentData.submenu.dispose();\n      } catch {}\n      this.parentData.submenu = undefined;\n      this.updateAriaExpanded('false');\n      if (this.submenuContainer) {\n        this.submenuDisposables.clear();\n        this.submenuContainer = undefined;\n      }\n    }\n  }\n  calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n    const ret = {\n      top: 0,\n      left: 0\n    };\n    // Start with horizontal\n    ret.left = layout(windowDimensions.width, submenu.width, {\n      position: expandDirection.horizontal === HorizontalDirection.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */,\n      offset: entry.left,\n      size: entry.width\n    });\n    // We don't have enough room to layout the menu fully, so we are overlapping the menu\n    if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n      if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n        ret.left = entry.left + 10;\n      }\n      entry.top += 10;\n      entry.height = 0;\n    }\n    // Now that we have a horizontal position, try layout vertically\n    ret.top = layout(windowDimensions.height, submenu.height, {\n      position: 0 /* LayoutAnchorPosition.Before */,\n      offset: entry.top,\n      size: 0\n    });\n    // We didn't have enough room below, but we did above, so we shift down to align the menu\n    if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n      ret.top += entry.height;\n    }\n    return ret;\n  }\n  createSubmenu() {\n    let selectFirstItem = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.element) {\n      return;\n    }\n    if (!this.parentData.submenu) {\n      this.updateAriaExpanded('true');\n      this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n      this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n      // Set the top value of the menu container before construction\n      // This allows the menu constructor to calculate the proper max height\n      const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\n      const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n      // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n      this.submenuContainer.style.zIndex = '1';\n      this.submenuContainer.style.position = 'fixed';\n      this.submenuContainer.style.top = '0';\n      this.submenuContainer.style.left = '0';\n      this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n      // layout submenu\n      const entryBox = this.element.getBoundingClientRect();\n      const entryBoxUpdated = {\n        top: entryBox.top - paddingTop,\n        left: entryBox.left,\n        height: entryBox.height + 2 * paddingTop,\n        width: entryBox.width\n      };\n      const viewBox = this.submenuContainer.getBoundingClientRect();\n      const window = getWindow(this.element);\n      const {\n        top,\n        left\n      } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n      // subtract offsets caused by transform parent\n      this.submenuContainer.style.left = \"\".concat(left - viewBox.left, \"px\");\n      this.submenuContainer.style.top = \"\".concat(top - viewBox.top, \"px\");\n      this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n        const event = new StandardKeyboardEvent(e);\n        if (event.equals(15 /* KeyCode.LeftArrow */)) {\n          EventHelper.stop(e, true);\n          this.parentData.parent.focus();\n          this.cleanupExistingSubmenu(true);\n        }\n      }));\n      this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n        const event = new StandardKeyboardEvent(e);\n        if (event.equals(15 /* KeyCode.LeftArrow */)) {\n          EventHelper.stop(e, true);\n        }\n      }));\n      this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n        this.parentData.parent.focus();\n        this.cleanupExistingSubmenu(true);\n      }));\n      this.parentData.submenu.focus(selectFirstItem);\n      this.mysubmenu = this.parentData.submenu;\n    } else {\n      this.parentData.submenu.focus(false);\n    }\n  }\n  updateAriaExpanded(value) {\n    if (this.item) {\n      var _this$item3;\n      (_this$item3 = this.item) === null || _this$item3 === void 0 || _this$item3.setAttribute('aria-expanded', value);\n    }\n  }\n  applyStyle() {\n    super.applyStyle();\n    const isSelected = this.element && this.element.classList.contains('focused');\n    const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n    if (this.submenuIndicator) {\n      this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n    }\n  }\n  dispose() {\n    super.dispose();\n    this.hideScheduler.dispose();\n    if (this.mysubmenu) {\n      this.mysubmenu.dispose();\n      this.mysubmenu = null;\n    }\n    if (this.submenuContainer) {\n      this.submenuContainer = undefined;\n    }\n  }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n  constructor(context, action, options, menuStyles) {\n    super(context, action, options);\n    this.menuStyles = menuStyles;\n  }\n  render(container) {\n    super.render(container);\n    if (this.label) {\n      this.label.style.borderBottomColor = this.menuStyles.separatorColor ? \"\".concat(this.menuStyles.separatorColor) : '';\n    }\n  }\n}\nexport function cleanMnemonic(label) {\n  const regex = MENU_MNEMONIC_REGEX;\n  const matches = regex.exec(label);\n  if (!matches) {\n    return label;\n  }\n  const mnemonicInText = !matches[1];\n  return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n  const fontCharacter = getCodiconFontCharacters()[c.id];\n  return \".codicon-\".concat(c.id, \":before { content: '\\\\\").concat(fontCharacter.toString(16), \"'; }\");\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n  let result = /* css */\"\\n.monaco-menu {\\n\\tfont-size: 13px;\\n\\tborder-radius: 5px;\\n\\tmin-width: 160px;\\n}\\n\\n\".concat(formatRule(Codicon.menuSelection), \"\\n\").concat(formatRule(Codicon.menuSubmenu), \"\\n\\n.monaco-menu .monaco-action-bar {\\n\\ttext-align: right;\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n}\\n\\n.monaco-menu .monaco-action-bar .actions-container {\\n\\tdisplay: flex;\\n\\tmargin: 0 auto;\\n\\tpadding: 0;\\n\\twidth: 100%;\\n\\tjustify-content: flex-end;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .actions-container {\\n\\tdisplay: inline-block;\\n}\\n\\n.monaco-menu .monaco-action-bar.reverse .actions-container {\\n\\tflex-direction: row-reverse;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item {\\n\\tcursor: pointer;\\n\\tdisplay: inline-block;\\n\\ttransition: transform 50ms ease;\\n\\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item.disabled {\\n\\tcursor: default;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item .icon,\\n.monaco-menu .monaco-action-bar .action-item .codicon {\\n\\tdisplay: inline-block;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item .codicon {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-label {\\n\\tfont-size: 11px;\\n\\tmargin-right: 4px;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\\n\\tcolor: var(--vscode-disabledForeground);\\n}\\n\\n/* Vertical actions */\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\ttext-align: left;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tdisplay: block;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tdisplay: block;\\n\\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\\n\\tpadding-top: 1px;\\n\\tpadding: 30px;\\n}\\n\\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\\n\\tmargin-left: 6px;\\n}\\n\\n/* Action Items */\\n.monaco-menu .monaco-action-bar .action-item.select-container {\\n\\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\\n\\tflex: 1;\\n\\tmax-width: 170px;\\n\\tmin-width: 60px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tmargin-right: 10px;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\tmargin-left: 0;\\n\\toverflow: visible;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .actions-container {\\n\\tdisplay: block;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tpadding: 0;\\n\\ttransform: none;\\n\\tdisplay: flex;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\\n\\ttransform: none;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\\n\\tflex: 1 1 auto;\\n\\tdisplay: flex;\\n\\theight: 2em;\\n\\talign-items: center;\\n\\tposition: relative;\\n\\tmargin: 0 4px;\\n\\tborder-radius: 4px;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\\n\\topacity: unset;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label {\\n\\tflex: 1 1 auto;\\n\\ttext-decoration: none;\\n\\tpadding: 0 1em;\\n\\tbackground: none;\\n\\tfont-size: 12px;\\n\\tline-height: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .keybinding,\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\tdisplay: inline-block;\\n\\tflex: 2 1 auto;\\n\\tpadding: 0 1em;\\n\\ttext-align: right;\\n\\tfont-size: 12px;\\n\\tline-height: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\theight: 100%;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\\n\\tfont-size: 16px !important;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\\n\\tmargin-left: auto;\\n\\tmargin-right: -20px;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\\n\\topacity: 0.4;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\\n\\tdisplay: inline-block;\\n\\tbox-sizing: border-box;\\n\\tmargin: 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tposition: static;\\n\\toverflow: visible;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\\n\\tposition: absolute;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\twidth: 100%;\\n\\theight: 0px !important;\\n\\topacity: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\\n\\tpadding: 0.7em 1em 0.1em 1em;\\n\\tfont-weight: bold;\\n\\topacity: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\\n\\tcolor: inherit;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\\n\\tposition: absolute;\\n\\tvisibility: hidden;\\n\\twidth: 1em;\\n\\theight: 100%;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\\n\\tvisibility: visible;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n/* Context Menu */\\n\\n.context-view.monaco-menu-container {\\n\\toutline: 0;\\n\\tborder: none;\\n\\tanimation: fadeIn 0.083s linear;\\n\\t-webkit-app-region: no-drag;\\n}\\n\\n.context-view.monaco-menu-container :focus,\\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\\n\\toutline: 0;\\n}\\n\\n.hc-black .context-view.monaco-menu-container,\\n.hc-light .context-view.monaco-menu-container,\\n:host-context(.hc-black) .context-view.monaco-menu-container,\\n:host-context(.hc-light) .context-view.monaco-menu-container {\\n\\tbox-shadow: none;\\n}\\n\\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\\n\\tbackground: none;\\n}\\n\\n/* Vertical Action Bar Styles */\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\tpadding: 4px 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\\n\\theight: 2em;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\\n.monaco-menu .monaco-action-bar.vertical .keybinding {\\n\\tfont-size: inherit;\\n\\tpadding: 0 2em;\\n\\tmax-height: 100%;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\\n\\tfont-size: inherit;\\n\\twidth: 2em;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tfont-size: inherit;\\n\\tmargin: 5px 0 !important;\\n\\tpadding: 0;\\n\\tborder-radius: 0;\\n}\\n\\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tmargin-left: 0;\\n\\tmargin-right: 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\tfont-size: 60%;\\n\\tpadding: 0 1.8em;\\n}\\n\\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\theight: 100%;\\n\\tmask-size: 10px 10px;\\n\\t-webkit-mask-size: 10px 10px;\\n}\\n\\n.monaco-menu .action-item {\\n\\tcursor: default;\\n}\");\n  if (isForShadowDom) {\n    // Only define scrollbar styles when used inside shadow dom,\n    // otherwise leave their styling to the global workbench styling.\n    result += \"\\n\\t\\t\\t/* Arrows */\\n\\t\\t\\t.monaco-scrollable-element > .scrollbar > .scra {\\n\\t\\t\\t\\tcursor: pointer;\\n\\t\\t\\t\\tfont-size: 11px !important;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.monaco-scrollable-element > .visible {\\n\\t\\t\\t\\topacity: 1;\\n\\n\\t\\t\\t\\t/* Background rule added for IE9 - to allow clicks on dom node */\\n\\t\\t\\t\\tbackground:rgba(0,0,0,0);\\n\\n\\t\\t\\t\\ttransition: opacity 100ms linear;\\n\\t\\t\\t}\\n\\t\\t\\t.monaco-scrollable-element > .invisible {\\n\\t\\t\\t\\topacity: 0;\\n\\t\\t\\t\\tpointer-events: none;\\n\\t\\t\\t}\\n\\t\\t\\t.monaco-scrollable-element > .invisible.fade {\\n\\t\\t\\t\\ttransition: opacity 800ms linear;\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* Scrollable Content Inset Shadow */\\n\\t\\t\\t.monaco-scrollable-element > .shadow {\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tdisplay: none;\\n\\t\\t\\t}\\n\\t\\t\\t.monaco-scrollable-element > .shadow.top {\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\ttop: 0;\\n\\t\\t\\t\\tleft: 3px;\\n\\t\\t\\t\\theight: 3px;\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t}\\n\\t\\t\\t.monaco-scrollable-element > .shadow.left {\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\ttop: 3px;\\n\\t\\t\\t\\tleft: 0;\\n\\t\\t\\t\\theight: 100%;\\n\\t\\t\\t\\twidth: 3px;\\n\\t\\t\\t}\\n\\t\\t\\t.monaco-scrollable-element > .shadow.top-left-corner {\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\ttop: 0;\\n\\t\\t\\t\\tleft: 0;\\n\\t\\t\\t\\theight: 3px;\\n\\t\\t\\t\\twidth: 3px;\\n\\t\\t\\t}\\n\\t\\t\";\n    // Scrollbars\n    const scrollbarShadowColor = style.scrollbarShadow;\n    if (scrollbarShadowColor) {\n      result += \"\\n\\t\\t\\t\\t.monaco-scrollable-element > .shadow.top {\\n\\t\\t\\t\\t\\tbox-shadow: \".concat(scrollbarShadowColor, \" 0 6px 6px -6px inset;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t.monaco-scrollable-element > .shadow.left {\\n\\t\\t\\t\\t\\tbox-shadow: \").concat(scrollbarShadowColor, \" 6px 0 6px -6px inset;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t.monaco-scrollable-element > .shadow.top.left {\\n\\t\\t\\t\\t\\tbox-shadow: \").concat(scrollbarShadowColor, \" 6px 6px 6px -6px inset;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\");\n    }\n    const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n    if (scrollbarSliderBackgroundColor) {\n      result += \"\\n\\t\\t\\t\\t.monaco-scrollable-element > .scrollbar > .slider {\\n\\t\\t\\t\\t\\tbackground: \".concat(scrollbarSliderBackgroundColor, \";\\n\\t\\t\\t\\t}\\n\\t\\t\\t\");\n    }\n    const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n    if (scrollbarSliderHoverBackgroundColor) {\n      result += \"\\n\\t\\t\\t\\t.monaco-scrollable-element > .scrollbar > .slider:hover {\\n\\t\\t\\t\\t\\tbackground: \".concat(scrollbarSliderHoverBackgroundColor, \";\\n\\t\\t\\t\\t}\\n\\t\\t\\t\");\n    }\n    const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n    if (scrollbarSliderActiveBackgroundColor) {\n      result += \"\\n\\t\\t\\t\\t.monaco-scrollable-element > .scrollbar > .slider.active {\\n\\t\\t\\t\\t\\tbackground: \".concat(scrollbarSliderActiveBackgroundColor, \";\\n\\t\\t\\t\\t}\\n\\t\\t\\t\");\n    }\n  }\n  return result;\n}","map":{"version":3,"names":["isFirefox","EventType","TouchEventType","Gesture","$","addDisposableListener","append","clearNode","createStyleSheet","Dimension","EventHelper","getActiveElement","getWindow","isAncestor","isInShadowDOM","StandardKeyboardEvent","StandardMouseEvent","ActionBar","ActionViewItem","BaseActionViewItem","layout","DomScrollableElement","EmptySubmenuAction","Separator","SubmenuAction","RunOnceScheduler","Codicon","getCodiconFontCharacters","ThemeIcon","stripIcons","DisposableStore","isLinux","isMacintosh","strings","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","HorizontalDirection","VerticalDirection","Menu","constructor","container","actions","options","menuStyles","classList","add","setAttribute","menuElement","document","createElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaLabel","ariaRole","focusOnlyEnabledItems","triggerKeys","keys","keyDown","actionsList","tabIndex","initializeOrUpdateStyleSheet","_register","addTarget","KEY_DOWN","e","event","equals","preventDefault","enableMnemonics","key","toLocaleLowerCase","mnemonics","has","stop","get","length","SubmenuMenuActionViewItem","focusItemByElement","onClick","shift","push","set","focusedItem","viewItems","focusNext","focusPrevious","domNode","MOUSE_OUT","relatedTarget","undefined","updateFocus","stopPropagation","MOUSE_OVER","target","parentElement","contains","lastFocusedItem","setFocusedItem","Tap","initialTarget","parent","Map","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","verticalScrollbarSize","handleMouseWheel","useShadows","scrollElement","getDomNode","style","position","styleScrollElement","Change","scrollTop","getScrollPosition","setScrollPosition","translationY","MOUSE_UP","window","maxHeight","concat","Math","max","innerHeight","getBoundingClientRect","top","filter","a","idx","_options$submenuIds","submenuIds","id","console","warn","prevAction","icon","label","isMenu","appendChild","scanDomNode","item","MenuSeparatorActionViewItem","forEach","index","array","updatePositionInSet","styleSheet","globalStyleSheet","textContent","getMenuWidgetCSS","_style$foregroundColo","_style$backgroundColo","fgColor","foregroundColor","bgColor","backgroundColor","border","borderColor","borderRadius","shadow","shadowColor","outline","color","boxShadow","getContainer","onScroll","element","i","children","elem","fromRight","round","menuActionViewItem","Set","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybinding","keybindingLabel","getLabel","BaseMenuActionViewItem","ctx","menuStyle","cssClass","matches","exec","runOnceToEnableMouseUp","mouseEvent","rightButton","setTimeout","CONTEXT_MENU","render","_action","ID","check","asCSSSelector","menuSelection","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","blur","focus","_this$item","pos","setSize","cleanLabel","cleanMnemonic","replace","_this$item2","escape","lastIndex","escMatch","replaceDoubleEscapes","str","ltrim","substr","rtrim","innerText","trim","remove","split","class","enabled","removeAttribute","checked","toggle","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","Below","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","submenu","updateAriaExpanded","submenuIndicator","menuSubmenu","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","dispose","submenuContainer","clear","calculateSubmenuMenuLayout","windowDimensions","entry","ret","left","width","offset","size","height","selectFirstItem","arguments","computedStyles","getComputedStyle","paddingTop","parseFloat","zIndex","entryBox","entryBoxUpdated","viewBox","innerWidth","lift","onDidCancel","value","_this$item3","borderBottomColor","separatorColor","regex","mnemonicInText","formatRule","c","fontCharacter","toString","isForShadowDom","result","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { getCodiconFontCharacters } from '../../../common/codiconsUtil.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n    HorizontalDirection[HorizontalDirection[\"Right\"] = 0] = \"Right\";\n    HorizontalDirection[HorizontalDirection[\"Left\"] = 1] = \"Left\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n    VerticalDirection[VerticalDirection[\"Above\"] = 0] = \"Above\";\n    VerticalDirection[VerticalDirection[\"Below\"] = 1] = \"Below\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        }));\n        if (options.enableMnemonics) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        const window = getWindow(container);\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter((a, idx) => {\n            if (options.submenuIds?.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            // Filter out consecutive or useless separators\n            if (a instanceof Separator) {\n                if (idx === actions.length - 1 || idx === 0) {\n                    return false;\n                }\n                const prevAction = actions[idx - 1];\n                if (prevAction instanceof Separator) {\n                    return false;\n                }\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        const fgColor = style.foregroundColor ?? '';\n        const bgColor = style.backgroundColor ?? '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, { ...options, submenuIds: new Set([...(options.submenuIds || []), action.id]) }, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        super.focus();\n        this.item?.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    this.item?.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor ?? '';\n            this.item.style.backgroundColor = bgColor ?? '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor ?? '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : { horizontal: HorizontalDirection.Right, vertical: VerticalDirection.Below };\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection.horizontal === HorizontalDirection.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const window = getWindow(this.element);\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        if (this.item) {\n            this.item?.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor ?? '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}