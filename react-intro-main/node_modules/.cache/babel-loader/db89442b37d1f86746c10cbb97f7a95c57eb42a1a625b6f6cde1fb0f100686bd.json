{"ast":null,"code":"var _jsxFileName = \"D:\\\\ospanel\\\\domains\\\\react\\\\react-intro\\\\src\\\\components\\\\GraphComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { domUtils, styleUtils, mathUtils, cloneUtils, eventUtils, Graph, InternalEvent, RubberBandHandler, ConnectionHandler, ConnectionConstraint, Point, CylinderShape, CellRenderer, DomHelpers, EdgeStyle, Rectangle, EdgeHandler, StyleRegistry, EdgeSegmentHandler, UndoManager, CellEditorHandler, ConstraintHandler, Guide, ImageBox, GraphView, SelectionHandler, PanningHandler, TooltipHandler, SelectionCellsHandler, PopupMenuHandler } from '@maxgraph/core';\nimport { contextMenuTypes, contextMenuValues, globalTypes, globalValues, rubberBandTypes, rubberBandValues } from './shared/args.js';\nimport { createGraphContainer } from './shared/configure.js';\n// style required by RubberBand\nimport '@maxgraph/core/css/common.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction YourComponent() {\n  _s();\n  const graphContainerRef = useRef(null);\n  useEffect(() => {\n    const graphContainer = graphContainerRef.current;\n    const parentContainer = document.createElement('div');\n    const container = createGraphContainer({\n      width: 800,\n      // Пример значения ширины в пикселях\n      height: 600,\n      imageUrl: 'images/grid.gif'\n    });\n    parentContainer.appendChild(container);\n\n    // Changes some default colors\n    // TODO Find a way of modifying globally or setting locally! See https://github.com/maxGraph/maxGraph/issues/192\n    //constants.SHADOWCOLOR = '#C0C0C0';\n\n    let joinNodeSize = 7;\n    let strokeWidth = 2;\n    class MyCustomGraph extends Graph {\n      constructor(...args) {\n        super(...args);\n        this.resetEdgesOnConnect = false;\n      }\n      createEdgeSegmentHandler(state) {\n        return new MyCustomEdgeSegmentHandler(state);\n      }\n      createGraphView() {\n        return new MyCustomGraphView(this);\n      }\n      createEdgeHandler(state) {\n        return new MyCustomEdgeHandler(state);\n      }\n      createHandler(state) {\n        let result = null;\n        if (state != null) {\n          if (state.cell.isEdge()) {\n            let style = this.view.getEdgeStyle(state);\n            if (style == EdgeStyle.WireConnector) {\n              return new EdgeSegmentHandler(state);\n            }\n          }\n        }\n        return super.createHandler.apply(this, arguments);\n      }\n\n      // Adds oval markers for edge-to-edge connections.\n      getCellStyle(cell) {\n        let style = super.getCellStyle.apply(this, arguments);\n        if (style != null && cell !== null && cell !== void 0 && cell.isEdge()) {\n          var _cell$getTerminal, _cell$getTerminal2;\n          style = cloneUtils.clone(style);\n          if ((_cell$getTerminal = cell.getTerminal(true)) !== null && _cell$getTerminal !== void 0 && _cell$getTerminal.isEdge()) {\n            style.startArrow = 'oval';\n          }\n          if ((_cell$getTerminal2 = cell.getTerminal(false)) !== null && _cell$getTerminal2 !== void 0 && _cell$getTerminal2.isEdge()) {\n            style.endArrow = 'oval';\n          }\n        }\n        return style;\n      }\n      getTooltipForCell(cell) {\n        let tip = '';\n        if (cell != null) {\n          let src = cell.getTerminal(true);\n          if (src != null) {\n            tip += this.getTooltipForCell(src) + ' ';\n          }\n          let parent = cell.getParent();\n          if (parent.isVertex()) {\n            tip += this.getTooltipForCell(parent) + '.';\n          }\n          tip += super.getTooltipForCell.apply(this, arguments);\n          let trg = cell.getTerminal(false);\n          if (trg != null) {\n            tip += ' ' + this.getTooltipForCell(trg);\n          }\n        }\n        return tip;\n      }\n\n      // Alternative solution for implementing connection points without child cells.\n      // This can be extended as shown in portrefs.html example to allow for per-port\n      // incoming/outgoing direction.\n      getAllConnectionConstraints(terminal) {\n        let geo = terminal != null ? terminal.cell.getGeometry() : null;\n        if ((geo != null ? !geo.relative : false) && terminal.cell.isVertex() && terminal.cell.getChildCount() === 0) {\n          return [new ConnectionConstraint(new Point(0, 0.5), false), new ConnectionConstraint(new Point(1, 0.5), false)];\n        }\n        return null;\n      }\n    }\n\n    // FIXME: Provide means to make EdgeHandler and ConnectionHandler instantiate this subclass!\n    class MyCustomConstraintHandler extends ConstraintHandler {\n      constructor(...args) {\n        super(...args);\n        // Replaces the port image\n        this.pointImage = new ImageBox('images/dot.gif', 10, 10);\n      }\n    }\n    class MyCustomGuide extends Guide {\n      // Alt disables guides\n      isEnabledForEvent(evt) {\n        return !eventUtils.isAltDown(evt);\n      }\n    }\n    class MyCustomEdgeHandler extends EdgeHandler {\n      constructor(...args) {\n        super(...args);\n        // Enables snapping waypoints to terminals\n        this.snapToTerminals = true;\n      }\n      isConnectableCell(cell) {\n        return graph.getPlugin('ConnectionHandler').isConnectableCell(cell);\n      }\n      connect(edge, terminal, isSource, isClone, me) {\n        let result = null;\n        let model = this.graph.getDataModel();\n        let parent = model.getParent(edge);\n        model.beginUpdate();\n        try {\n          result = super.connect.apply(this, arguments);\n          let geo = model.getGeometry(result);\n          if (geo != null) {\n            geo = geo.clone();\n            let pt = null;\n            if (terminal && terminal.isEdge) {\n              if (terminal.isEdge()) {\n                pt = this.abspoints[this.isSource ? 0 : this.abspoints.length - 1];\n                pt.x = pt.x / this.graph.view.scale - this.graph.view.translate.x;\n                pt.y = pt.y / this.graph.view.scale - this.graph.view.translate.y;\n                let pstate = this.graph.getView().getState(edge.getParent());\n                if (pstate != null) {\n                  pt.x -= pstate.origin.x;\n                  pt.y -= pstate.origin.y;\n                }\n                pt.x -= this.graph.panDx / this.graph.view.scale;\n                pt.y -= this.graph.panDy / this.graph.view.scale;\n              }\n            }\n            geo.setTerminalPoint(pt, isSource);\n            model.setGeometry(edge, geo);\n          }\n          // В ФИЛЬМЕ: СПИЗДИЛИ\n          if (event.target.textContent == 'not x') {\n            //прямоугольник\n            var v1 = graph.insertVertex(parent, null, '', 80, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n\n            //выходы прямоугольника\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v11.geometry.relative = true;\n            v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n            v15.geometry.offset = new mxPoint(5, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v16.geometry.x = 1;\n            v16.geometry.offset = new mxPoint(49, 34);\n            v1.insert(v16);\n          }\n          if (event.target.textContent == 'x * y') {\n            //прямоугольник\n            var v1 = graph.insertVertex(parent, null, '', 180, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n\n            //выходы прямоугольника\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v11.geometry.relative = true;\n            v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n            v15.geometry.offset = new mxPoint(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '&', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v16.geometry.x = 1;\n            v16.geometry.offset = new mxPoint(28.5, 37);\n            v1.insert(v16);\n          }\n          if (event.target.textContent == 'x + y') {\n            //прямоугольник\n            var v1 = graph.insertVertex(parent, null, '', 250, 40, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n\n            //выходы прямоугольника\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v11.geometry.relative = true;\n            v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n            v15.geometry.offset = new mxPoint(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '|', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v16.geometry.x = 1;\n            v16.geometry.offset = new mxPoint(24, 37);\n            v1.insert(v16);\n          }\n          if (event.target.textContent == 'x == y') {\n            //прямоугольник\n            var v1 = graph.insertVertex(parent, null, '', 180, 140, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n\n            //выходы прямоугольника\n            var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v11.geometry.relative = true;\n            v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = 'Y';\n            v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n            v15.geometry.offset = new mxPoint(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '==', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=15;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v16.geometry.x = 1;\n            v16.geometry.offset = new mxPoint(30, 38);\n            v1.insert(v16);\n          }\n          if (event.target.textContent == 'x => y') {\n            //прямоугольник\n            var v1 = graph.insertVertex(parent, null, '', 80, 140, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n            v1.setConnectable(false);\n\n            //выходы прямоугольника\n            var v11 = graph.insertVertex(v1, null, '', 0, 0, 14, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v11.geometry.relative = true;\n            v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n            var v12 = v11.clone();\n            v12.value = '';\n            v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n            v1.insert(v12);\n            var v15 = v11.clone();\n            v15.value = '';\n            v15.geometry.x = 1;\n            v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n            v15.geometry.offset = new mxPoint(0, 32);\n            v1.insert(v15);\n            var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=25;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v16.geometry.x = 1;\n            v16.geometry.offset = new mxPoint(8, 15);\n            v1.insert(v16);\n            var v17 = graph.insertVertex(v1, null, 'X', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v17.geometry.x = 1;\n            v17.geometry.offset = new mxPoint(14, 20);\n            v1.insert(v17);\n            var v18 = graph.insertVertex(v1, null, 'Y', 0, 0, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n            v18.geometry.x = 1;\n            v18.geometry.offset = new mxPoint(14, 59);\n            v1.insert(v18);\n          }\n\n          // Uses implementation of connection points via constraints (see above)\n          //v2.setConnectable(false);\n\n          /*var v21 = graph.insertVertex(v2, null, 'A', 0, 0.5, 10, 1,\r\n            'shape=none;spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n            'fontColor=#4c4c4c;strokeColor=#909090;');\r\n          v21.geometry.relative = true;\r\n          v21.geometry.offset = new mxPoint(0, -1);\r\n                var v22 = graph.insertVertex(v2, null, 'B', 1, 0.5, 10, 1,\r\n            'spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n            'fontColor=#4c4c4c;strokeColor=#909090;');\r\n          v22.geometry.relative = true;\r\n          v22.geometry.offset = new mxPoint(-10, -1);*/\n\n          // Connection constraints implemented in edges, alternatively this\n          // can be implemented using references, see: portrefs.html\n\n          // \t\t\t\tvar e1 = graph.insertEdge(parent, null, 'e1', v1.getChildAt(7), v2.getChildAt(0));\n          // \t\t\t\te1.geometry.points = [new mxPoint(180, 140)];\n\n          // \t\t\t\tvar e2 = graph.insertEdge(parent, null, '', v1.getChildAt(4), v2.getChildAt(1));\n          // \t\t\t\te2.geometry.points = [new mxPoint(320, 80)];\n\n          // \t\t\t\tvar e3 = graph.insertEdge(parent, null, 'crossover', e1, e2);\n          // \t\t\t\te3.geometry.setTerminalPoint(new mxPoint(180, 160), true);\n          // \t\t\t\te3.geometry.setTerminalPoint(new mxPoint(320, 160), false);\n        } finally {\n          model.endUpdate();\n        }\n        return result;\n      }\n      createMarker() {\n        let marker = super.createMarker.apply(this, arguments);\n        // Adds in-place highlighting when reconnecting existing edges\n        marker.highlight.highlight = this.graph.getPlugin('ConnectionHandler').marker.highlight.highlight;\n        return marker;\n      }\n    }\n\n    // Switch for black background and bright styles\n    let invert = false;\n    let MyCustomCellEditorHandler;\n    if (invert) {\n      container.style.backgroundColor = 'black';\n\n      // White in-place editor text color\n      MyCustomCellEditorHandler = class extends CellEditorHandler {\n        startEditing(cell, trigger) {\n          super.startEditing.apply(this, arguments);\n          if (this.textarea != null) {\n            this.textarea.style.color = '#FFFFFF';\n          }\n        }\n      };\n    } else {\n      MyCustomCellEditorHandler = CellEditorHandler;\n    }\n    class MyCustomSelectionHandler extends SelectionHandler {\n      constructor(...args) {\n        super(...args);\n        this.previewColor = invert ? 'white' : 'black';\n        // Enables guides\n        this.guidesEnabled = true;\n      }\n      createGuide() {\n        return new MyCustomGuide(this.graph, this.getGuideStates());\n      }\n    }\n    class MyCustomPanningHandler extends PanningHandler {\n      // Panning handler consumed right click so this must be\n      // disabled if right click should stop connection handler.\n      isPopupTrigger() {\n        return false;\n      }\n    }\n    class MyCustomConnectionHandler extends ConnectionHandler {\n      constructor(...args) {\n        super(...args);\n        // If connect preview is not moved away then getCellAt is used to detect the cell under\n        // the mouse if the mouse is over the preview shape in IE (no event transparency), ie.\n        // the built-in hit-detection of the HTML document will not be used in this case.\n        this.movePreviewAway = false;\n        this.waypointsEnabled = true;\n      }\n      // Starts connections on the background in wire-mode\n      isStartEvent(me) {\n        return checkbox.checked || super.isStartEvent.apply(this, arguments);\n      }\n\n      // Avoids any connections for gestures within tolerance except when in wire-mode\n      // or when over a port\n      mouseUp(sender, me) {\n        if (this.first != null && this.previous != null) {\n          let point = styleUtils.convertPoint(this.graph.container, me.getX(), me.getY());\n          let dx = Math.abs(point.x - this.first.x);\n          let dy = Math.abs(point.y - this.first.y);\n          if (dx < this.graph.tolerance && dy < this.graph.tolerance) {\n            // Selects edges in non-wire mode for single clicks, but starts\n            // connecting for non-edges regardless of wire-mode\n            if (!checkbox.checked && this.previous.cell.isEdge()) {\n              this.reset();\n            }\n            return;\n          }\n        }\n        super.mouseUp.apply(this, arguments);\n      }\n\n      // Overrides methods to preview and create new edges.\n\n      // Sets source terminal point for edge-to-edge connections.\n      createEdgeState(me) {\n        let edge = this.graph.createEdge();\n        if (this.sourceConstraint != null && this.previous != null) {\n          edge.style = 'exitX' + '=' + this.sourceConstraint.point.x + ';' + 'exitY' + '=' + this.sourceConstraint.point.y + ';';\n        } else if (me.getCell().isEdge()) {\n          let scale = this.graph.view.scale;\n          let tr = this.graph.view.translate;\n          let pt = new Point(this.graph.snap(me.getGraphX() / scale) - tr.x, this.graph.snap(me.getGraphY() / scale) - tr.y);\n          edge.geometry.setTerminalPoint(pt, true);\n        }\n        return this.graph.view.createState(edge);\n      }\n\n      // Uses right mouse button to create edges on background (see also: lines 67 ff)\n      isStopEvent(me) {\n        return me.getState() != null || eventUtils.isRightMouseButton(me.getEvent());\n      }\n\n      // Updates target terminal point for edge-to-edge connections.\n      updateCurrentState(me, point) {\n        super.updateCurrentState.apply(this, arguments);\n        if (this.edgeState != null) {\n          this.edgeState.cell.geometry.setTerminalPoint(null, false);\n          if (this.shape != null && this.currentState != null && this.currentState.cell.isEdge()) {\n            let scale = this.graph.view.scale;\n            let tr = this.graph.view.translate;\n            let pt = new Point(this.graph.snap(me.getGraphX() / scale) - tr.x, this.graph.snap(me.getGraphY() / scale) - tr.y);\n            this.edgeState.cell.geometry.setTerminalPoint(pt, false);\n          }\n        }\n      }\n\n      // Adds in-place highlighting for complete cell area (no hotspot).\n      createMarker() {\n        let marker = super.createMarker.apply(this, arguments);\n\n        // Uses complete area of cell for new connections (no hotspot)\n        marker.intersects = function (state, evt) {\n          return true;\n        };\n\n        // Adds in-place highlighting\n        //const mxCellHighlightHighlight = mxCellHighlight.prototype.highlight;\n        marker.highlight.highlight = function (state) {\n          // TODO: Should this be a subclass of marker rather than assigning directly?\n          if (this.state != state) {\n            if (this.state != null) {\n              this.state.style = this.lastStyle;\n\n              // Workaround for shape using current stroke width if no strokewidth defined\n              this.state.style.strokeWidth = this.state.style.strokeWidth || '1';\n              this.state.style.strokeColor = this.state.style.strokeColor || 'none';\n              if (this.state.shape != null) {\n                this.state.view.graph.cellRenderer.configureShape(this.state);\n                this.state.shape.redraw();\n              }\n            }\n            if (state != null) {\n              this.lastStyle = state.style;\n              state.style = cloneUtils.clone(state.style);\n              state.style.strokeColor = '#00ff00';\n              state.style.strokeWidth = '3';\n              if (state.shape != null) {\n                state.view.graph.cellRenderer.configureShape(state);\n                state.shape.redraw();\n              }\n            }\n            this.state = state;\n          }\n        };\n        return marker;\n      }\n\n      // Makes sure non-relative cells can only be connected via constraints\n      isConnectableCell(cell) {\n        if (cell.isEdge()) {\n          return true;\n        } else {\n          let geo = cell != null ? cell.getGeometry() : null;\n          return geo != null ? geo.relative : false;\n        }\n      }\n    }\n\n    // Updates connection points before the routing is called.\n\n    class MyCustomGraphView extends GraphView {\n      // Computes the position of edge to edge connection points.\n      updateFixedTerminalPoint(edge, terminal, source, constraint) {\n        let pt = null;\n        if (constraint != null) {\n          pt = this.graph.getConnectionPoint(terminal, constraint);\n        }\n        if (source) {\n          edge.sourceSegment = null;\n        } else {\n          edge.targetSegment = null;\n        }\n        if (pt == null) {\n          let s = this.scale;\n          let tr = this.translate;\n          let orig = edge.origin;\n          let geo = edge.cell.getGeometry();\n          pt = geo.getTerminalPoint(source);\n\n          // Computes edge-to-edge connection point\n          if (pt != null) {\n            pt = new Point(s * (tr.x + pt.x + orig.x), s * (tr.y + pt.y + orig.y));\n\n            // Finds nearest segment on edge and computes intersection\n            if (terminal != null && terminal.absolutePoints != null) {\n              let seg = mathUtils.findNearestSegment(terminal, pt.x, pt.y);\n\n              // Finds orientation of the segment\n              let p0 = terminal.absolutePoints[seg];\n              let pe = terminal.absolutePoints[seg + 1];\n              let horizontal = p0.x - pe.x === 0;\n\n              // Stores the segment in the edge state\n              let key = source ? 'sourceConstraint' : 'targetConstraint';\n              let value = horizontal ? 'horizontal' : 'vertical';\n              edge.style[key] = value;\n\n              // Keeps the coordinate within the segment bounds\n              if (horizontal) {\n                pt.x = p0.x;\n                pt.y = Math.min(pt.y, Math.max(p0.y, pe.y));\n                pt.y = Math.max(pt.y, Math.min(p0.y, pe.y));\n              } else {\n                pt.y = p0.y;\n                pt.x = Math.min(pt.x, Math.max(p0.x, pe.x));\n                pt.x = Math.max(pt.x, Math.min(p0.x, pe.x));\n              }\n            }\n          }\n          // Computes constraint connection points on vertices and ports\n          else if (terminal != null && terminal.cell.geometry.relative) {\n            pt = new Point(this.getRoutingCenterX(terminal), this.getRoutingCenterY(terminal));\n          }\n\n          // Snaps point to grid\n          /*if (pt != null)\r\n          {\r\n            let tr = this.graph.view.translate;\r\n            let s = this.graph.view.scale;\r\n              pt.x = (this.graph.snap(pt.x / s - tr.x) + tr.x) * s;\r\n            pt.y = (this.graph.snap(pt.y / s - tr.y) + tr.y) * s;\r\n          }*/\n        }\n        edge.setAbsoluteTerminalPoint(pt, source);\n      }\n    }\n\n    // Updates the terminal and control points in the cloned preview.\n    class MyCustomEdgeSegmentHandler extends EdgeSegmentHandler {\n      clonePreviewState(point, terminal) {\n        let clone = super.clonePreviewState.apply(this, arguments);\n        clone.cell = clone.cell.clone();\n        if (this.isSource || this.isTarget) {\n          clone.cell.geometry = clone.cell.geometry.clone();\n\n          // Sets the terminal point of an edge if we're moving one of the endpoints\n          if (clone.cell.isEdge()) {\n            // TODO: Only set this if the target or source terminal is an edge\n            clone.cell.geometry.setTerminalPoint(point, this.isSource);\n          } else {\n            clone.cell.geometry.setTerminalPoint(null, this.isSource);\n          }\n        }\n        return clone;\n      }\n    }\n\n    // Imlements a custom resistor shape. Direction currently ignored here.\n\n    class ResistorShape extends CylinderShape {\n      constructor() {\n        // TODO: The original didn't seem to call the super\n        super(null, null, null, null);\n      }\n      redrawPath(path, x, y, w, h, isForeground) {\n        let dx = w / 16;\n        if (isForeground) {\n          path.moveTo(0, h / 2);\n          path.lineTo(2 * dx, h / 2);\n          path.lineTo(3 * dx, 0);\n          path.lineTo(5 * dx, h);\n          path.lineTo(7 * dx, 0);\n          path.lineTo(9 * dx, h);\n          path.lineTo(11 * dx, 0);\n          path.lineTo(13 * dx, h);\n          path.lineTo(14 * dx, h / 2);\n          path.lineTo(16 * dx, h / 2);\n          path.end();\n        }\n      }\n    }\n    CellRenderer.registerShape('resistor', ResistorShape);\n\n    // Imlements a custom resistor shape. Direction currently ignored here.\n\n    EdgeStyle.WireConnector = function (state, source, target, hints, result) {\n      // Creates array of all way- and terminalpoints\n      let pts = state.absolutePoints;\n      let horizontal = true;\n      let hint = null;\n\n      // Gets the initial connection from the source terminal or edge\n      if (source != null && source.cell.isEdge()) {\n        horizontal = state.style.sourceConstraint == 'horizontal';\n      } else if (source != null) {\n        horizontal = source.style.portConstraint != 'vertical';\n\n        // Checks the direction of the shape and rotates\n        let direction = source.style.direction;\n        if (direction == 'north' || direction == 'south') {\n          horizontal = !horizontal;\n        }\n      }\n\n      // Adds the first point\n      // TODO: Should move along connected segment\n      let pt = pts[0];\n      if (pt == null && source != null) {\n        pt = new Point(state.view.getRoutingCenterX(source), state.view.getRoutingCenterY(source));\n      } else if (pt != null) {\n        pt = pt.clone();\n      }\n      let first = pt;\n\n      // Adds the waypoints\n      if (hints != null && hints.length > 0) {\n        // FIXME: First segment not movable\n        /*hint = state.view.transformControlPoint(state, hints[0]);\r\n        MaxLog.show();\r\n        MaxLog.debug(hints.length,'hints0.y='+hint.y, pt.y)\r\n          if (horizontal && Math.floor(hint.y) != Math.floor(pt.y))\r\n        {\r\n          MaxLog.show();\r\n          MaxLog.debug('add waypoint');\r\n            pt = new Point(pt.x, hint.y);\r\n          result.push(pt);\r\n          pt = pt.clone();\r\n          //horizontal = !horizontal;\r\n        }*/\n\n        for (let i = 0; i < hints.length; i++) {\n          horizontal = !horizontal;\n          hint = state.view.transformControlPoint(state, hints[i]);\n          if (horizontal) {\n            if (pt.y !== hint.y) {\n              pt.y = hint.y;\n              result.push(pt.clone());\n            }\n          } else if (pt.x !== hint.x) {\n            pt.x = hint.x;\n            result.push(pt.clone());\n          }\n        }\n      } else {\n        hint = pt;\n      }\n\n      // Adds the last point\n      pt = pts[pts.length - 1];\n\n      // TODO: Should move along connected segment\n      if (pt == null && target != null) {\n        pt = new Point(state.view.getRoutingCenterX(target), state.view.getRoutingCenterY(target));\n      }\n      if (horizontal) {\n        if (pt.y !== hint.y && first.x !== pt.x) {\n          result.push(new Point(pt.x, hint.y));\n        }\n      } else if (pt.x !== hint.x && first.y !== pt.y) {\n        result.push(new Point(hint.x, pt.y));\n      }\n    };\n    StyleRegistry.putValue('wireEdgeStyle', EdgeStyle.WireConnector);\n    let graph = new MyCustomGraph(container, null, [MyCustomCellEditorHandler, TooltipHandler, SelectionCellsHandler, PopupMenuHandler, MyCustomConnectionHandler, MyCustomSelectionHandler, MyCustomPanningHandler]);\n    let labelBackground = invert ? '#000000' : '#FFFFFF';\n    let fontColor = invert ? '#FFFFFF' : '#000000';\n    let strokeColor = invert ? '#C0C0C0' : '#000000';\n    let fillColor = invert ? 'none' : '#FFFFFF';\n    graph.view.scale = 1;\n    graph.setPanning(true);\n    graph.setConnectable(true);\n    graph.setConnectableEdges(true);\n    graph.setDisconnectOnMove(false);\n    graph.foldingEnabled = false;\n\n    //Maximum size\n    graph.maximumGraphBounds = new Rectangle(0, 0, 800, 600);\n    graph.border = 50;\n\n    // Enables return key to stop editing (use shift-enter for newlines)\n    graph.setEnterStopsCellEditing(true);\n\n    // Adds rubberband selection\n    new RubberBandHandler(graph);\n\n    // Adds a special tooltip for edges\n    graph.setTooltips(true);\n    let style = graph.getStylesheet().getDefaultEdgeStyle();\n    delete style.endArrow;\n    style.strokeColor = strokeColor;\n    style.labelBackgroundColor = labelBackground;\n    style.edgeStyle = 'wireEdgeStyle';\n    style.fontColor = fontColor;\n    style.fontSize = '9';\n    style.movable = '0';\n    style.strokeWidth = strokeWidth;\n    //style.rounded = '1';\n\n    // Sets join node size\n    style.startSize = joinNodeSize;\n    style.endSize = joinNodeSize;\n    style = graph.getStylesheet().getDefaultVertexStyle();\n    style.gradientDirection = 'south';\n    //style.gradientColor = '#909090';\n    style.strokeColor = strokeColor;\n    //style.fillColor = '#e0e0e0';\n    style.fillColor = 'none';\n    style.fontColor = fontColor;\n    style.fontStyle = '1';\n    style.fontSize = '12';\n    style.resizable = '0';\n    style.rounded = '1';\n    style.strokeWidth = strokeWidth;\n    let parent = graph.getDefaultParent();\n    graph.batchUpdate(() => {\n      //ФИЛЬМ СПИЗДИЛИ ЧАСТЬ ВТОРАЯ \n      //выходы прямоугольника\n      var v1 = graph.insertVertex(parent, null, '', 170, 110, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '○', 49, 34, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n\n      //выходы прямоугольника\n      var v1 = graph.insertVertex(parent, null, '', 170, 200, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '○', 49, 34, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n\n      //выходы прямоугольника\n      var v1 = graph.insertVertex(parent, null, '', 310, 70, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n\n      //выходы прямоугольника\n      var v1 = graph.insertVertex(parent, null, '', 310, 320, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n\n      //выходы прямоугольника\n      var v1 = graph.insertVertex(parent, null, '', 310, 220, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n      var v1 = graph.insertVertex(parent, null, '', 430, 140, 40, 80, 'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\n      v1.setConnectable(false);\n\n      //выходы прямоугольника\n      var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16, 'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' + 'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v11.geometry.relative = true;\n      v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\n      var v12 = v11.clone();\n      v12.value = 'Y';\n      v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\n      v1.insert(v12);\n      var v15 = v11.clone();\n      v15.value = '';\n      v15.geometry.x = 1;\n      v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' + 'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\n      v15.geometry.offset = new mxPoint(0, 32);\n      v1.insert(v15);\n      var v16 = graph.insertVertex(v1, null, '|', 49, 36, 0, 0, 'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' + 'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\n      v16.geometry.x = 1;\n      v16.geometry.offset = new mxPoint(49, 0);\n      v1.insert(v16);\n      // Uses implementation of connection points via constraints (see above)\n      //v2.setConnectable(false);\n\n      /*var v21 = graph.insertVertex(v2, null, 'A', 0, 0.5, 10, 1,\r\n        'shape=none;spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n        'fontColor=#4c4c4c;strokeColor=#909090;');\r\n      v21.geometry.relative = true;\r\n      v21.geometry.offset = new mxPoint(0, -1);\r\n                        var v22 = graph.insertVertex(v2, null, 'B', 1, 0.5, 10, 1,\r\n        'spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n        'fontColor=#4c4c4c;strokeColor=#909090;');\r\n      v22.geometry.relative = true;\r\n      v22.geometry.offset = new mxPoint(-10, -1);*/\n    });\n    parentContainer.appendChild(DomHelpers.button('Zoom In', () => graph.zoomIn()));\n    parentContainer.appendChild(DomHelpers.button('Zoom Out', () => graph.zoomOut()));\n\n    // Undo/redo\n    let undoManager = new UndoManager();\n    let listener = function (sender, evt) {\n      undoManager.undoableEditHappened(evt.getProperty('edit'));\n    };\n    graph.getDataModel().addListener(InternalEvent.UNDO, listener);\n    graph.getView().addListener(InternalEvent.UNDO, listener);\n    parentContainer.appendChild(DomHelpers.button('Undo', function () {\n      undoManager.undo();\n    }));\n    parentContainer.appendChild(DomHelpers.button('Redo', function () {\n      undoManager.redo();\n    }));\n\n    // Shows XML for debugging the actual model\n    parentContainer.appendChild(DomHelpers.button('Delete', function () {\n      graph.removeCells();\n    }));\n\n    // Wire-mode\n    let checkbox = document.createElement('input');\n    checkbox.setAttribute('type', 'checkbox');\n    parentContainer.appendChild(checkbox);\n    domUtils.write(parentContainer, 'Wire Mode');\n\n    // Grid\n    let checkbox2 = document.createElement('input');\n    checkbox2.setAttribute('type', 'checkbox');\n    checkbox2.setAttribute('checked', 'true');\n    parentContainer.appendChild(checkbox2);\n    domUtils.write(parentContainer, 'Grid');\n    InternalEvent.addListener(checkbox2, 'click', function (evt) {\n      if (checkbox2.checked) {\n        container.style.background = 'url(./images/grid.gif)';\n      } else {\n        container.style.background = '';\n      }\n      container.style.backgroundColor = invert ? 'black' : 'white';\n    });\n    InternalEvent.disableContextMenu(container);\n    graphContainer.appendChild(parentContainer);\n    return () => {\n      // Clean up if needed\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: graphContainerRef,\n    style: {\n      width: '100%',\n      height: '100%'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1198,\n    columnNumber: 10\n  }, this);\n}\n_s(YourComponent, \"T2LhyAvPiiq95tTQ9P6wK78bc+c=\");\n_c = YourComponent;\n;\nexport default YourComponent;\nvar _c;\n$RefreshReg$(_c, \"YourComponent\");","map":{"version":3,"names":["React","useEffect","useRef","domUtils","styleUtils","mathUtils","cloneUtils","eventUtils","Graph","InternalEvent","RubberBandHandler","ConnectionHandler","ConnectionConstraint","Point","CylinderShape","CellRenderer","DomHelpers","EdgeStyle","Rectangle","EdgeHandler","StyleRegistry","EdgeSegmentHandler","UndoManager","CellEditorHandler","ConstraintHandler","Guide","ImageBox","GraphView","SelectionHandler","PanningHandler","TooltipHandler","SelectionCellsHandler","PopupMenuHandler","contextMenuTypes","contextMenuValues","globalTypes","globalValues","rubberBandTypes","rubberBandValues","createGraphContainer","jsxDEV","_jsxDEV","YourComponent","_s","graphContainerRef","graphContainer","current","parentContainer","document","createElement","container","width","height","imageUrl","appendChild","joinNodeSize","strokeWidth","MyCustomGraph","constructor","args","resetEdgesOnConnect","createEdgeSegmentHandler","state","MyCustomEdgeSegmentHandler","createGraphView","MyCustomGraphView","createEdgeHandler","MyCustomEdgeHandler","createHandler","result","cell","isEdge","style","view","getEdgeStyle","WireConnector","apply","arguments","getCellStyle","_cell$getTerminal","_cell$getTerminal2","clone","getTerminal","startArrow","endArrow","getTooltipForCell","tip","src","parent","getParent","isVertex","trg","getAllConnectionConstraints","terminal","geo","getGeometry","relative","getChildCount","MyCustomConstraintHandler","pointImage","MyCustomGuide","isEnabledForEvent","evt","isAltDown","snapToTerminals","isConnectableCell","graph","getPlugin","connect","edge","isSource","isClone","me","model","getDataModel","beginUpdate","pt","abspoints","length","x","scale","translate","y","pstate","getView","getState","origin","panDx","panDy","setTerminalPoint","setGeometry","event","target","textContent","v1","insertVertex","fillColor","setConnectable","v11","fontColor","strokeColor","geometry","offset","mxPoint","v12","value","insert","v15","v16","v17","v18","endUpdate","createMarker","marker","highlight","invert","MyCustomCellEditorHandler","backgroundColor","startEditing","trigger","textarea","color","MyCustomSelectionHandler","previewColor","guidesEnabled","createGuide","getGuideStates","MyCustomPanningHandler","isPopupTrigger","MyCustomConnectionHandler","movePreviewAway","waypointsEnabled","isStartEvent","checkbox","checked","mouseUp","sender","first","previous","point","convertPoint","getX","getY","dx","Math","abs","dy","tolerance","reset","createEdgeState","createEdge","sourceConstraint","getCell","tr","snap","getGraphX","getGraphY","createState","isStopEvent","isRightMouseButton","getEvent","updateCurrentState","edgeState","shape","currentState","intersects","lastStyle","cellRenderer","configureShape","redraw","updateFixedTerminalPoint","source","constraint","getConnectionPoint","sourceSegment","targetSegment","s","orig","getTerminalPoint","absolutePoints","seg","findNearestSegment","p0","pe","horizontal","key","min","max","getRoutingCenterX","getRoutingCenterY","setAbsoluteTerminalPoint","clonePreviewState","isTarget","ResistorShape","redrawPath","path","w","h","isForeground","moveTo","lineTo","end","registerShape","hints","pts","hint","portConstraint","direction","i","transformControlPoint","push","putValue","labelBackground","setPanning","setConnectableEdges","setDisconnectOnMove","foldingEnabled","maximumGraphBounds","border","setEnterStopsCellEditing","setTooltips","getStylesheet","getDefaultEdgeStyle","labelBackgroundColor","edgeStyle","fontSize","movable","startSize","endSize","getDefaultVertexStyle","gradientDirection","fontStyle","resizable","rounded","getDefaultParent","batchUpdate","button","zoomIn","zoomOut","undoManager","listener","undoableEditHappened","getProperty","addListener","UNDO","undo","redo","removeCells","setAttribute","write","checkbox2","background","disableContextMenu","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/ospanel/domains/react/react-intro/src/components/GraphComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport {\r\n  domUtils,\r\n  styleUtils,\r\n  mathUtils,\r\n  cloneUtils,\r\n  eventUtils,\r\n  Graph,\r\n  InternalEvent,\r\n  RubberBandHandler,\r\n  ConnectionHandler,\r\n  ConnectionConstraint,\r\n  Point,\r\n  CylinderShape,\r\n  CellRenderer,\r\n  DomHelpers,\r\n  EdgeStyle,\r\n  Rectangle,\r\n  EdgeHandler,\r\n  StyleRegistry,\r\n  EdgeSegmentHandler,\r\n  UndoManager,\r\n  CellEditorHandler,\r\n  ConstraintHandler,\r\n  Guide,\r\n  ImageBox,\r\n  GraphView,\r\n  SelectionHandler,\r\n  PanningHandler,\r\n  TooltipHandler,\r\n  SelectionCellsHandler,\r\n  PopupMenuHandler,\r\n} from '@maxgraph/core';\r\n\r\nimport {\r\n  contextMenuTypes,\r\n  contextMenuValues,\r\n  globalTypes,\r\n  globalValues,\r\n  rubberBandTypes,\r\n  rubberBandValues,\r\n} from './shared/args.js';\r\nimport { createGraphContainer } from './shared/configure.js';\r\n// style required by RubberBand\r\nimport '@maxgraph/core/css/common.css';\r\n\r\n  function YourComponent() {\r\n  const graphContainerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const graphContainer = graphContainerRef.current;\r\n\r\n    const parentContainer = document.createElement('div');\r\n    const container = createGraphContainer({\r\n      width: 800, // Пример значения ширины в пикселях\r\n      height: 600,\r\n      imageUrl: 'images/grid.gif'\r\n    });\r\n    parentContainer.appendChild(container);\r\n\r\n      // Changes some default colors\r\n  // TODO Find a way of modifying globally or setting locally! See https://github.com/maxGraph/maxGraph/issues/192\r\n  //constants.SHADOWCOLOR = '#C0C0C0';\r\n\r\n  let joinNodeSize = 7;\r\n  let strokeWidth = 2;\r\n\r\n  class MyCustomGraph extends Graph {\r\n    resetEdgesOnConnect = false;\r\n\r\n    createEdgeSegmentHandler(state) {\r\n      return new MyCustomEdgeSegmentHandler(state);\r\n    }\r\n\r\n    createGraphView() {\r\n      return new MyCustomGraphView(this);\r\n    }\r\n\r\n    createEdgeHandler(state) {\r\n      return new MyCustomEdgeHandler(state);\r\n    }\r\n\r\n    createHandler(state) {\r\n      let result = null;\r\n\r\n      if (state != null) {\r\n        if (state.cell.isEdge()) {\r\n          let style = this.view.getEdgeStyle(state);\r\n\r\n          if (style == EdgeStyle.WireConnector) {\r\n            return new EdgeSegmentHandler(state);\r\n          }\r\n        }\r\n      }\r\n\r\n      return super.createHandler.apply(this, arguments);\r\n    }\r\n\r\n    // Adds oval markers for edge-to-edge connections.\r\n    getCellStyle(cell) {\r\n      let style = super.getCellStyle.apply(this, arguments);\r\n\r\n      if (style != null && cell?.isEdge()) {\r\n        style = cloneUtils.clone(style);\r\n\r\n        if (cell.getTerminal(true)?.isEdge()) {\r\n          style.startArrow = 'oval';\r\n        }\r\n\r\n        if (cell.getTerminal(false)?.isEdge()) {\r\n          style.endArrow = 'oval';\r\n        }\r\n      }\r\n      return style;\r\n    }\r\n\r\n    getTooltipForCell(cell) {\r\n      let tip = '';\r\n\r\n      if (cell != null) {\r\n        let src = cell.getTerminal(true);\r\n        if (src != null) {\r\n          tip += this.getTooltipForCell(src) + ' ';\r\n        }\r\n\r\n        let parent = cell.getParent();\r\n        if (parent.isVertex()) {\r\n          tip += this.getTooltipForCell(parent) + '.';\r\n        }\r\n\r\n        tip += super.getTooltipForCell.apply(this, arguments);\r\n\r\n        let trg = cell.getTerminal(false);\r\n        if (trg != null) {\r\n          tip += ' ' + this.getTooltipForCell(trg);\r\n        }\r\n      }\r\n      return tip;\r\n    }\r\n\r\n    // Alternative solution for implementing connection points without child cells.\r\n    // This can be extended as shown in portrefs.html example to allow for per-port\r\n    // incoming/outgoing direction.\r\n    getAllConnectionConstraints(terminal) {\r\n      let geo = terminal != null ? terminal.cell.getGeometry() : null;\r\n\r\n      if (\r\n        (geo != null ? !geo.relative : false) &&\r\n        terminal.cell.isVertex() &&\r\n        terminal.cell.getChildCount() === 0\r\n      ) {\r\n        return [\r\n          new ConnectionConstraint(new Point(0, 0.5), false),\r\n          new ConnectionConstraint(new Point(1, 0.5), false),\r\n        ];\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // FIXME: Provide means to make EdgeHandler and ConnectionHandler instantiate this subclass!\r\n  class MyCustomConstraintHandler extends ConstraintHandler {\r\n    // Replaces the port image\r\n    pointImage = new ImageBox('images/dot.gif', 10, 10);\r\n  }\r\n\r\n  class MyCustomGuide extends Guide {\r\n    // Alt disables guides\r\n    isEnabledForEvent(evt) {\r\n      return !eventUtils.isAltDown(evt);\r\n    }\r\n  }\r\n\r\n  class MyCustomEdgeHandler extends EdgeHandler {\r\n    // Enables snapping waypoints to terminals\r\n    snapToTerminals = true;\r\n\r\n    isConnectableCell(cell) {\r\n      return graph.getPlugin('ConnectionHandler').isConnectableCell(cell);\r\n    }\r\n\r\n    connect(edge, terminal, isSource, isClone, me) {\r\n      let result = null;\r\n      let model = this.graph.getDataModel();\r\n      let parent = model.getParent(edge);\r\n\r\n      model.beginUpdate();\r\n      try {\r\n        result = super.connect.apply(this, arguments);\r\n        let geo = model.getGeometry(result);\r\n\r\n        if (geo != null) {\r\n          geo = geo.clone();\r\n          let pt = null;\r\n          if (terminal && terminal.isEdge) {\r\n            if (terminal.isEdge()) {\r\n              pt = this.abspoints[this.isSource ? 0 : this.abspoints.length - 1];\r\n              pt.x = pt.x / this.graph.view.scale - this.graph.view.translate.x;\r\n              pt.y = pt.y / this.graph.view.scale - this.graph.view.translate.y;\r\n\r\n              let pstate = this.graph.getView().getState(edge.getParent());\r\n\r\n              if (pstate != null) {\r\n                pt.x -= pstate.origin.x;\r\n                pt.y -= pstate.origin.y;\r\n              }\r\n\r\n              pt.x -= this.graph.panDx / this.graph.view.scale;\r\n              pt.y -= this.graph.panDy / this.graph.view.scale;\r\n            }\r\n          }\r\n\r\n          geo.setTerminalPoint(pt, isSource);\r\n          model.setGeometry(edge, geo);\r\n          \r\n\r\n          \r\n        }\r\n      // В ФИЛЬМЕ: СПИЗДИЛИ\r\n      if ((event.target.textContent) == 'not x') {\r\n        //прямоугольник\r\n        var v1 = graph.insertVertex(parent, null, '', 80, 40, 40, 80,\r\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n        v1.setConnectable(false);\r\n\r\n\r\n        //выходы прямоугольника\r\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n          'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n          'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v11.geometry.relative = true;\r\n        v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n        var v12 = v11.clone();\r\n        v12.value = 'Y';\r\n        v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n        v1.insert(v12);\r\n        var v15 = v11.clone();\r\n        v15.value = '';\r\n        v15.geometry.x = 1;\r\n        v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n        v15.geometry.offset = new mxPoint(5, 32);\r\n        v1.insert(v15);\r\n\r\n\r\n        var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v16.geometry.x = 1;\r\n        v16.geometry.offset = new mxPoint(49, 34);\r\n        v1.insert(v16);\r\n      }\r\n      if ((event.target.textContent) == 'x * y') {\r\n        //прямоугольник\r\n        var v1 = graph.insertVertex(parent, null, '', 180, 40, 40, 80,\r\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n        v1.setConnectable(false);\r\n\r\n        //выходы прямоугольника\r\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n          'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n          'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v11.geometry.relative = true;\r\n        v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n        var v12 = v11.clone();\r\n        v12.value = 'Y';\r\n        v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n        v1.insert(v12);\r\n        var v15 = v11.clone();\r\n        v15.value = '';\r\n        v15.geometry.x = 1;\r\n        v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n        v15.geometry.offset = new mxPoint(0, 32);\r\n        v1.insert(v15);\r\n\r\n\r\n        var v16 = graph.insertVertex(v1, null, '&', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v16.geometry.x = 1;\r\n        v16.geometry.offset = new mxPoint(28.5, 37);\r\n        v1.insert(v16);\r\n      }\r\n      if ((event.target.textContent) == 'x + y') {\r\n        //прямоугольник\r\n        var v1 = graph.insertVertex(parent, null, '', 250, 40, 40, 80,\r\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n        v1.setConnectable(false);\r\n\r\n        //выходы прямоугольника\r\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n          'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n          'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v11.geometry.relative = true;\r\n        v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n        var v12 = v11.clone();\r\n        v12.value = 'Y';\r\n        v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n        v1.insert(v12);\r\n        var v15 = v11.clone();\r\n        v15.value = '';\r\n        v15.geometry.x = 1;\r\n        v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n        v15.geometry.offset = new mxPoint(0, 32);\r\n        v1.insert(v15);\r\n\r\n        var v16 = graph.insertVertex(v1, null, '|', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v16.geometry.x = 1;\r\n        v16.geometry.offset = new mxPoint(24, 37);\r\n        v1.insert(v16);\r\n      }\r\n      if ((event.target.textContent) == 'x == y') {\r\n        //прямоугольник\r\n        var v1 = graph.insertVertex(parent, null, '', 180, 140, 40, 80,\r\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n        v1.setConnectable(false);\r\n\r\n        //выходы прямоугольника\r\n        var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n          'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n          'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v11.geometry.relative = true;\r\n        v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n        var v12 = v11.clone();\r\n        v12.value = 'Y';\r\n        v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n        v1.insert(v12);\r\n        var v15 = v11.clone();\r\n        v15.value = '';\r\n        v15.geometry.x = 1;\r\n        v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n        v15.geometry.offset = new mxPoint(0, 32);\r\n        v1.insert(v15);\r\n\r\n        var v16 = graph.insertVertex(v1, null, '==', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=15;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v16.geometry.x = 1;\r\n        v16.geometry.offset = new mxPoint(30, 38);\r\n        v1.insert(v16);\r\n      }\r\n      if ((event.target.textContent) == 'x => y') {\r\n        //прямоугольник\r\n        var v1 = graph.insertVertex(parent, null, '', 80, 140, 40, 80,\r\n          'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n        v1.setConnectable(false);\r\n\r\n        //выходы прямоугольника\r\n        var v11 = graph.insertVertex(v1, null, '', 0, 0, 14, 16,\r\n          'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n          'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v11.geometry.relative = true;\r\n        v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n        var v12 = v11.clone();\r\n        v12.value = '';\r\n        v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n        v1.insert(v12);\r\n        var v15 = v11.clone();\r\n        v15.value = '';\r\n        v15.geometry.x = 1;\r\n        v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n        v15.geometry.offset = new mxPoint(0, 32);\r\n        v1.insert(v15);\r\n\r\n        var v16 = graph.insertVertex(v1, null, '○', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=25;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v16.geometry.x = 1;\r\n        v16.geometry.offset = new mxPoint(8, 15);\r\n        v1.insert(v16);\r\n        var v17 = graph.insertVertex(v1, null, 'X', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v17.geometry.x = 1;\r\n        v17.geometry.offset = new mxPoint(14, 20);\r\n        v1.insert(v17);\r\n        var v18 = graph.insertVertex(v1, null, 'Y', 0, 0, 0, 0,\r\n          'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n          'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n        v18.geometry.x = 1;\r\n        v18.geometry.offset = new mxPoint(14, 59);\r\n        v1.insert(v18);\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n      // Uses implementation of connection points via constraints (see above)\r\n      //v2.setConnectable(false);\r\n\r\n      /*var v21 = graph.insertVertex(v2, null, 'A', 0, 0.5, 10, 1,\r\n        'shape=none;spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n        'fontColor=#4c4c4c;strokeColor=#909090;');\r\n      v21.geometry.relative = true;\r\n      v21.geometry.offset = new mxPoint(0, -1);\r\n    \r\n      var v22 = graph.insertVertex(v2, null, 'B', 1, 0.5, 10, 1,\r\n        'spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n        'fontColor=#4c4c4c;strokeColor=#909090;');\r\n      v22.geometry.relative = true;\r\n      v22.geometry.offset = new mxPoint(-10, -1);*/\r\n\r\n\r\n\r\n      // Connection constraints implemented in edges, alternatively this\r\n      // can be implemented using references, see: portrefs.html\r\n\r\n\r\n      // \t\t\t\tvar e1 = graph.insertEdge(parent, null, 'e1', v1.getChildAt(7), v2.getChildAt(0));\r\n      // \t\t\t\te1.geometry.points = [new mxPoint(180, 140)];\r\n\r\n      // \t\t\t\tvar e2 = graph.insertEdge(parent, null, '', v1.getChildAt(4), v2.getChildAt(1));\r\n      // \t\t\t\te2.geometry.points = [new mxPoint(320, 80)];\r\n\r\n      // \t\t\t\tvar e3 = graph.insertEdge(parent, null, 'crossover', e1, e2);\r\n      // \t\t\t\te3.geometry.setTerminalPoint(new mxPoint(180, 160), true);\r\n      // \t\t\t\te3.geometry.setTerminalPoint(new mxPoint(320, 160), false);\r\n\r\n\r\n\r\n\r\n\r\n      }\r\n       finally {\r\n        model.endUpdate();\r\n      }\r\n\r\n      return result;\r\n    }\r\n\r\n    createMarker() {\r\n      let marker = super.createMarker.apply(this, arguments);\r\n      // Adds in-place highlighting when reconnecting existing edges\r\n      marker.highlight.highlight =\r\n        this.graph.getPlugin('ConnectionHandler').marker.highlight.highlight;\r\n      return marker;\r\n    }\r\n  }\r\n\r\n  // Switch for black background and bright styles\r\n  let invert = false;\r\n  let MyCustomCellEditorHandler;\r\n\r\n  if (invert) {\r\n    container.style.backgroundColor = 'black';\r\n\r\n    // White in-place editor text color\r\n    MyCustomCellEditorHandler = class extends CellEditorHandler {\r\n      startEditing(cell, trigger) {\r\n        super.startEditing.apply(this, arguments);\r\n\r\n        if (this.textarea != null) {\r\n          this.textarea.style.color = '#FFFFFF';\r\n        }\r\n      }\r\n    };\r\n  } else {\r\n    MyCustomCellEditorHandler = CellEditorHandler;\r\n  }\r\n\r\n  class MyCustomSelectionHandler extends SelectionHandler {\r\n    previewColor = invert ? 'white' : 'black';\r\n    // Enables guides\r\n    guidesEnabled = true;\r\n\r\n    createGuide() {\r\n      return new MyCustomGuide(this.graph, this.getGuideStates());\r\n    }\r\n  }\r\n\r\n  class MyCustomPanningHandler extends PanningHandler {\r\n    // Panning handler consumed right click so this must be\r\n    // disabled if right click should stop connection handler.\r\n    isPopupTrigger() {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  class MyCustomConnectionHandler extends ConnectionHandler {\r\n    // If connect preview is not moved away then getCellAt is used to detect the cell under\r\n    // the mouse if the mouse is over the preview shape in IE (no event transparency), ie.\r\n    // the built-in hit-detection of the HTML document will not be used in this case.\r\n    movePreviewAway = false;\r\n    waypointsEnabled = true;\r\n\r\n    // Starts connections on the background in wire-mode\r\n    isStartEvent(me) {\r\n      return checkbox.checked || super.isStartEvent.apply(this, arguments);\r\n    }\r\n\r\n    // Avoids any connections for gestures within tolerance except when in wire-mode\r\n    // or when over a port\r\n    mouseUp(sender, me) {\r\n      if (this.first != null && this.previous != null) {\r\n        let point = styleUtils.convertPoint(this.graph.container, me.getX(), me.getY());\r\n        let dx = Math.abs(point.x - this.first.x);\r\n        let dy = Math.abs(point.y - this.first.y);\r\n\r\n        if (dx < this.graph.tolerance && dy < this.graph.tolerance) {\r\n          // Selects edges in non-wire mode for single clicks, but starts\r\n          // connecting for non-edges regardless of wire-mode\r\n          if (!checkbox.checked && this.previous.cell.isEdge()) {\r\n            this.reset();\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      super.mouseUp.apply(this, arguments);\r\n    }\r\n\r\n    // Overrides methods to preview and create new edges.\r\n\r\n    // Sets source terminal point for edge-to-edge connections.\r\n    createEdgeState(me) {\r\n      let edge = this.graph.createEdge();\r\n\r\n      if (this.sourceConstraint != null && this.previous != null) {\r\n        edge.style =\r\n          'exitX' +\r\n          '=' +\r\n          this.sourceConstraint.point.x +\r\n          ';' +\r\n          'exitY' +\r\n          '=' +\r\n          this.sourceConstraint.point.y +\r\n          ';';\r\n      } else if (me.getCell().isEdge()) {\r\n        let scale = this.graph.view.scale;\r\n        let tr = this.graph.view.translate;\r\n        let pt = new Point(\r\n          this.graph.snap(me.getGraphX() / scale) - tr.x,\r\n          this.graph.snap(me.getGraphY() / scale) - tr.y\r\n        );\r\n        edge.geometry.setTerminalPoint(pt, true);\r\n      }\r\n\r\n      return this.graph.view.createState(edge);\r\n    }\r\n\r\n    // Uses right mouse button to create edges on background (see also: lines 67 ff)\r\n    isStopEvent(me) {\r\n      return me.getState() != null || eventUtils.isRightMouseButton(me.getEvent());\r\n    }\r\n\r\n    // Updates target terminal point for edge-to-edge connections.\r\n    updateCurrentState(me, point) {\r\n      super.updateCurrentState.apply(this, arguments);\r\n\r\n      if (this.edgeState != null) {\r\n        this.edgeState.cell.geometry.setTerminalPoint(null, false);\r\n\r\n        if (\r\n          this.shape != null &&\r\n          this.currentState != null &&\r\n          this.currentState.cell.isEdge()\r\n        ) {\r\n          let scale = this.graph.view.scale;\r\n          let tr = this.graph.view.translate;\r\n          let pt = new Point(\r\n            this.graph.snap(me.getGraphX() / scale) - tr.x,\r\n            this.graph.snap(me.getGraphY() / scale) - tr.y\r\n          );\r\n          this.edgeState.cell.geometry.setTerminalPoint(pt, false);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Adds in-place highlighting for complete cell area (no hotspot).\r\n    createMarker() {\r\n      let marker = super.createMarker.apply(this, arguments);\r\n\r\n      // Uses complete area of cell for new connections (no hotspot)\r\n      marker.intersects = function (state, evt) {\r\n        return true;\r\n      };\r\n\r\n      // Adds in-place highlighting\r\n      //const mxCellHighlightHighlight = mxCellHighlight.prototype.highlight;\r\n      marker.highlight.highlight = function (state) {\r\n        // TODO: Should this be a subclass of marker rather than assigning directly?\r\n        if (this.state != state) {\r\n          if (this.state != null) {\r\n            this.state.style = this.lastStyle;\r\n\r\n            // Workaround for shape using current stroke width if no strokewidth defined\r\n            this.state.style.strokeWidth = this.state.style.strokeWidth || '1';\r\n            this.state.style.strokeColor = this.state.style.strokeColor || 'none';\r\n\r\n            if (this.state.shape != null) {\r\n              this.state.view.graph.cellRenderer.configureShape(this.state);\r\n              this.state.shape.redraw();\r\n            }\r\n          }\r\n\r\n          if (state != null) {\r\n            this.lastStyle = state.style;\r\n            state.style = cloneUtils.clone(state.style);\r\n            state.style.strokeColor = '#00ff00';\r\n            state.style.strokeWidth = '3';\r\n\r\n            if (state.shape != null) {\r\n              state.view.graph.cellRenderer.configureShape(state);\r\n              state.shape.redraw();\r\n            }\r\n          }\r\n          this.state = state;\r\n        }\r\n      };\r\n\r\n      return marker;\r\n    }\r\n\r\n    // Makes sure non-relative cells can only be connected via constraints\r\n    isConnectableCell(cell) {\r\n      if (cell.isEdge()) {\r\n        return true;\r\n      } else {\r\n        let geo = cell != null ? cell.getGeometry() : null;\r\n        return geo != null ? geo.relative : false;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Updates connection points before the routing is called.\r\n\r\n  class MyCustomGraphView extends GraphView {\r\n    // Computes the position of edge to edge connection points.\r\n    updateFixedTerminalPoint(edge, terminal, source, constraint) {\r\n      let pt = null;\r\n\r\n      if (constraint != null) {\r\n        pt = this.graph.getConnectionPoint(terminal, constraint);\r\n      }\r\n\r\n      if (source) {\r\n        edge.sourceSegment = null;\r\n      } else {\r\n        edge.targetSegment = null;\r\n      }\r\n\r\n      if (pt == null) {\r\n        let s = this.scale;\r\n        let tr = this.translate;\r\n        let orig = edge.origin;\r\n        let geo = edge.cell.getGeometry();\r\n        pt = geo.getTerminalPoint(source);\r\n\r\n        // Computes edge-to-edge connection point\r\n        if (pt != null) {\r\n          pt = new Point(s * (tr.x + pt.x + orig.x), s * (tr.y + pt.y + orig.y));\r\n\r\n          // Finds nearest segment on edge and computes intersection\r\n          if (terminal != null && terminal.absolutePoints != null) {\r\n            let seg = mathUtils.findNearestSegment(terminal, pt.x, pt.y);\r\n\r\n            // Finds orientation of the segment\r\n            let p0 = terminal.absolutePoints[seg];\r\n            let pe = terminal.absolutePoints[seg + 1];\r\n            let horizontal = p0.x - pe.x === 0;\r\n\r\n            // Stores the segment in the edge state\r\n            let key = source ? 'sourceConstraint' : 'targetConstraint';\r\n            let value = horizontal ? 'horizontal' : 'vertical';\r\n            edge.style[key] = value;\r\n\r\n            // Keeps the coordinate within the segment bounds\r\n            if (horizontal) {\r\n              pt.x = p0.x;\r\n              pt.y = Math.min(pt.y, Math.max(p0.y, pe.y));\r\n              pt.y = Math.max(pt.y, Math.min(p0.y, pe.y));\r\n            } else {\r\n              pt.y = p0.y;\r\n              pt.x = Math.min(pt.x, Math.max(p0.x, pe.x));\r\n              pt.x = Math.max(pt.x, Math.min(p0.x, pe.x));\r\n            }\r\n          }\r\n        }\r\n        // Computes constraint connection points on vertices and ports\r\n        else if (terminal != null && terminal.cell.geometry.relative) {\r\n          pt = new Point(\r\n            this.getRoutingCenterX(terminal),\r\n            this.getRoutingCenterY(terminal)\r\n          );\r\n        }\r\n\r\n        // Snaps point to grid\r\n        /*if (pt != null)\r\n        {\r\n          let tr = this.graph.view.translate;\r\n          let s = this.graph.view.scale;\r\n\r\n          pt.x = (this.graph.snap(pt.x / s - tr.x) + tr.x) * s;\r\n          pt.y = (this.graph.snap(pt.y / s - tr.y) + tr.y) * s;\r\n        }*/\r\n      }\r\n\r\n      edge.setAbsoluteTerminalPoint(pt, source);\r\n    }\r\n  }\r\n\r\n  // Updates the terminal and control points in the cloned preview.\r\n  class MyCustomEdgeSegmentHandler extends EdgeSegmentHandler {\r\n    clonePreviewState(point, terminal) {\r\n      let clone = super.clonePreviewState.apply(this, arguments);\r\n      clone.cell = clone.cell.clone();\r\n\r\n      if (this.isSource || this.isTarget) {\r\n        clone.cell.geometry = clone.cell.geometry.clone();\r\n\r\n        // Sets the terminal point of an edge if we're moving one of the endpoints\r\n        if (clone.cell.isEdge()) {\r\n          // TODO: Only set this if the target or source terminal is an edge\r\n          clone.cell.geometry.setTerminalPoint(point, this.isSource);\r\n        } else {\r\n          clone.cell.geometry.setTerminalPoint(null, this.isSource);\r\n        }\r\n      }\r\n\r\n      return clone;\r\n    }\r\n  }\r\n\r\n  // Imlements a custom resistor shape. Direction currently ignored here.\r\n\r\n  class ResistorShape extends CylinderShape {\r\n    constructor() {\r\n      // TODO: The original didn't seem to call the super\r\n      super(null, null, null, null);\r\n    }\r\n\r\n    redrawPath(path, x, y, w, h, isForeground) {\r\n      let dx = w / 16;\r\n\r\n      if (isForeground) {\r\n        path.moveTo(0, h / 2);\r\n        path.lineTo(2 * dx, h / 2);\r\n        path.lineTo(3 * dx, 0);\r\n        path.lineTo(5 * dx, h);\r\n        path.lineTo(7 * dx, 0);\r\n        path.lineTo(9 * dx, h);\r\n        path.lineTo(11 * dx, 0);\r\n        path.lineTo(13 * dx, h);\r\n        path.lineTo(14 * dx, h / 2);\r\n        path.lineTo(16 * dx, h / 2);\r\n        path.end();\r\n      }\r\n    }\r\n  }\r\n\r\n  CellRenderer.registerShape('resistor', ResistorShape);\r\n\r\n  // Imlements a custom resistor shape. Direction currently ignored here.\r\n\r\n  EdgeStyle.WireConnector = function (state, source, target, hints, result) {\r\n    // Creates array of all way- and terminalpoints\r\n    let pts = state.absolutePoints;\r\n    let horizontal = true;\r\n    let hint = null;\r\n\r\n    // Gets the initial connection from the source terminal or edge\r\n    if (source != null && source.cell.isEdge()) {\r\n      horizontal = state.style.sourceConstraint == 'horizontal';\r\n    } else if (source != null) {\r\n      horizontal = source.style.portConstraint != 'vertical';\r\n\r\n      // Checks the direction of the shape and rotates\r\n      let direction = source.style.direction;\r\n\r\n      if (direction == 'north' || direction == 'south') {\r\n        horizontal = !horizontal;\r\n      }\r\n    }\r\n\r\n    // Adds the first point\r\n    // TODO: Should move along connected segment\r\n    let pt = pts[0];\r\n\r\n    if (pt == null && source != null) {\r\n      pt = new Point(\r\n        state.view.getRoutingCenterX(source),\r\n        state.view.getRoutingCenterY(source)\r\n      );\r\n    } else if (pt != null) {\r\n      pt = pt.clone();\r\n    }\r\n\r\n    let first = pt;\r\n\r\n    // Adds the waypoints\r\n    if (hints != null && hints.length > 0) {\r\n      // FIXME: First segment not movable\r\n      /*hint = state.view.transformControlPoint(state, hints[0]);\r\n      MaxLog.show();\r\n      MaxLog.debug(hints.length,'hints0.y='+hint.y, pt.y)\r\n\r\n      if (horizontal && Math.floor(hint.y) != Math.floor(pt.y))\r\n      {\r\n        MaxLog.show();\r\n        MaxLog.debug('add waypoint');\r\n\r\n        pt = new Point(pt.x, hint.y);\r\n        result.push(pt);\r\n        pt = pt.clone();\r\n        //horizontal = !horizontal;\r\n      }*/\r\n\r\n      for (let i = 0; i < hints.length; i++) {\r\n        horizontal = !horizontal;\r\n        hint = state.view.transformControlPoint(state, hints[i]);\r\n\r\n        if (horizontal) {\r\n          if (pt.y !== hint.y) {\r\n            pt.y = hint.y;\r\n            result.push(pt.clone());\r\n          }\r\n        } else if (pt.x !== hint.x) {\r\n          pt.x = hint.x;\r\n          result.push(pt.clone());\r\n        }\r\n      }\r\n    } else {\r\n      hint = pt;\r\n    }\r\n\r\n    // Adds the last point\r\n    pt = pts[pts.length - 1];\r\n\r\n    // TODO: Should move along connected segment\r\n    if (pt == null && target != null) {\r\n      pt = new Point(\r\n        state.view.getRoutingCenterX(target),\r\n        state.view.getRoutingCenterY(target)\r\n      );\r\n    }\r\n\r\n    if (horizontal) {\r\n      if (pt.y !== hint.y && first.x !== pt.x) {\r\n        result.push(new Point(pt.x, hint.y));\r\n      }\r\n    } else if (pt.x !== hint.x && first.y !== pt.y) {\r\n      result.push(new Point(hint.x, pt.y));\r\n    }\r\n  };\r\n\r\n  StyleRegistry.putValue('wireEdgeStyle', EdgeStyle.WireConnector);\r\n\r\n\r\n    let graph = new MyCustomGraph(container, null, [\r\n      MyCustomCellEditorHandler,\r\n      TooltipHandler,\r\n      SelectionCellsHandler,\r\n      PopupMenuHandler,\r\n      MyCustomConnectionHandler,\r\n      MyCustomSelectionHandler,\r\n      MyCustomPanningHandler,\r\n    ]);\r\n\r\n    let labelBackground = invert ? '#000000' : '#FFFFFF';\r\n  let fontColor = invert ? '#FFFFFF' : '#000000';\r\n  let strokeColor = invert ? '#C0C0C0' : '#000000';\r\n  let fillColor = invert ? 'none' : '#FFFFFF';\r\n\r\n  graph.view.scale = 1;\r\n  graph.setPanning(true);\r\n  graph.setConnectable(true);\r\n  graph.setConnectableEdges(true);\r\n  graph.setDisconnectOnMove(false);\r\n  graph.foldingEnabled = false;\r\n\r\n  //Maximum size\r\n  graph.maximumGraphBounds = new Rectangle(0, 0, 800, 600);\r\n  graph.border = 50;\r\n\r\n  // Enables return key to stop editing (use shift-enter for newlines)\r\n  graph.setEnterStopsCellEditing(true);\r\n\r\n  // Adds rubberband selection\r\n  new RubberBandHandler(graph);\r\n\r\n  // Adds a special tooltip for edges\r\n  graph.setTooltips(true);\r\n\r\n  let style = graph.getStylesheet().getDefaultEdgeStyle();\r\n  delete style.endArrow;\r\n  style.strokeColor = strokeColor;\r\n  style.labelBackgroundColor = labelBackground;\r\n  style.edgeStyle = 'wireEdgeStyle';\r\n  style.fontColor = fontColor;\r\n  style.fontSize = '9';\r\n  style.movable = '0';\r\n  style.strokeWidth = strokeWidth;\r\n  //style.rounded = '1';\r\n\r\n  // Sets join node size\r\n  style.startSize = joinNodeSize;\r\n  style.endSize = joinNodeSize;\r\n\r\n  style = graph.getStylesheet().getDefaultVertexStyle();\r\n  style.gradientDirection = 'south';\r\n  //style.gradientColor = '#909090';\r\n  style.strokeColor = strokeColor;\r\n  //style.fillColor = '#e0e0e0';\r\n  style.fillColor = 'none';\r\n  style.fontColor = fontColor;\r\n  style.fontStyle = '1';\r\n  style.fontSize = '12';\r\n  style.resizable = '0';\r\n  style.rounded = '1';\r\n  style.strokeWidth = strokeWidth;\r\n\r\n  let parent = graph.getDefaultParent();\r\n\r\n  graph.batchUpdate(() => {\r\n\r\n    //ФИЛЬМ СПИЗДИЛИ ЧАСТЬ ВТОРАЯ \r\n          \t\t\t\t\t//выходы прямоугольника\r\n                    var v1 = graph.insertVertex(parent, null, '', 170, 110, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '○', 49, 34, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n        \r\n        \r\n        \r\n        \r\n        \r\n                  //выходы прямоугольника\r\n                  var v1 = graph.insertVertex(parent, null, '', 170, 200, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '○', 49, 34, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=30;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n        \r\n        \r\n                  //выходы прямоугольника\r\n                  var v1 = graph.insertVertex(parent, null, '', 310, 70, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n        \r\n        \r\n        \r\n                  //выходы прямоугольника\r\n                  var v1 = graph.insertVertex(parent, null, '', 310, 320, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n        \r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n        \r\n        \r\n        \r\n        \r\n        \r\n                  //выходы прямоугольника\r\n                  var v1 = graph.insertVertex(parent, null, '', 310, 220, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n        \r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '&', 49, 38, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n        \r\n        \r\n        \r\n        \r\n        \r\n                  var v1 = graph.insertVertex(parent, null, '', 430, 140, 40, 80,\r\n                    'verticalLabelPosition=top;verticalAlign=bottom;shadow=1;fillColor=' + fillColor);\r\n                  v1.setConnectable(false);\r\n        \r\n                  //выходы прямоугольника\r\n                  var v11 = graph.insertVertex(v1, null, 'X', 0, 0, 10, 16,\r\n                    'shape=line;align=left;verticalAlign=middle;fontSize=10;routingCenterX=-0.5;' +\r\n                    'spacingLeft=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v11.geometry.relative = true;\r\n                  v11.geometry.offset = new mxPoint(-v11.geometry.width, 12);\r\n                  var v12 = v11.clone();\r\n                  v12.value = 'Y';\r\n                  v12.geometry.offset = new mxPoint(-v11.geometry.width, 52);\r\n                  v1.insert(v12);\r\n                  var v15 = v11.clone();\r\n                  v15.value = '';\r\n                  v15.geometry.x = 1;\r\n                  v15.style = 'shape=line;align=right;verticalAlign=middle;fontSize=10;routingCenterX=0.5;' +\r\n                    'spacingRight=12;fontColor=' + fontColor + ';strokeColor=' + strokeColor;\r\n                  v15.geometry.offset = new mxPoint(0, 32);\r\n                  v1.insert(v15);\r\n        \r\n        \r\n                  var v16 = graph.insertVertex(v1, null, '|', 49, 36, 0, 0,\r\n                    'shape=line;align=right;verticalAlign=middle;fontSize=20;routingCenterX=0.5;' +\r\n                    'spacingLeft=6;fontColor=' + fontColor + ';strokeColor=' + strokeColor);\r\n                  v16.geometry.x = 1;\r\n                  v16.geometry.offset = new mxPoint(49, 0);\r\n                  v1.insert(v16);\r\n                  // Uses implementation of connection points via constraints (see above)\r\n                  //v2.setConnectable(false);\r\n        \r\n                  /*var v21 = graph.insertVertex(v2, null, 'A', 0, 0.5, 10, 1,\r\n                    'shape=none;spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n                    'fontColor=#4c4c4c;strokeColor=#909090;');\r\n                  v21.geometry.relative = true;\r\n                  v21.geometry.offset = new mxPoint(0, -1);\r\n                \r\n                  var v22 = graph.insertVertex(v2, null, 'B', 1, 0.5, 10, 1,\r\n                    'spacingBottom=11;spacingLeft=1;align=left;fontSize=8;'+\r\n                    'fontColor=#4c4c4c;strokeColor=#909090;');\r\n                  v22.geometry.relative = true;\r\n                  v22.geometry.offset = new mxPoint(-10, -1);*/\r\n    \r\n\r\n  });\r\n\r\n\r\n    parentContainer.appendChild(DomHelpers.button('Zoom In', () => graph.zoomIn()));\r\n\r\n    parentContainer.appendChild(DomHelpers.button('Zoom Out', () => graph.zoomOut()));\r\n\r\n      // Undo/redo\r\n  let undoManager = new UndoManager();\r\n  let listener = function (sender, evt) {\r\n    undoManager.undoableEditHappened(evt.getProperty('edit'));\r\n  };\r\n  graph.getDataModel().addListener(InternalEvent.UNDO, listener);\r\n  graph.getView().addListener(InternalEvent.UNDO, listener);\r\n\r\n  parentContainer.appendChild(\r\n    DomHelpers.button('Undo', function () {\r\n      undoManager.undo();\r\n    })\r\n  );\r\n\r\n  parentContainer.appendChild(\r\n    DomHelpers.button('Redo', function () {\r\n      undoManager.redo();\r\n    })\r\n  );\r\n\r\n  // Shows XML for debugging the actual model\r\n  parentContainer.appendChild(\r\n    DomHelpers.button('Delete', function () {\r\n      graph.removeCells();\r\n    })\r\n  );\r\n\r\n  // Wire-mode\r\n  let checkbox = document.createElement('input');\r\n  checkbox.setAttribute('type', 'checkbox');\r\n\r\n  parentContainer.appendChild(checkbox);\r\n  domUtils.write(parentContainer, 'Wire Mode');\r\n\r\n  // Grid\r\n  let checkbox2 = document.createElement('input');\r\n  checkbox2.setAttribute('type', 'checkbox');\r\n  checkbox2.setAttribute('checked', 'true');\r\n\r\n  parentContainer.appendChild(checkbox2);\r\n  domUtils.write(parentContainer, 'Grid');\r\n\r\n  InternalEvent.addListener(checkbox2, 'click', function (evt) {\r\n    if (checkbox2.checked) {\r\n      container.style.background = 'url(./images/grid.gif)';\r\n    } else {\r\n      container.style.background = '';\r\n    }\r\n    container.style.backgroundColor = invert ? 'black' : 'white';\r\n  });\r\n  InternalEvent.disableContextMenu(container);\r\n\r\n\r\n    graphContainer.appendChild(parentContainer);\r\n\r\n    return () => {\r\n      // Clean up if needed\r\n    };\r\n  }, []);\r\n\r\n  return <div ref={graphContainerRef} style={{ width: '100%', height: '100%' }} />;\r\n};\r\n\r\nexport default YourComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}