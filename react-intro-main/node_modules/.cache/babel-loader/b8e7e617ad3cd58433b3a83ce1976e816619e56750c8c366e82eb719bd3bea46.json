{"ast":null,"code":"'use strict';\n\nfunction appendSaveAsDialog(index, output) {\n  let menu;\n  function closeMenu(e) {\n    const left = parseInt(menu.style.left, 10);\n    const top = parseInt(menu.style.top, 10);\n    if (e.x < left || e.x > left + menu.offsetWidth || e.y < top || e.y > top + menu.offsetHeight) {\n      menu.parentNode.removeChild(menu);\n      document.body.removeEventListener('mousedown', closeMenu, false);\n    }\n  }\n  const div = document.getElementById(output + index);\n  div.childNodes[0].addEventListener('contextmenu', function (e) {\n    menu = document.createElement('div');\n    menu.className = 'wavedromMenu';\n    menu.style.top = e.y + 'px';\n    menu.style.left = e.x + 'px';\n    const list = document.createElement('ul');\n    const savePng = document.createElement('li');\n    savePng.innerHTML = 'Save as PNG';\n    list.appendChild(savePng);\n    const saveSvg = document.createElement('li');\n    saveSvg.innerHTML = 'Save as SVG';\n    list.appendChild(saveSvg);\n\n    //const saveJson = document.createElement('li');\n    //saveJson.innerHTML = 'Save as JSON';\n    //list.appendChild(saveJson);\n\n    menu.appendChild(list);\n    document.body.appendChild(menu);\n    savePng.addEventListener('click', function () {\n      let html = '';\n      if (index !== 0) {\n        const firstDiv = document.getElementById(output + 0);\n        html += firstDiv.innerHTML.substring(166, firstDiv.innerHTML.indexOf('<g id=\"waves_0\">'));\n      }\n      html = [div.innerHTML.slice(0, 166), html, div.innerHTML.slice(166)].join('');\n      const svgdata = 'data:image/svg+xml;base64,' + btoa(html);\n      const img = new Image();\n      img.src = svgdata;\n      const canvas = document.createElement('canvas');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const context = canvas.getContext('2d');\n      context.drawImage(img, 0, 0);\n      const pngdata = canvas.toDataURL('image/png');\n      const a = document.createElement('a');\n      a.href = pngdata;\n      a.download = 'wavedrom.png';\n      a.click();\n      menu.parentNode.removeChild(menu);\n      document.body.removeEventListener('mousedown', closeMenu, false);\n    }, false);\n    saveSvg.addEventListener('click', function () {\n      let html = '';\n      if (index !== 0) {\n        const firstDiv = document.getElementById(output + 0);\n        html += firstDiv.innerHTML.substring(166, firstDiv.innerHTML.indexOf('<g id=\"waves_0\">'));\n      }\n      html = [div.innerHTML.slice(0, 166), html, div.innerHTML.slice(166)].join('');\n      const svgdata = 'data:image/svg+xml;base64,' + btoa(html);\n      const a = document.createElement('a');\n      a.href = svgdata;\n      a.download = 'wavedrom.svg';\n      a.click();\n      menu.parentNode.removeChild(menu);\n      document.body.removeEventListener('mousedown', closeMenu, false);\n    }, false);\n    menu.addEventListener('contextmenu', function (ee) {\n      ee.preventDefault();\n    }, false);\n    document.body.addEventListener('mousedown', closeMenu, false);\n    e.preventDefault();\n  }, false);\n}\nmodule.exports = appendSaveAsDialog;\n\n/* eslint-env browser */","map":{"version":3,"names":["appendSaveAsDialog","index","output","menu","closeMenu","e","left","parseInt","style","top","x","offsetWidth","y","offsetHeight","parentNode","removeChild","document","body","removeEventListener","div","getElementById","childNodes","addEventListener","createElement","className","list","savePng","innerHTML","appendChild","saveSvg","html","firstDiv","substring","indexOf","slice","join","svgdata","btoa","img","Image","src","canvas","width","height","context","getContext","drawImage","pngdata","toDataURL","a","href","download","click","ee","preventDefault","module","exports"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/wavedrom/lib/append-save-as-dialog.js"],"sourcesContent":["'use strict';\n\nfunction appendSaveAsDialog (index, output) {\n    let menu;\n\n    function closeMenu(e) {\n        const left = parseInt(menu.style.left, 10);\n        const top = parseInt(menu.style.top, 10);\n        if (\n            e.x < left ||\n            e.x > (left + menu.offsetWidth) ||\n            e.y < top ||\n            e.y > (top + menu.offsetHeight)\n        ) {\n            menu.parentNode.removeChild(menu);\n            document.body.removeEventListener('mousedown', closeMenu, false);\n        }\n    }\n\n    const div = document.getElementById(output + index);\n\n    div.childNodes[0].addEventListener('contextmenu',\n        function (e) {\n            menu = document.createElement('div');\n\n            menu.className = 'wavedromMenu';\n            menu.style.top = e.y + 'px';\n            menu.style.left = e.x + 'px';\n\n            const list = document.createElement('ul');\n            const savePng = document.createElement('li');\n            savePng.innerHTML = 'Save as PNG';\n            list.appendChild(savePng);\n\n            const saveSvg = document.createElement('li');\n            saveSvg.innerHTML = 'Save as SVG';\n            list.appendChild(saveSvg);\n\n            //const saveJson = document.createElement('li');\n            //saveJson.innerHTML = 'Save as JSON';\n            //list.appendChild(saveJson);\n\n            menu.appendChild(list);\n\n            document.body.appendChild(menu);\n\n            savePng.addEventListener('click',\n                function () {\n                    let html = '';\n                    if (index !== 0) {\n                        const firstDiv = document.getElementById(output + 0);\n                        html += firstDiv.innerHTML.substring(166, firstDiv.innerHTML.indexOf('<g id=\"waves_0\">'));\n                    }\n                    html = [div.innerHTML.slice(0, 166), html, div.innerHTML.slice(166)].join('');\n                    const svgdata = 'data:image/svg+xml;base64,' + btoa(html);\n                    const img = new Image();\n                    img.src = svgdata;\n                    const canvas = document.createElement('canvas');\n                    canvas.width = img.width;\n                    canvas.height = img.height;\n                    const context = canvas.getContext('2d');\n                    context.drawImage(img, 0, 0);\n\n                    const pngdata = canvas.toDataURL('image/png');\n\n                    const a = document.createElement('a');\n                    a.href = pngdata;\n                    a.download = 'wavedrom.png';\n                    a.click();\n\n                    menu.parentNode.removeChild(menu);\n                    document.body.removeEventListener('mousedown', closeMenu, false);\n                },\n                false\n            );\n\n            saveSvg.addEventListener('click',\n                function () {\n                    let html = '';\n                    if (index !== 0) {\n                        const firstDiv = document.getElementById(output + 0);\n                        html += firstDiv.innerHTML.substring(166, firstDiv.innerHTML.indexOf('<g id=\"waves_0\">'));\n                    }\n                    html = [div.innerHTML.slice(0, 166), html, div.innerHTML.slice(166)].join('');\n                    const svgdata = 'data:image/svg+xml;base64,' + btoa(html);\n\n                    const a = document.createElement('a');\n                    a.href = svgdata;\n                    a.download = 'wavedrom.svg';\n                    a.click();\n\n                    menu.parentNode.removeChild(menu);\n                    document.body.removeEventListener('mousedown', closeMenu, false);\n                },\n                false\n            );\n\n            menu.addEventListener('contextmenu',\n                function (ee) {\n                    ee.preventDefault();\n                },\n                false\n            );\n\n            document.body.addEventListener('mousedown', closeMenu, false);\n\n            e.preventDefault();\n        },\n        false\n    );\n}\n\nmodule.exports = appendSaveAsDialog;\n\n/* eslint-env browser */\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}