{"ast":null,"code":"var _StandaloneEditorProgressService, _StandaloneNotificationService, _StandaloneWorkspaceContextService;\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport '../../common/services/semanticTokensStylingService.js';\nimport '../../common/services/languageFeaturesService.js';\nimport '../../browser/services/hoverService/hoverService.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\nimport { IAccessibilitySignalService } from '../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { ITreeSitterParserService } from '../../common/services/treeSitterParserService.js';\nimport { StandaloneTreeSitterParserService } from './standaloneTreeSitterService.js';\nclass SimpleModel {\n  constructor(model) {\n    this.disposed = false;\n    this.model = model;\n    this._onWillDispose = new Emitter();\n  }\n  get textEditorModel() {\n    return this.model;\n  }\n  dispose() {\n    this.disposed = true;\n    this._onWillDispose.fire();\n  }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n  constructor(modelService) {\n    this.modelService = modelService;\n  }\n  createModelReference(resource) {\n    const model = this.modelService.getModel(resource);\n    if (!model) {\n      return Promise.reject(new Error(\"Model not found\"));\n    }\n    return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n  }\n};\nStandaloneTextModelService = __decorate([__param(0, IModelService)], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n  show() {\n    return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n  }\n  async showWhile(promise, delay) {\n    await promise;\n  }\n}\n_StandaloneEditorProgressService = StandaloneEditorProgressService;\n_StandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n  done: () => {},\n  total: () => {},\n  worked: () => {}\n};\nclass StandaloneProgressService {\n  withProgress(_options, task, onDidCancel) {\n    return task({\n      report: () => {}\n    });\n  }\n}\nclass StandaloneEnvironmentService {\n  constructor() {\n    this.isExtensionDevelopment = false;\n    this.isBuilt = false;\n  }\n}\nclass StandaloneDialogService {\n  async confirm(confirmation) {\n    const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\n    return {\n      confirmed,\n      checkboxChecked: false // unsupported\n    };\n  }\n  doConfirm(message, detail) {\n    let messageText = message;\n    if (detail) {\n      messageText = messageText + '\\n\\n' + detail;\n    }\n    return mainWindow.confirm(messageText);\n  }\n  async prompt(prompt) {\n    let result = undefined;\n    const confirmed = this.doConfirm(prompt.message, prompt.detail);\n    if (confirmed) {\n      var _prompt$buttons, _promptButtons$;\n      const promptButtons = [...((_prompt$buttons = prompt.buttons) !== null && _prompt$buttons !== void 0 ? _prompt$buttons : [])];\n      if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\n        promptButtons.push(prompt.cancelButton);\n      }\n      result = await ((_promptButtons$ = promptButtons[0]) === null || _promptButtons$ === void 0 ? void 0 : _promptButtons$.run({\n        checkboxChecked: false\n      }));\n    }\n    return {\n      result\n    };\n  }\n  async error(message, detail) {\n    await this.prompt({\n      type: Severity.Error,\n      message,\n      detail\n    });\n  }\n}\nexport class StandaloneNotificationService {\n  info(message) {\n    return this.notify({\n      severity: Severity.Info,\n      message\n    });\n  }\n  warn(message) {\n    return this.notify({\n      severity: Severity.Warning,\n      message\n    });\n  }\n  error(error) {\n    return this.notify({\n      severity: Severity.Error,\n      message: error\n    });\n  }\n  notify(notification) {\n    switch (notification.severity) {\n      case Severity.Error:\n        console.error(notification.message);\n        break;\n      case Severity.Warning:\n        console.warn(notification.message);\n        break;\n      default:\n        console.log(notification.message);\n        break;\n    }\n    return StandaloneNotificationService.NO_OP;\n  }\n  prompt(severity, message, choices, options) {\n    return StandaloneNotificationService.NO_OP;\n  }\n  status(message, options) {\n    return Disposable.None;\n  }\n}\n_StandaloneNotificationService = StandaloneNotificationService;\n_StandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n  constructor(instantiationService) {\n    this._onWillExecuteCommand = new Emitter();\n    this._onDidExecuteCommand = new Emitter();\n    this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n    this._instantiationService = instantiationService;\n  }\n  executeCommand(id) {\n    const command = CommandsRegistry.getCommand(id);\n    if (!command) {\n      return Promise.reject(new Error(\"command '\".concat(id, \"' not found\")));\n    }\n    try {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      this._onWillExecuteCommand.fire({\n        commandId: id,\n        args\n      });\n      const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n      this._onDidExecuteCommand.fire({\n        commandId: id,\n        args\n      });\n      return Promise.resolve(result);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n};\nStandaloneCommandService = __decorate([__param(0, IInstantiationService)], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n  constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n    super(contextKeyService, commandService, telemetryService, notificationService, logService);\n    this._cachedResolver = null;\n    this._dynamicKeybindings = [];\n    this._domNodeListeners = [];\n    const addContainer = domNode => {\n      const disposables = new DisposableStore();\n      // for standard keybindings\n      disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n        if (shouldPreventDefault) {\n          keyEvent.preventDefault();\n          keyEvent.stopPropagation();\n        }\n      }));\n      // for single modifier chord keybindings (e.g. shift shift)\n      disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n        if (shouldPreventDefault) {\n          keyEvent.preventDefault();\n        }\n      }));\n      this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n    };\n    const removeContainer = domNode => {\n      for (let i = 0; i < this._domNodeListeners.length; i++) {\n        const domNodeListeners = this._domNodeListeners[i];\n        if (domNodeListeners.domNode === domNode) {\n          this._domNodeListeners.splice(i, 1);\n          domNodeListeners.dispose();\n        }\n      }\n    };\n    const addCodeEditor = codeEditor => {\n      if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n        return;\n      }\n      addContainer(codeEditor.getContainerDomNode());\n    };\n    const removeCodeEditor = codeEditor => {\n      if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n        return;\n      }\n      removeContainer(codeEditor.getContainerDomNode());\n    };\n    this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n    this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n    codeEditorService.listCodeEditors().forEach(addCodeEditor);\n    const addDiffEditor = diffEditor => {\n      addContainer(diffEditor.getContainerDomNode());\n    };\n    const removeDiffEditor = diffEditor => {\n      removeContainer(diffEditor.getContainerDomNode());\n    };\n    this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n    this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n    codeEditorService.listDiffEditors().forEach(addDiffEditor);\n  }\n  addDynamicKeybinding(command, keybinding, handler, when) {\n    return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n      keybinding,\n      command,\n      when\n    }]));\n  }\n  addDynamicKeybindings(rules) {\n    const entries = rules.map(rule => {\n      var _rule$command;\n      const keybinding = decodeKeybinding(rule.keybinding, OS);\n      return {\n        keybinding,\n        command: (_rule$command = rule.command) !== null && _rule$command !== void 0 ? _rule$command : null,\n        commandArgs: rule.commandArgs,\n        when: rule.when,\n        weight1: 1000,\n        weight2: 0,\n        extensionId: null,\n        isBuiltinExtension: false\n      };\n    });\n    this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n    this.updateResolver();\n    return toDisposable(() => {\n      // Search the first entry and remove them all since they will be contiguous\n      for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n        if (this._dynamicKeybindings[i] === entries[0]) {\n          this._dynamicKeybindings.splice(i, entries.length);\n          this.updateResolver();\n          return;\n        }\n      }\n    });\n  }\n  updateResolver() {\n    this._cachedResolver = null;\n    this._onDidUpdateKeybindings.fire();\n  }\n  _getResolver() {\n    if (!this._cachedResolver) {\n      const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n      const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n      this._cachedResolver = new KeybindingResolver(defaults, overrides, str => this._log(str));\n    }\n    return this._cachedResolver;\n  }\n  _documentHasFocus() {\n    return mainWindow.document.hasFocus();\n  }\n  _toNormalizedKeybindingItems(items, isDefault) {\n    const result = [];\n    let resultLen = 0;\n    for (const item of items) {\n      const when = item.when || undefined;\n      const keybinding = item.keybinding;\n      if (!keybinding) {\n        // This might be a removal keybinding item in user settings => accept it\n        result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n      } else {\n        const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\n        for (const resolvedKeybinding of resolvedKeybindings) {\n          result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n        }\n      }\n    }\n    return result;\n  }\n  resolveKeyboardEvent(keyboardEvent) {\n    const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\n    return new USLayoutResolvedKeybinding([chord], OS);\n  }\n};\nStandaloneKeybindingService = __decorate([__param(0, IContextKeyService), __param(1, ICommandService), __param(2, ITelemetryService), __param(3, INotificationService), __param(4, ILogService), __param(5, ICodeEditorService)], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n  constructor(domNode, disposables) {\n    super();\n    this.domNode = domNode;\n    this._register(disposables);\n  }\n}\nfunction isConfigurationOverrides(thing) {\n  return thing && typeof thing === 'object' && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string') && (!thing.resource || thing.resource instanceof URI);\n}\nlet StandaloneConfigurationService = class StandaloneConfigurationService {\n  constructor(logService) {\n    this.logService = logService;\n    this._onDidChangeConfiguration = new Emitter();\n    this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n    const defaultConfiguration = new DefaultConfiguration(logService);\n    this._configuration = new Configuration(defaultConfiguration.reload(), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), new ResourceMap(), ConfigurationModel.createEmptyModel(logService), new ResourceMap(), logService);\n    defaultConfiguration.dispose();\n  }\n  getValue(arg1, arg2) {\n    const section = typeof arg1 === 'string' ? arg1 : undefined;\n    const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n    return this._configuration.getValue(section, overrides, undefined);\n  }\n  updateValues(values) {\n    const previous = {\n      data: this._configuration.toData()\n    };\n    const changedKeys = [];\n    for (const entry of values) {\n      const [key, value] = entry;\n      if (this.getValue(key) === value) {\n        continue;\n      }\n      this._configuration.updateValue(key, value);\n      changedKeys.push(key);\n    }\n    if (changedKeys.length > 0) {\n      const configurationChangeEvent = new ConfigurationChangeEvent({\n        keys: changedKeys,\n        overrides: []\n      }, previous, this._configuration, undefined, this.logService);\n      configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n      this._onDidChangeConfiguration.fire(configurationChangeEvent);\n    }\n    return Promise.resolve();\n  }\n  updateValue(key, value, arg3, arg4) {\n    return this.updateValues([[key, value]]);\n  }\n  inspect(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._configuration.inspect(key, options, undefined);\n  }\n};\nStandaloneConfigurationService = __decorate([__param(0, ILogService)], StandaloneConfigurationService);\nexport { StandaloneConfigurationService };\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n  constructor(configurationService, modelService, languageService) {\n    this.configurationService = configurationService;\n    this.modelService = modelService;\n    this.languageService = languageService;\n    this._onDidChangeConfiguration = new Emitter();\n    this.configurationService.onDidChangeConfiguration(e => {\n      this._onDidChangeConfiguration.fire({\n        affectedKeys: e.affectedKeys,\n        affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration)\n      });\n    });\n  }\n  getValue(resource, arg2, arg3) {\n    const position = Pos.isIPosition(arg2) ? arg2 : null;\n    const section = position ? typeof arg3 === 'string' ? arg3 : undefined : typeof arg2 === 'string' ? arg2 : undefined;\n    const language = resource ? this.getLanguage(resource, position) : undefined;\n    if (typeof section === 'undefined') {\n      return this.configurationService.getValue({\n        resource,\n        overrideIdentifier: language\n      });\n    }\n    return this.configurationService.getValue(section, {\n      resource,\n      overrideIdentifier: language\n    });\n  }\n  getLanguage(resource, position) {\n    const model = this.modelService.getModel(resource);\n    if (model) {\n      return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\n    }\n    return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n  }\n};\nStandaloneResourceConfigurationService = __decorate([__param(0, IConfigurationService), __param(1, IModelService), __param(2, ILanguageService)], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n  constructor(configurationService) {\n    this.configurationService = configurationService;\n  }\n  getEOL(resource, language) {\n    const eol = this.configurationService.getValue('files.eol', {\n      overrideIdentifier: language,\n      resource\n    });\n    if (eol && typeof eol === 'string' && eol !== 'auto') {\n      return eol;\n    }\n    return isLinux || isMacintosh ? '\\n' : '\\r\\n';\n  }\n};\nStandaloneResourcePropertiesService = __decorate([__param(0, IConfigurationService)], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n  publicLog2() {}\n}\nclass StandaloneWorkspaceContextService {\n  constructor() {\n    const resource = URI.from({\n      scheme: StandaloneWorkspaceContextService.SCHEME,\n      authority: 'model',\n      path: '/'\n    });\n    this.workspace = {\n      id: STANDALONE_EDITOR_WORKSPACE_ID,\n      folders: [new WorkspaceFolder({\n        uri: resource,\n        name: '',\n        index: 0\n      })]\n    };\n  }\n  getWorkspace() {\n    return this.workspace;\n  }\n  getWorkspaceFolder(resource) {\n    return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n  }\n}\n_StandaloneWorkspaceContextService = StandaloneWorkspaceContextService;\n_StandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n  if (!source) {\n    return;\n  }\n  if (!(configurationService instanceof StandaloneConfigurationService)) {\n    return;\n  }\n  const toUpdate = [];\n  Object.keys(source).forEach(key => {\n    if (isEditorConfigurationKey(key)) {\n      toUpdate.push([\"editor.\".concat(key), source[key]]);\n    }\n    if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n      toUpdate.push([\"diffEditor.\".concat(key), source[key]]);\n    }\n  });\n  if (toUpdate.length > 0) {\n    configurationService.updateValues(toUpdate);\n  }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n  constructor(_modelService) {\n    this._modelService = _modelService;\n    //\n  }\n  hasPreviewHandler() {\n    return false;\n  }\n  async apply(editsIn, _options) {\n    const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\n    const textEdits = new Map();\n    for (const edit of edits) {\n      if (!(edit instanceof ResourceTextEdit)) {\n        throw new Error('bad edit - only text edits are supported');\n      }\n      const model = this._modelService.getModel(edit.resource);\n      if (!model) {\n        throw new Error('bad edit - model not found');\n      }\n      if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n        throw new Error('bad state - model changed in the meantime');\n      }\n      let array = textEdits.get(model);\n      if (!array) {\n        array = [];\n        textEdits.set(model, array);\n      }\n      array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n    }\n    let totalEdits = 0;\n    let totalFiles = 0;\n    for (const [model, edits] of textEdits) {\n      model.pushStackElement();\n      model.pushEditOperations([], edits, () => []);\n      model.pushStackElement();\n      totalFiles += 1;\n      totalEdits += edits.length;\n    }\n    return {\n      ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\n      isApplied: totalEdits > 0\n    };\n  }\n};\nStandaloneBulkEditService = __decorate([__param(0, IModelService)], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n  getUriLabel(resource, options) {\n    if (resource.scheme === 'file') {\n      return resource.fsPath;\n    }\n    return resource.path;\n  }\n  getUriBasenameLabel(resource) {\n    return basename(resource);\n  }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n  constructor(layoutService, _codeEditorService) {\n    super(layoutService);\n    this._codeEditorService = _codeEditorService;\n  }\n  showContextView(delegate, container, shadowRoot) {\n    if (!container) {\n      const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n      if (codeEditor) {\n        container = codeEditor.getContainerDomNode();\n      }\n    }\n    return super.showContextView(delegate, container, shadowRoot);\n  }\n};\nStandaloneContextViewService = __decorate([__param(0, ILayoutService), __param(1, ICodeEditorService)], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n  constructor() {\n    this._neverEmitter = new Emitter();\n    this.onDidChangeTrust = this._neverEmitter.event;\n  }\n  isWorkspaceTrusted() {\n    return true;\n  }\n}\nclass StandaloneLanguageService extends LanguageService {\n  constructor() {\n    super();\n  }\n}\nclass StandaloneLogService extends LogService {\n  constructor() {\n    super(new ConsoleLogger());\n  }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n  constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n    super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\n    this.configure({\n      blockMouse: false\n    }); // we do not want that in the standalone editor\n  }\n};\nStandaloneContextMenuService = __decorate([__param(0, ITelemetryService), __param(1, INotificationService), __param(2, IContextViewService), __param(3, IKeybindingService), __param(4, IMenuService), __param(5, IContextKeyService)], StandaloneContextMenuService);\nexport const standaloneEditorWorkerDescriptor = {\n  amdModuleId: 'vs/editor/common/services/editorSimpleWorker',\n  esmModuleLocation: undefined,\n  label: 'editorWorkerService'\n};\nlet StandaloneEditorWorkerService = class StandaloneEditorWorkerService extends EditorWorkerService {\n  constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n    super(standaloneEditorWorkerDescriptor, modelService, configurationService, logService, languageConfigurationService, languageFeaturesService);\n  }\n};\nStandaloneEditorWorkerService = __decorate([__param(0, IModelService), __param(1, ITextResourceConfigurationService), __param(2, ILogService), __param(3, ILanguageConfigurationService), __param(4, ILanguageFeaturesService)], StandaloneEditorWorkerService);\nclass StandaloneAccessbilitySignalService {\n  async playSignal(cue, options) {}\n}\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorWorkerService, StandaloneEditorWorkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilitySignalService, StandaloneAccessbilitySignalService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITreeSitterParserService, StandaloneTreeSitterParserService, 0 /* InstantiationType.Eager */);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n  const serviceCollection = new ServiceCollection();\n  for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n    serviceCollection.set(id, descriptor);\n  }\n  const instantiationService = new InstantiationService(serviceCollection, true);\n  serviceCollection.set(IInstantiationService, instantiationService);\n  function get(serviceId) {\n    if (!initialized) {\n      initialize({});\n    }\n    const r = serviceCollection.get(serviceId);\n    if (!r) {\n      throw new Error('Missing service ' + serviceId);\n    }\n    if (r instanceof SyncDescriptor) {\n      return instantiationService.invokeFunction(accessor => accessor.get(serviceId));\n    } else {\n      return r;\n    }\n  }\n  StandaloneServices.get = get;\n  let initialized = false;\n  const onDidInitialize = new Emitter();\n  function initialize(overrides) {\n    if (initialized) {\n      return instantiationService;\n    }\n    initialized = true;\n    // Add singletons that were registered after this module loaded\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n      if (!serviceCollection.get(id)) {\n        serviceCollection.set(id, descriptor);\n      }\n    }\n    // Initialize the service collection with the overrides, but only if the\n    // service was not instantiated in the meantime.\n    for (const serviceId in overrides) {\n      if (overrides.hasOwnProperty(serviceId)) {\n        const serviceIdentifier = createDecorator(serviceId);\n        const r = serviceCollection.get(serviceIdentifier);\n        if (r instanceof SyncDescriptor) {\n          serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n        }\n      }\n    }\n    // Instantiate all editor features\n    const editorFeatures = getEditorFeatures();\n    for (const feature of editorFeatures) {\n      try {\n        instantiationService.createInstance(feature);\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    onDidInitialize.fire();\n    return instantiationService;\n  }\n  StandaloneServices.initialize = initialize;\n  /**\n   * Executes callback once services are initialized.\n   */\n  function withServices(callback) {\n    if (initialized) {\n      return callback();\n    }\n    const disposable = new DisposableStore();\n    const listener = disposable.add(onDidInitialize.event(() => {\n      listener.dispose();\n      disposable.add(callback());\n    }));\n    return disposable;\n  }\n  StandaloneServices.withServices = withServices;\n})(StandaloneServices || (StandaloneServices = {}));","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","strings","dom","StandardKeyboardEvent","Emitter","KeyCodeChord","decodeKeybinding","ImmortalReference","toDisposable","DisposableStore","Disposable","combinedDisposable","OS","isLinux","isMacintosh","Severity","URI","IBulkEditService","ResourceEdit","ResourceTextEdit","isDiffEditorConfigurationKey","isEditorConfigurationKey","EditOperation","Position","Pos","Range","IModelService","ITextModelService","ITextResourceConfigurationService","ITextResourcePropertiesService","CommandsRegistry","ICommandService","IConfigurationService","Configuration","ConfigurationModel","ConfigurationChangeEvent","IContextKeyService","IDialogService","createDecorator","IInstantiationService","AbstractKeybindingService","IKeybindingService","KeybindingResolver","KeybindingsRegistry","ResolvedKeybindingItem","USLayoutResolvedKeybinding","ILabelService","INotificationService","NoOpNotification","IEditorProgressService","IProgressService","ITelemetryService","IWorkspaceContextService","WorkspaceFolder","STANDALONE_EDITOR_WORKSPACE_ID","ILayoutService","StandaloneServicesNLS","basename","ICodeEditorService","ConsoleLogger","ILogService","IWorkspaceTrustManagementService","IContextMenuService","IContextViewService","ContextViewService","LanguageService","ContextMenuService","getSingletonServiceDescriptors","registerSingleton","OpenerService","IEditorWorkerService","EditorWorkerService","ILanguageService","MarkerDecorationsService","IMarkerDecorationsService","ModelService","StandaloneQuickInputService","StandaloneThemeService","IStandaloneThemeService","AccessibilityService","IAccessibilityService","IMenuService","MenuService","BrowserClipboardService","IClipboardService","ContextKeyService","SyncDescriptor","InstantiationService","ServiceCollection","IListService","ListService","IMarkerService","MarkerService","IOpenerService","IQuickInputService","IStorageService","InMemoryStorageService","DefaultConfiguration","IAccessibilitySignalService","ILanguageFeaturesService","ILanguageConfigurationService","LogService","getEditorFeatures","onUnexpectedError","IEnvironmentService","mainWindow","ResourceMap","ITreeSitterParserService","StandaloneTreeSitterParserService","SimpleModel","constructor","model","disposed","_onWillDispose","textEditorModel","dispose","fire","StandaloneTextModelService","modelService","createModelReference","resource","getModel","Promise","reject","Error","resolve","StandaloneEditorProgressService","show","NULL_PROGRESS_RUNNER","showWhile","promise","delay","_StandaloneEditorProgressService","done","total","worked","StandaloneProgressService","withProgress","_options","task","onDidCancel","report","StandaloneEnvironmentService","isExtensionDevelopment","isBuilt","StandaloneDialogService","confirm","confirmation","confirmed","doConfirm","message","detail","checkboxChecked","messageText","prompt","result","undefined","_prompt$buttons","_promptButtons$","promptButtons","buttons","cancelButton","push","run","error","type","StandaloneNotificationService","info","notify","severity","Info","warn","Warning","notification","console","log","NO_OP","choices","options","status","None","_StandaloneNotificationService","StandaloneCommandService","instantiationService","_onWillExecuteCommand","_onDidExecuteCommand","onDidExecuteCommand","event","_instantiationService","executeCommand","id","command","getCommand","concat","_len","args","Array","_key","commandId","invokeFunction","apply","handler","err","StandaloneKeybindingService","contextKeyService","commandService","telemetryService","notificationService","logService","codeEditorService","_cachedResolver","_dynamicKeybindings","_domNodeListeners","addContainer","domNode","disposables","add","addDisposableListener","EventType","KEY_DOWN","e","keyEvent","shouldPreventDefault","_dispatch","preventDefault","stopPropagation","KEY_UP","_singleModifierDispatch","DomNodeListeners","removeContainer","domNodeListeners","splice","addCodeEditor","codeEditor","getOption","getContainerDomNode","removeCodeEditor","_register","onCodeEditorAdd","onCodeEditorRemove","listCodeEditors","forEach","addDiffEditor","diffEditor","removeDiffEditor","onDiffEditorAdd","onDiffEditorRemove","listDiffEditors","addDynamicKeybinding","keybinding","when","registerCommand","addDynamicKeybindings","rules","entries","map","rule","_rule$command","commandArgs","weight1","weight2","extensionId","isBuiltinExtension","updateResolver","_onDidUpdateKeybindings","_getResolver","defaults","_toNormalizedKeybindingItems","getDefaultKeybindings","overrides","str","_log","_documentHasFocus","document","hasFocus","items","isDefault","resultLen","item","resolvedKeybindings","resolveKeybinding","resolvedKeybinding","resolveKeyboardEvent","keyboardEvent","chord","ctrlKey","shiftKey","altKey","metaKey","keyCode","isConfigurationOverrides","thing","overrideIdentifier","StandaloneConfigurationService","_onDidChangeConfiguration","onDidChangeConfiguration","defaultConfiguration","_configuration","reload","createEmptyModel","getValue","arg1","arg2","section","updateValues","values","previous","data","toData","changedKeys","entry","value","updateValue","configurationChangeEvent","keys","source","arg3","arg4","inspect","StandaloneResourceConfigurationService","configurationService","languageService","affectedKeys","affectsConfiguration","configuration","position","isIPosition","language","getLanguage","getLanguageIdAtPosition","lineNumber","column","getLanguageId","guessLanguageIdByFilepathOrFirstLine","StandaloneResourcePropertiesService","getEOL","eol","StandaloneTelemetryService","publicLog2","StandaloneWorkspaceContextService","from","scheme","SCHEME","authority","path","workspace","folders","uri","name","index","getWorkspace","getWorkspaceFolder","_StandaloneWorkspaceContextService","updateConfigurationService","isDiffEditor","toUpdate","StandaloneBulkEditService","_modelService","hasPreviewHandler","editsIn","edits","isArray","convert","textEdits","Map","edit","versionId","getVersionId","array","get","set","replaceMove","lift","textEdit","range","text","totalEdits","totalFiles","pushStackElement","pushEditOperations","ariaSummary","format","bulkEditServiceSummary","isApplied","StandaloneUriLabelService","getUriLabel","fsPath","getUriBasenameLabel","StandaloneContextViewService","layoutService","_codeEditorService","showContextView","delegate","container","shadowRoot","getFocusedCodeEditor","getActiveCodeEditor","StandaloneWorkspaceTrustManagementService","_neverEmitter","onDidChangeTrust","isWorkspaceTrusted","StandaloneLanguageService","StandaloneLogService","StandaloneContextMenuService","contextViewService","keybindingService","menuService","configure","blockMouse","standaloneEditorWorkerDescriptor","amdModuleId","esmModuleLocation","label","StandaloneEditorWorkerService","languageConfigurationService","languageFeaturesService","StandaloneAccessbilitySignalService","playSignal","cue","StandaloneServices","serviceCollection","descriptor","serviceId","initialized","initialize","accessor","onDidInitialize","hasOwnProperty","serviceIdentifier","editorFeatures","feature","createInstance","withServices","callback","disposable","listener"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport '../../common/services/semanticTokensStylingService.js';\nimport '../../common/services/languageFeaturesService.js';\nimport '../../browser/services/hoverService/hoverService.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\nimport { IAccessibilitySignalService } from '../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { ITreeSitterParserService } from '../../common/services/treeSitterParserService.js';\nimport { StandaloneTreeSitterParserService } from './standaloneTreeSitterService.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    static { this.NULL_PROGRESS_RUNNER = {\n        done: () => { },\n        total: () => { },\n        worked: () => { }\n    }; }\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    async showWhile(promise, delay) {\n        await promise;\n    }\n}\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneEnvironmentService {\n    constructor() {\n        this.isExtensionDevelopment = false;\n        this.isBuilt = false;\n    }\n}\nclass StandaloneDialogService {\n    async confirm(confirmation) {\n        const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\n        return {\n            confirmed,\n            checkboxChecked: false // unsupported\n        };\n    }\n    doConfirm(message, detail) {\n        let messageText = message;\n        if (detail) {\n            messageText = messageText + '\\n\\n' + detail;\n        }\n        return mainWindow.confirm(messageText);\n    }\n    async prompt(prompt) {\n        let result = undefined;\n        const confirmed = this.doConfirm(prompt.message, prompt.detail);\n        if (confirmed) {\n            const promptButtons = [...(prompt.buttons ?? [])];\n            if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\n                promptButtons.push(prompt.cancelButton);\n            }\n            result = await promptButtons[0]?.run({ checkboxChecked: false });\n        }\n        return { result };\n    }\n    async error(message, detail) {\n        await this.prompt({ type: Severity.Error, message, detail });\n    }\n}\nexport class StandaloneNotificationService {\n    static { this.NO_OP = new NoOpNotification(); }\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    prompt(severity, message, choices, options) {\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(command, keybinding, handler, when) {\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n                keybinding,\n                command,\n                when\n            }]));\n    }\n    addDynamicKeybindings(rules) {\n        const entries = rules.map((rule) => {\n            const keybinding = decodeKeybinding(rule.keybinding, OS);\n            return {\n                keybinding,\n                command: rule.command ?? null,\n                commandArgs: rule.commandArgs,\n                when: rule.when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            };\n        });\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n        this.updateResolver();\n        return toDisposable(() => {\n            // Search the first entry and remove them all since they will be contiguous\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                if (this._dynamicKeybindings[i] === entries[0]) {\n                    this._dynamicKeybindings.splice(i, entries.length);\n                    this.updateResolver();\n                    return;\n                }\n            }\n        });\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return mainWindow.document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\n        return new USLayoutResolvedKeybinding([chord], OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nlet StandaloneConfigurationService = class StandaloneConfigurationService {\n    constructor(logService) {\n        this.logService = logService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        const defaultConfiguration = new DefaultConfiguration(logService);\n        this._configuration = new Configuration(defaultConfiguration.reload(), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), new ResourceMap(), ConfigurationModel.createEmptyModel(logService), new ResourceMap(), logService);\n        defaultConfiguration.dispose();\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration, undefined, this.logService);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n};\nStandaloneConfigurationService = __decorate([\n    __param(0, ILogService)\n], StandaloneConfigurationService);\nexport { StandaloneConfigurationService };\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService, modelService, languageService) {\n        this.configurationService = configurationService;\n        this.modelService = modelService;\n        this.languageService = languageService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        const language = resource ? this.getLanguage(resource, position) : undefined;\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue({\n                resource,\n                overrideIdentifier: language\n            });\n        }\n        return this.configurationService.getValue(section, {\n            resource,\n            overrideIdentifier: language\n        });\n    }\n    getLanguage(resource, position) {\n        const model = this.modelService.getModel(resource);\n        if (model) {\n            return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\n        }\n        return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService),\n    __param(1, IModelService),\n    __param(2, ILanguageService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog2() { }\n}\nclass StandaloneWorkspaceContextService {\n    static { this.SCHEME = 'inmemory'; }\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: STANDALONE_EDITOR_WORKSPACE_ID, folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    async apply(editsIn, _options) {\n        const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\n        const textEdits = new Map();\n        for (const edit of edits) {\n            if (!(edit instanceof ResourceTextEdit)) {\n                throw new Error('bad edit - only text edits are supported');\n            }\n            const model = this._modelService.getModel(edit.resource);\n            if (!model) {\n                throw new Error('bad edit - model not found');\n            }\n            if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                throw new Error('bad state - model changed in the meantime');\n            }\n            let array = textEdits.get(model);\n            if (!array) {\n                array = [];\n                textEdits.set(model, array);\n            }\n            array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n        }\n        let totalEdits = 0;\n        let totalFiles = 0;\n        for (const [model, edits] of textEdits) {\n            model.pushStackElement();\n            model.pushEditOperations([], edits, () => []);\n            model.pushStackElement();\n            totalFiles += 1;\n            totalEdits += edits.length;\n        }\n        return {\n            ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\n            isApplied: totalEdits > 0\n        };\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], StandaloneContextMenuService);\nexport const standaloneEditorWorkerDescriptor = {\n    amdModuleId: 'vs/editor/common/services/editorSimpleWorker',\n    esmModuleLocation: undefined,\n    label: 'editorWorkerService'\n};\nlet StandaloneEditorWorkerService = class StandaloneEditorWorkerService extends EditorWorkerService {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super(standaloneEditorWorkerDescriptor, modelService, configurationService, logService, languageConfigurationService, languageFeaturesService);\n    }\n};\nStandaloneEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], StandaloneEditorWorkerService);\nclass StandaloneAccessbilitySignalService {\n    async playSignal(cue, options) {\n    }\n}\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorWorkerService, StandaloneEditorWorkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilitySignalService, StandaloneAccessbilitySignalService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITreeSitterParserService, StandaloneTreeSitterParserService, 0 /* InstantiationType.Eager */);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        if (!initialized) {\n            initialize({});\n        }\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    const onDidInitialize = new Emitter();\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        // Instantiate all editor features\n        const editorFeatures = getEditorFeatures();\n        for (const feature of editorFeatures) {\n            try {\n                instantiationService.createInstance(feature);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        onDidInitialize.fire();\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n    /**\n     * Executes callback once services are initialized.\n     */\n    function withServices(callback) {\n        if (initialized) {\n            return callback();\n        }\n        const disposable = new DisposableStore();\n        const listener = disposable.add(onDidInitialize.event(() => {\n            listener.dispose();\n            disposable.add(callback());\n        }));\n        return disposable;\n    }\n    StandaloneServices.withServices = withServices;\n})(StandaloneServices || (StandaloneServices = {}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}