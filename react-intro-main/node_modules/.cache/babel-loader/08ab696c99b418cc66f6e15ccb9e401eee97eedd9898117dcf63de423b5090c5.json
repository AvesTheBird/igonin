{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport './hover.css';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { HoverAction, HoverWidget as BaseHoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { MarkdownRenderer, openLinkFromMarkdown } from '../../widget/markdownRenderer/browser/markdownRenderer.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { localize } from '../../../../nls.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nconst $ = dom.$;\nlet HoverWidget = class HoverWidget extends Widget {\n  get _targetWindow() {\n    return dom.getWindow(this._target.targetElements[0]);\n  }\n  get _targetDocumentElement() {\n    return dom.getWindow(this._target.targetElements[0]).document.documentElement;\n  }\n  get isDisposed() {\n    return this._isDisposed;\n  }\n  get isMouseIn() {\n    return this._lockMouseTracker.isMouseIn;\n  }\n  get domNode() {\n    return this._hover.containerDomNode;\n  }\n  get onDispose() {\n    return this._onDispose.event;\n  }\n  get onRequestLayout() {\n    return this._onRequestLayout.event;\n  }\n  get anchor() {\n    return this._hoverPosition === 2 /* HoverPosition.BELOW */ ? 0 /* AnchorPosition.BELOW */ : 1 /* AnchorPosition.ABOVE */;\n  }\n  get x() {\n    return this._x;\n  }\n  get y() {\n    return this._y;\n  }\n  /**\n   * Whether the hover is \"locked\" by holding the alt/option key. When locked, the hover will not\n   * hide and can be hovered regardless of whether the `hideOnHover` hover option is set.\n   */\n  get isLocked() {\n    return this._isLocked;\n  }\n  set isLocked(value) {\n    if (this._isLocked === value) {\n      return;\n    }\n    this._isLocked = value;\n    this._hoverContainer.classList.toggle('locked', this._isLocked);\n  }\n  constructor(options, _keybindingService, _configurationService, _openerService, _instantiationService, _accessibilityService) {\n    var _options$appearance, _options$appearance2, _options$appearance3, _options$position, _options$position$hov, _options$position2, _options$appearance4;\n    super();\n    this._keybindingService = _keybindingService;\n    this._configurationService = _configurationService;\n    this._openerService = _openerService;\n    this._instantiationService = _instantiationService;\n    this._accessibilityService = _accessibilityService;\n    this._messageListeners = new DisposableStore();\n    this._isDisposed = false;\n    this._forcePosition = false;\n    this._x = 0;\n    this._y = 0;\n    this._isLocked = false;\n    this._enableFocusTraps = false;\n    this._addedFocusTrap = false;\n    this._onDispose = this._register(new Emitter());\n    this._onRequestLayout = this._register(new Emitter());\n    this._linkHandler = options.linkHandler || (url => {\n      return openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n    });\n    this._target = 'targetElements' in options.target ? options.target : new ElementHoverTarget(options.target);\n    this._hoverPointer = (_options$appearance = options.appearance) !== null && _options$appearance !== void 0 && _options$appearance.showPointer ? $('div.workbench-hover-pointer') : undefined;\n    this._hover = this._register(new BaseHoverWidget());\n    this._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n    if ((_options$appearance2 = options.appearance) !== null && _options$appearance2 !== void 0 && _options$appearance2.compact) {\n      this._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n    }\n    if ((_options$appearance3 = options.appearance) !== null && _options$appearance3 !== void 0 && _options$appearance3.skipFadeInAnimation) {\n      this._hover.containerDomNode.classList.add('skip-fade-in');\n    }\n    if (options.additionalClasses) {\n      this._hover.containerDomNode.classList.add(...options.additionalClasses);\n    }\n    if ((_options$position = options.position) !== null && _options$position !== void 0 && _options$position.forcePosition) {\n      this._forcePosition = true;\n    }\n    if (options.trapFocus) {\n      this._enableFocusTraps = true;\n    }\n    this._hoverPosition = (_options$position$hov = (_options$position2 = options.position) === null || _options$position2 === void 0 ? void 0 : _options$position2.hoverPosition) !== null && _options$position$hov !== void 0 ? _options$position$hov : 3 /* HoverPosition.ABOVE */;\n    // Don't allow mousedown out of the widget, otherwise preventDefault will call and text will\n    // not be selected.\n    this.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n    // Hide hover on escape\n    this.onkeydown(this._hover.containerDomNode, e => {\n      if (e.equals(9 /* KeyCode.Escape */)) {\n        this.dispose();\n      }\n    });\n    // Hide when the window loses focus\n    this._register(dom.addDisposableListener(this._targetWindow, 'blur', () => this.dispose()));\n    const rowElement = $('div.hover-row.markdown-hover');\n    const contentsElement = $('div.hover-contents');\n    if (typeof options.content === 'string') {\n      contentsElement.textContent = options.content;\n      contentsElement.style.whiteSpace = 'pre-wrap';\n    } else if (dom.isHTMLElement(options.content)) {\n      contentsElement.appendChild(options.content);\n      contentsElement.classList.add('html-hover-contents');\n    } else {\n      const markdown = options.content;\n      const mdRenderer = this._instantiationService.createInstance(MarkdownRenderer, {\n        codeBlockFontFamily: this._configurationService.getValue('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily\n      });\n      const {\n        element\n      } = mdRenderer.render(markdown, {\n        actionHandler: {\n          callback: content => this._linkHandler(content),\n          disposables: this._messageListeners\n        },\n        asyncRenderCallback: () => {\n          contentsElement.classList.add('code-hover-contents');\n          this.layout();\n          // This changes the dimensions of the hover so trigger a layout\n          this._onRequestLayout.fire();\n        }\n      });\n      contentsElement.appendChild(element);\n    }\n    rowElement.appendChild(contentsElement);\n    this._hover.contentsDomNode.appendChild(rowElement);\n    if (options.actions && options.actions.length > 0) {\n      const statusBarElement = $('div.hover-row.status-bar');\n      const actionsElement = $('div.actions');\n      options.actions.forEach(action => {\n        const keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        HoverAction.render(actionsElement, {\n          label: action.label,\n          commandId: action.commandId,\n          run: e => {\n            action.run(e);\n            this.dispose();\n          },\n          iconClass: action.iconClass\n        }, keybindingLabel);\n      });\n      statusBarElement.appendChild(actionsElement);\n      this._hover.containerDomNode.appendChild(statusBarElement);\n    }\n    this._hoverContainer = $('div.workbench-hover-container');\n    if (this._hoverPointer) {\n      this._hoverContainer.appendChild(this._hoverPointer);\n    }\n    this._hoverContainer.appendChild(this._hover.containerDomNode);\n    // Determine whether to hide on hover\n    let hideOnHover;\n    if (options.actions && options.actions.length > 0) {\n      // If there are actions, require hover so they can be accessed\n      hideOnHover = false;\n    } else {\n      var _options$persistence;\n      if (((_options$persistence = options.persistence) === null || _options$persistence === void 0 ? void 0 : _options$persistence.hideOnHover) === undefined) {\n        // When unset, will default to true when it's a string or when it's markdown that\n        // appears to have a link using a naive check for '](' and '</a>'\n        hideOnHover = typeof options.content === 'string' || isMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n      } else {\n        // It's set explicitly\n        hideOnHover = options.persistence.hideOnHover;\n      }\n    }\n    // Show the hover hint if needed\n    if ((_options$appearance4 = options.appearance) !== null && _options$appearance4 !== void 0 && _options$appearance4.showHoverHint) {\n      const statusBarElement = $('div.hover-row.status-bar');\n      const infoElement = $('div.info');\n      infoElement.textContent = localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt');\n      statusBarElement.appendChild(infoElement);\n      this._hover.containerDomNode.appendChild(statusBarElement);\n    }\n    const mouseTrackerTargets = [...this._target.targetElements];\n    if (!hideOnHover) {\n      mouseTrackerTargets.push(this._hoverContainer);\n    }\n    const mouseTracker = this._register(new CompositeMouseTracker(mouseTrackerTargets));\n    this._register(mouseTracker.onMouseOut(() => {\n      if (!this._isLocked) {\n        this.dispose();\n      }\n    }));\n    // Setup another mouse tracker when hideOnHover is set in order to track the hover as well\n    // when it is locked. This ensures the hover will hide on mouseout after alt has been\n    // released to unlock the element.\n    if (hideOnHover) {\n      const mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n      this._lockMouseTracker = this._register(new CompositeMouseTracker(mouseTracker2Targets));\n      this._register(this._lockMouseTracker.onMouseOut(() => {\n        if (!this._isLocked) {\n          this.dispose();\n        }\n      }));\n    } else {\n      this._lockMouseTracker = mouseTracker;\n    }\n  }\n  addFocusTrap() {\n    if (!this._enableFocusTraps || this._addedFocusTrap) {\n      return;\n    }\n    this._addedFocusTrap = true;\n    // Add a hover tab loop if the hover has at least one element with a valid tabIndex\n    const firstContainerFocusElement = this._hover.containerDomNode;\n    const lastContainerFocusElement = this.findLastFocusableChild(this._hover.containerDomNode);\n    if (lastContainerFocusElement) {\n      const beforeContainerFocusElement = dom.prepend(this._hoverContainer, $('div'));\n      const afterContainerFocusElement = dom.append(this._hoverContainer, $('div'));\n      beforeContainerFocusElement.tabIndex = 0;\n      afterContainerFocusElement.tabIndex = 0;\n      this._register(dom.addDisposableListener(afterContainerFocusElement, 'focus', e => {\n        firstContainerFocusElement.focus();\n        e.preventDefault();\n      }));\n      this._register(dom.addDisposableListener(beforeContainerFocusElement, 'focus', e => {\n        lastContainerFocusElement.focus();\n        e.preventDefault();\n      }));\n    }\n  }\n  findLastFocusableChild(root) {\n    if (root.hasChildNodes()) {\n      for (let i = 0; i < root.childNodes.length; i++) {\n        const node = root.childNodes.item(root.childNodes.length - i - 1);\n        if (node.nodeType === node.ELEMENT_NODE) {\n          const parsedNode = node;\n          if (typeof parsedNode.tabIndex === 'number' && parsedNode.tabIndex >= 0) {\n            return parsedNode;\n          }\n        }\n        const recursivelyFoundElement = this.findLastFocusableChild(node);\n        if (recursivelyFoundElement) {\n          return recursivelyFoundElement;\n        }\n      }\n    }\n    return undefined;\n  }\n  render(container) {\n    var _this$_keybindingServ;\n    container.appendChild(this._hoverContainer);\n    const hoverFocused = this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement);\n    const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_this$_keybindingServ = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _this$_keybindingServ === void 0 ? void 0 : _this$_keybindingServ.getAriaLabel());\n    if (accessibleViewHint) {\n      status(accessibleViewHint);\n    }\n    this.layout();\n    this.addFocusTrap();\n  }\n  layout() {\n    this._hover.containerDomNode.classList.remove('right-aligned');\n    this._hover.contentsDomNode.style.maxHeight = '';\n    const getZoomAccountedBoundingClientRect = e => {\n      const zoom = dom.getDomNodeZoomLevel(e);\n      const boundingRect = e.getBoundingClientRect();\n      return {\n        top: boundingRect.top * zoom,\n        bottom: boundingRect.bottom * zoom,\n        right: boundingRect.right * zoom,\n        left: boundingRect.left * zoom\n      };\n    };\n    const targetBounds = this._target.targetElements.map(e => getZoomAccountedBoundingClientRect(e));\n    const {\n      top,\n      right,\n      bottom,\n      left\n    } = targetBounds[0];\n    const width = right - left;\n    const height = bottom - top;\n    const targetRect = {\n      top,\n      right,\n      bottom,\n      left,\n      width,\n      height,\n      center: {\n        x: left + width / 2,\n        y: top + height / 2\n      }\n    };\n    // These calls adjust the position depending on spacing.\n    this.adjustHorizontalHoverPosition(targetRect);\n    this.adjustVerticalHoverPosition(targetRect);\n    // This call limits the maximum height of the hover.\n    this.adjustHoverMaxHeight(targetRect);\n    // Offset the hover position if there is a pointer so it aligns with the target element\n    this._hoverContainer.style.padding = '';\n    this._hoverContainer.style.margin = '';\n    if (this._hoverPointer) {\n      switch (this._hoverPosition) {\n        case 1 /* HoverPosition.RIGHT */:\n          targetRect.left += 3 /* Constants.PointerSize */;\n          targetRect.right += 3 /* Constants.PointerSize */;\n          this._hoverContainer.style.paddingLeft = \"\".concat(3 /* Constants.PointerSize */, \"px\");\n          this._hoverContainer.style.marginLeft = \"\".concat(-3 /* Constants.PointerSize */, \"px\");\n          break;\n        case 0 /* HoverPosition.LEFT */:\n          targetRect.left -= 3 /* Constants.PointerSize */;\n          targetRect.right -= 3 /* Constants.PointerSize */;\n          this._hoverContainer.style.paddingRight = \"\".concat(3 /* Constants.PointerSize */, \"px\");\n          this._hoverContainer.style.marginRight = \"\".concat(-3 /* Constants.PointerSize */, \"px\");\n          break;\n        case 2 /* HoverPosition.BELOW */:\n          targetRect.top += 3 /* Constants.PointerSize */;\n          targetRect.bottom += 3 /* Constants.PointerSize */;\n          this._hoverContainer.style.paddingTop = \"\".concat(3 /* Constants.PointerSize */, \"px\");\n          this._hoverContainer.style.marginTop = \"\".concat(-3 /* Constants.PointerSize */, \"px\");\n          break;\n        case 3 /* HoverPosition.ABOVE */:\n          targetRect.top -= 3 /* Constants.PointerSize */;\n          targetRect.bottom -= 3 /* Constants.PointerSize */;\n          this._hoverContainer.style.paddingBottom = \"\".concat(3 /* Constants.PointerSize */, \"px\");\n          this._hoverContainer.style.marginBottom = \"\".concat(-3 /* Constants.PointerSize */, \"px\");\n          break;\n      }\n      targetRect.center.x = targetRect.left + width / 2;\n      targetRect.center.y = targetRect.top + height / 2;\n    }\n    this.computeXCordinate(targetRect);\n    this.computeYCordinate(targetRect);\n    if (this._hoverPointer) {\n      // reset\n      this._hoverPointer.classList.remove('top');\n      this._hoverPointer.classList.remove('left');\n      this._hoverPointer.classList.remove('right');\n      this._hoverPointer.classList.remove('bottom');\n      this.setHoverPointerPosition(targetRect);\n    }\n    this._hover.onContentsChanged();\n  }\n  computeXCordinate(target) {\n    const hoverWidth = this._hover.containerDomNode.clientWidth + 2 /* Constants.HoverBorderWidth */;\n    if (this._target.x !== undefined) {\n      this._x = this._target.x;\n    } else if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n      this._x = target.right;\n    } else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n      this._x = target.left - hoverWidth;\n    } else {\n      if (this._hoverPointer) {\n        this._x = target.center.x - this._hover.containerDomNode.clientWidth / 2;\n      } else {\n        this._x = target.left;\n      }\n      // Hover is going beyond window towards right end\n      if (this._x + hoverWidth >= this._targetDocumentElement.clientWidth) {\n        this._hover.containerDomNode.classList.add('right-aligned');\n        this._x = Math.max(this._targetDocumentElement.clientWidth - hoverWidth - 2 /* Constants.HoverWindowEdgeMargin */, this._targetDocumentElement.clientLeft);\n      }\n    }\n    // Hover is going beyond window towards left end\n    if (this._x < this._targetDocumentElement.clientLeft) {\n      this._x = target.left + 2 /* Constants.HoverWindowEdgeMargin */;\n    }\n  }\n  computeYCordinate(target) {\n    if (this._target.y !== undefined) {\n      this._y = this._target.y;\n    } else if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n      this._y = target.top;\n    } else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n      this._y = target.bottom - 2;\n    } else {\n      if (this._hoverPointer) {\n        this._y = target.center.y + this._hover.containerDomNode.clientHeight / 2;\n      } else {\n        this._y = target.bottom;\n      }\n    }\n    // Hover on bottom is going beyond window\n    if (this._y > this._targetWindow.innerHeight) {\n      this._y = target.bottom;\n    }\n  }\n  adjustHorizontalHoverPosition(target) {\n    // Do not adjust horizontal hover position if x cordiante is provided\n    if (this._target.x !== undefined) {\n      return;\n    }\n    const hoverPointerOffset = this._hoverPointer ? 3 /* Constants.PointerSize */ : 0;\n    // When force position is enabled, restrict max width\n    if (this._forcePosition) {\n      const padding = hoverPointerOffset + 2 /* Constants.HoverBorderWidth */;\n      if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n        this._hover.containerDomNode.style.maxWidth = \"\".concat(this._targetDocumentElement.clientWidth - target.right - padding, \"px\");\n      } else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n        this._hover.containerDomNode.style.maxWidth = \"\".concat(target.left - padding, \"px\");\n      }\n      return;\n    }\n    // Position hover on right to target\n    if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n      const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n      // Hover on the right is going beyond window.\n      if (roomOnRight < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n        const roomOnLeft = target.left;\n        // There's enough room on the left, flip the hover position\n        if (roomOnLeft >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n          this._hoverPosition = 0 /* HoverPosition.LEFT */;\n        }\n        // Hover on the left would go beyond window too\n        else {\n          this._hoverPosition = 2 /* HoverPosition.BELOW */;\n        }\n      }\n    }\n    // Position hover on left to target\n    else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n      const roomOnLeft = target.left;\n      // Hover on the left is going beyond window.\n      if (roomOnLeft < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n        const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n        // There's enough room on the right, flip the hover position\n        if (roomOnRight >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n          this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n        }\n        // Hover on the right would go beyond window too\n        else {\n          this._hoverPosition = 2 /* HoverPosition.BELOW */;\n        }\n      }\n      // Hover on the left is going beyond window.\n      if (target.left - this._hover.containerDomNode.clientWidth - hoverPointerOffset <= this._targetDocumentElement.clientLeft) {\n        this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n      }\n    }\n  }\n  adjustVerticalHoverPosition(target) {\n    // Do not adjust vertical hover position if the y coordinate is provided\n    // or the position is forced\n    if (this._target.y !== undefined || this._forcePosition) {\n      return;\n    }\n    const hoverPointerOffset = this._hoverPointer ? 3 /* Constants.PointerSize */ : 0;\n    // Position hover on top of the target\n    if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n      // Hover on top is going beyond window\n      if (target.top - this._hover.containerDomNode.clientHeight - hoverPointerOffset < 0) {\n        this._hoverPosition = 2 /* HoverPosition.BELOW */;\n      }\n    }\n    // Position hover below the target\n    else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n      // Hover on bottom is going beyond window\n      if (target.bottom + this._hover.containerDomNode.clientHeight + hoverPointerOffset > this._targetWindow.innerHeight) {\n        this._hoverPosition = 3 /* HoverPosition.ABOVE */;\n      }\n    }\n  }\n  adjustHoverMaxHeight(target) {\n    let maxHeight = this._targetWindow.innerHeight / 2;\n    // When force position is enabled, restrict max height\n    if (this._forcePosition) {\n      const padding = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0) + 2 /* Constants.HoverBorderWidth */;\n      if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n        maxHeight = Math.min(maxHeight, target.top - padding);\n      } else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n        maxHeight = Math.min(maxHeight, this._targetWindow.innerHeight - target.bottom - padding);\n      }\n    }\n    this._hover.containerDomNode.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    if (this._hover.contentsDomNode.clientHeight < this._hover.contentsDomNode.scrollHeight) {\n      // Add padding for a vertical scrollbar\n      const extraRightPadding = \"\".concat(this._hover.scrollbar.options.verticalScrollbarSize, \"px\");\n      if (this._hover.contentsDomNode.style.paddingRight !== extraRightPadding) {\n        this._hover.contentsDomNode.style.paddingRight = extraRightPadding;\n      }\n    }\n  }\n  setHoverPointerPosition(target) {\n    if (!this._hoverPointer) {\n      return;\n    }\n    switch (this._hoverPosition) {\n      case 0 /* HoverPosition.LEFT */:\n      case 1 /* HoverPosition.RIGHT */:\n        {\n          this._hoverPointer.classList.add(this._hoverPosition === 0 /* HoverPosition.LEFT */ ? 'right' : 'left');\n          const hoverHeight = this._hover.containerDomNode.clientHeight;\n          // If hover is taller than target, then show the pointer at the center of target\n          if (hoverHeight > target.height) {\n            this._hoverPointer.style.top = \"\".concat(target.center.y - (this._y - hoverHeight) - 3 /* Constants.PointerSize */, \"px\");\n          }\n          // Otherwise show the pointer at the center of hover\n          else {\n            this._hoverPointer.style.top = \"\".concat(Math.round(hoverHeight / 2) - 3 /* Constants.PointerSize */, \"px\");\n          }\n          break;\n        }\n      case 3 /* HoverPosition.ABOVE */:\n      case 2 /* HoverPosition.BELOW */:\n        {\n          this._hoverPointer.classList.add(this._hoverPosition === 3 /* HoverPosition.ABOVE */ ? 'bottom' : 'top');\n          const hoverWidth = this._hover.containerDomNode.clientWidth;\n          // Position pointer at the center of the hover\n          let pointerLeftPosition = Math.round(hoverWidth / 2) - 3 /* Constants.PointerSize */;\n          // If pointer goes beyond target then position it at the center of the target\n          const pointerX = this._x + pointerLeftPosition;\n          if (pointerX < target.left || pointerX > target.right) {\n            pointerLeftPosition = target.center.x - this._x - 3 /* Constants.PointerSize */;\n          }\n          this._hoverPointer.style.left = \"\".concat(pointerLeftPosition, \"px\");\n          break;\n        }\n    }\n  }\n  focus() {\n    this._hover.containerDomNode.focus();\n  }\n  dispose() {\n    if (!this._isDisposed) {\n      this._onDispose.fire();\n      this._hoverContainer.remove();\n      this._messageListeners.dispose();\n      this._target.dispose();\n      super.dispose();\n    }\n    this._isDisposed = true;\n  }\n};\nHoverWidget = __decorate([__param(1, IKeybindingService), __param(2, IConfigurationService), __param(3, IOpenerService), __param(4, IInstantiationService), __param(5, IAccessibilityService)], HoverWidget);\nexport { HoverWidget };\nclass CompositeMouseTracker extends Widget {\n  get onMouseOut() {\n    return this._onMouseOut.event;\n  }\n  get isMouseIn() {\n    return this._isMouseIn;\n  }\n  constructor(_elements) {\n    super();\n    this._elements = _elements;\n    this._isMouseIn = true;\n    this._onMouseOut = this._register(new Emitter());\n    this._elements.forEach(n => this.onmouseover(n, () => this._onTargetMouseOver(n)));\n    this._elements.forEach(n => this.onmouseleave(n, () => this._onTargetMouseLeave(n)));\n  }\n  _onTargetMouseOver(target) {\n    this._isMouseIn = true;\n    this._clearEvaluateMouseStateTimeout(target);\n  }\n  _onTargetMouseLeave(target) {\n    this._isMouseIn = false;\n    this._evaluateMouseState(target);\n  }\n  _evaluateMouseState(target) {\n    this._clearEvaluateMouseStateTimeout(target);\n    // Evaluate whether the mouse is still outside asynchronously such that other mouse targets\n    // have the opportunity to first their mouse in event.\n    this._mouseTimeout = dom.getWindow(target).setTimeout(() => this._fireIfMouseOutside(), 0);\n  }\n  _clearEvaluateMouseStateTimeout(target) {\n    if (this._mouseTimeout) {\n      dom.getWindow(target).clearTimeout(this._mouseTimeout);\n      this._mouseTimeout = undefined;\n    }\n  }\n  _fireIfMouseOutside() {\n    if (!this._isMouseIn) {\n      this._onMouseOut.fire();\n    }\n  }\n}\nclass ElementHoverTarget {\n  constructor(_element) {\n    this._element = _element;\n    this.targetElements = [this._element];\n  }\n  dispose() {}\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","DisposableStore","Emitter","dom","IKeybindingService","IConfigurationService","EDITOR_FONT_DEFAULTS","HoverAction","HoverWidget","BaseHoverWidget","getHoverAccessibleViewHint","Widget","IOpenerService","IInstantiationService","MarkdownRenderer","openLinkFromMarkdown","isMarkdownString","localize","isMacintosh","IAccessibilityService","status","$","_targetWindow","getWindow","_target","targetElements","_targetDocumentElement","document","documentElement","isDisposed","_isDisposed","isMouseIn","_lockMouseTracker","domNode","_hover","containerDomNode","onDispose","_onDispose","event","onRequestLayout","_onRequestLayout","anchor","_hoverPosition","x","_x","y","_y","isLocked","_isLocked","value","_hoverContainer","classList","toggle","constructor","options","_keybindingService","_configurationService","_openerService","_instantiationService","_accessibilityService","_options$appearance","_options$appearance2","_options$appearance3","_options$position","_options$position$hov","_options$position2","_options$appearance4","_messageListeners","_forcePosition","_enableFocusTraps","_addedFocusTrap","_register","_linkHandler","linkHandler","url","content","isTrusted","undefined","ElementHoverTarget","_hoverPointer","appearance","showPointer","add","compact","skipFadeInAnimation","additionalClasses","position","forcePosition","trapFocus","hoverPosition","onmousedown","e","stopPropagation","onkeydown","equals","dispose","addDisposableListener","rowElement","contentsElement","textContent","style","whiteSpace","isHTMLElement","appendChild","markdown","mdRenderer","createInstance","codeBlockFontFamily","getValue","fontFamily","element","render","actionHandler","callback","disposables","asyncRenderCallback","layout","fire","contentsDomNode","actions","statusBarElement","actionsElement","forEach","action","keybinding","lookupKeybinding","commandId","keybindingLabel","getLabel","label","run","iconClass","hideOnHover","_options$persistence","persistence","includes","showHoverHint","infoElement","mouseTrackerTargets","push","mouseTracker","CompositeMouseTracker","onMouseOut","mouseTracker2Targets","addFocusTrap","firstContainerFocusElement","lastContainerFocusElement","findLastFocusableChild","beforeContainerFocusElement","prepend","afterContainerFocusElement","append","tabIndex","focus","preventDefault","root","hasChildNodes","childNodes","node","item","nodeType","ELEMENT_NODE","parsedNode","recursivelyFoundElement","container","_this$_keybindingServ","hoverFocused","contains","ownerDocument","activeElement","accessibleViewHint","isScreenReaderOptimized","getAriaLabel","remove","maxHeight","getZoomAccountedBoundingClientRect","zoom","getDomNodeZoomLevel","boundingRect","getBoundingClientRect","top","bottom","right","left","targetBounds","map","width","height","targetRect","center","adjustHorizontalHoverPosition","adjustVerticalHoverPosition","adjustHoverMaxHeight","padding","margin","paddingLeft","concat","marginLeft","paddingRight","marginRight","paddingTop","marginTop","paddingBottom","marginBottom","computeXCordinate","computeYCordinate","setHoverPointerPosition","onContentsChanged","hoverWidth","clientWidth","Math","max","clientLeft","clientHeight","innerHeight","hoverPointerOffset","maxWidth","roomOnRight","roomOnLeft","min","scrollHeight","extraRightPadding","scrollbar","verticalScrollbarSize","hoverHeight","round","pointerLeftPosition","pointerX","_onMouseOut","_isMouseIn","_elements","n","onmouseover","_onTargetMouseOver","onmouseleave","_onTargetMouseLeave","_clearEvaluateMouseStateTimeout","_evaluateMouseState","_mouseTimeout","setTimeout","_fireIfMouseOutside","clearTimeout","_element"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/hoverWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './hover.css';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { HoverAction, HoverWidget as BaseHoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { MarkdownRenderer, openLinkFromMarkdown } from '../../widget/markdownRenderer/browser/markdownRenderer.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { localize } from '../../../../nls.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nconst $ = dom.$;\nlet HoverWidget = class HoverWidget extends Widget {\n    get _targetWindow() {\n        return dom.getWindow(this._target.targetElements[0]);\n    }\n    get _targetDocumentElement() {\n        return dom.getWindow(this._target.targetElements[0]).document.documentElement;\n    }\n    get isDisposed() { return this._isDisposed; }\n    get isMouseIn() { return this._lockMouseTracker.isMouseIn; }\n    get domNode() { return this._hover.containerDomNode; }\n    get onDispose() { return this._onDispose.event; }\n    get onRequestLayout() { return this._onRequestLayout.event; }\n    get anchor() { return this._hoverPosition === 2 /* HoverPosition.BELOW */ ? 0 /* AnchorPosition.BELOW */ : 1 /* AnchorPosition.ABOVE */; }\n    get x() { return this._x; }\n    get y() { return this._y; }\n    /**\n     * Whether the hover is \"locked\" by holding the alt/option key. When locked, the hover will not\n     * hide and can be hovered regardless of whether the `hideOnHover` hover option is set.\n     */\n    get isLocked() { return this._isLocked; }\n    set isLocked(value) {\n        if (this._isLocked === value) {\n            return;\n        }\n        this._isLocked = value;\n        this._hoverContainer.classList.toggle('locked', this._isLocked);\n    }\n    constructor(options, _keybindingService, _configurationService, _openerService, _instantiationService, _accessibilityService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._configurationService = _configurationService;\n        this._openerService = _openerService;\n        this._instantiationService = _instantiationService;\n        this._accessibilityService = _accessibilityService;\n        this._messageListeners = new DisposableStore();\n        this._isDisposed = false;\n        this._forcePosition = false;\n        this._x = 0;\n        this._y = 0;\n        this._isLocked = false;\n        this._enableFocusTraps = false;\n        this._addedFocusTrap = false;\n        this._onDispose = this._register(new Emitter());\n        this._onRequestLayout = this._register(new Emitter());\n        this._linkHandler = options.linkHandler || (url => {\n            return openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n        });\n        this._target = 'targetElements' in options.target ? options.target : new ElementHoverTarget(options.target);\n        this._hoverPointer = options.appearance?.showPointer ? $('div.workbench-hover-pointer') : undefined;\n        this._hover = this._register(new BaseHoverWidget());\n        this._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n        if (options.appearance?.compact) {\n            this._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n        }\n        if (options.appearance?.skipFadeInAnimation) {\n            this._hover.containerDomNode.classList.add('skip-fade-in');\n        }\n        if (options.additionalClasses) {\n            this._hover.containerDomNode.classList.add(...options.additionalClasses);\n        }\n        if (options.position?.forcePosition) {\n            this._forcePosition = true;\n        }\n        if (options.trapFocus) {\n            this._enableFocusTraps = true;\n        }\n        this._hoverPosition = options.position?.hoverPosition ?? 3 /* HoverPosition.ABOVE */;\n        // Don't allow mousedown out of the widget, otherwise preventDefault will call and text will\n        // not be selected.\n        this.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n        // Hide hover on escape\n        this.onkeydown(this._hover.containerDomNode, e => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.dispose();\n            }\n        });\n        // Hide when the window loses focus\n        this._register(dom.addDisposableListener(this._targetWindow, 'blur', () => this.dispose()));\n        const rowElement = $('div.hover-row.markdown-hover');\n        const contentsElement = $('div.hover-contents');\n        if (typeof options.content === 'string') {\n            contentsElement.textContent = options.content;\n            contentsElement.style.whiteSpace = 'pre-wrap';\n        }\n        else if (dom.isHTMLElement(options.content)) {\n            contentsElement.appendChild(options.content);\n            contentsElement.classList.add('html-hover-contents');\n        }\n        else {\n            const markdown = options.content;\n            const mdRenderer = this._instantiationService.createInstance(MarkdownRenderer, { codeBlockFontFamily: this._configurationService.getValue('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily });\n            const { element } = mdRenderer.render(markdown, {\n                actionHandler: {\n                    callback: (content) => this._linkHandler(content),\n                    disposables: this._messageListeners\n                },\n                asyncRenderCallback: () => {\n                    contentsElement.classList.add('code-hover-contents');\n                    this.layout();\n                    // This changes the dimensions of the hover so trigger a layout\n                    this._onRequestLayout.fire();\n                }\n            });\n            contentsElement.appendChild(element);\n        }\n        rowElement.appendChild(contentsElement);\n        this._hover.contentsDomNode.appendChild(rowElement);\n        if (options.actions && options.actions.length > 0) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const actionsElement = $('div.actions');\n            options.actions.forEach(action => {\n                const keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n                const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n                HoverAction.render(actionsElement, {\n                    label: action.label,\n                    commandId: action.commandId,\n                    run: e => {\n                        action.run(e);\n                        this.dispose();\n                    },\n                    iconClass: action.iconClass\n                }, keybindingLabel);\n            });\n            statusBarElement.appendChild(actionsElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        this._hoverContainer = $('div.workbench-hover-container');\n        if (this._hoverPointer) {\n            this._hoverContainer.appendChild(this._hoverPointer);\n        }\n        this._hoverContainer.appendChild(this._hover.containerDomNode);\n        // Determine whether to hide on hover\n        let hideOnHover;\n        if (options.actions && options.actions.length > 0) {\n            // If there are actions, require hover so they can be accessed\n            hideOnHover = false;\n        }\n        else {\n            if (options.persistence?.hideOnHover === undefined) {\n                // When unset, will default to true when it's a string or when it's markdown that\n                // appears to have a link using a naive check for '](' and '</a>'\n                hideOnHover = typeof options.content === 'string' ||\n                    isMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n            }\n            else {\n                // It's set explicitly\n                hideOnHover = options.persistence.hideOnHover;\n            }\n        }\n        // Show the hover hint if needed\n        if (options.appearance?.showHoverHint) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const infoElement = $('div.info');\n            infoElement.textContent = localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt');\n            statusBarElement.appendChild(infoElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        const mouseTrackerTargets = [...this._target.targetElements];\n        if (!hideOnHover) {\n            mouseTrackerTargets.push(this._hoverContainer);\n        }\n        const mouseTracker = this._register(new CompositeMouseTracker(mouseTrackerTargets));\n        this._register(mouseTracker.onMouseOut(() => {\n            if (!this._isLocked) {\n                this.dispose();\n            }\n        }));\n        // Setup another mouse tracker when hideOnHover is set in order to track the hover as well\n        // when it is locked. This ensures the hover will hide on mouseout after alt has been\n        // released to unlock the element.\n        if (hideOnHover) {\n            const mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n            this._lockMouseTracker = this._register(new CompositeMouseTracker(mouseTracker2Targets));\n            this._register(this._lockMouseTracker.onMouseOut(() => {\n                if (!this._isLocked) {\n                    this.dispose();\n                }\n            }));\n        }\n        else {\n            this._lockMouseTracker = mouseTracker;\n        }\n    }\n    addFocusTrap() {\n        if (!this._enableFocusTraps || this._addedFocusTrap) {\n            return;\n        }\n        this._addedFocusTrap = true;\n        // Add a hover tab loop if the hover has at least one element with a valid tabIndex\n        const firstContainerFocusElement = this._hover.containerDomNode;\n        const lastContainerFocusElement = this.findLastFocusableChild(this._hover.containerDomNode);\n        if (lastContainerFocusElement) {\n            const beforeContainerFocusElement = dom.prepend(this._hoverContainer, $('div'));\n            const afterContainerFocusElement = dom.append(this._hoverContainer, $('div'));\n            beforeContainerFocusElement.tabIndex = 0;\n            afterContainerFocusElement.tabIndex = 0;\n            this._register(dom.addDisposableListener(afterContainerFocusElement, 'focus', (e) => {\n                firstContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n            this._register(dom.addDisposableListener(beforeContainerFocusElement, 'focus', (e) => {\n                lastContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n        }\n    }\n    findLastFocusableChild(root) {\n        if (root.hasChildNodes()) {\n            for (let i = 0; i < root.childNodes.length; i++) {\n                const node = root.childNodes.item(root.childNodes.length - i - 1);\n                if (node.nodeType === node.ELEMENT_NODE) {\n                    const parsedNode = node;\n                    if (typeof parsedNode.tabIndex === 'number' && parsedNode.tabIndex >= 0) {\n                        return parsedNode;\n                    }\n                }\n                const recursivelyFoundElement = this.findLastFocusableChild(node);\n                if (recursivelyFoundElement) {\n                    return recursivelyFoundElement;\n                }\n            }\n        }\n        return undefined;\n    }\n    render(container) {\n        container.appendChild(this._hoverContainer);\n        const hoverFocused = this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement);\n        const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), this._keybindingService.lookupKeybinding('editor.action.accessibleView')?.getAriaLabel());\n        if (accessibleViewHint) {\n            status(accessibleViewHint);\n        }\n        this.layout();\n        this.addFocusTrap();\n    }\n    layout() {\n        this._hover.containerDomNode.classList.remove('right-aligned');\n        this._hover.contentsDomNode.style.maxHeight = '';\n        const getZoomAccountedBoundingClientRect = (e) => {\n            const zoom = dom.getDomNodeZoomLevel(e);\n            const boundingRect = e.getBoundingClientRect();\n            return {\n                top: boundingRect.top * zoom,\n                bottom: boundingRect.bottom * zoom,\n                right: boundingRect.right * zoom,\n                left: boundingRect.left * zoom,\n            };\n        };\n        const targetBounds = this._target.targetElements.map(e => getZoomAccountedBoundingClientRect(e));\n        const { top, right, bottom, left } = targetBounds[0];\n        const width = right - left;\n        const height = bottom - top;\n        const targetRect = {\n            top, right, bottom, left, width, height,\n            center: {\n                x: left + (width / 2),\n                y: top + (height / 2)\n            }\n        };\n        // These calls adjust the position depending on spacing.\n        this.adjustHorizontalHoverPosition(targetRect);\n        this.adjustVerticalHoverPosition(targetRect);\n        // This call limits the maximum height of the hover.\n        this.adjustHoverMaxHeight(targetRect);\n        // Offset the hover position if there is a pointer so it aligns with the target element\n        this._hoverContainer.style.padding = '';\n        this._hoverContainer.style.margin = '';\n        if (this._hoverPointer) {\n            switch (this._hoverPosition) {\n                case 1 /* HoverPosition.RIGHT */:\n                    targetRect.left += 3 /* Constants.PointerSize */;\n                    targetRect.right += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingLeft = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginLeft = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 0 /* HoverPosition.LEFT */:\n                    targetRect.left -= 3 /* Constants.PointerSize */;\n                    targetRect.right -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingRight = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginRight = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 2 /* HoverPosition.BELOW */:\n                    targetRect.top += 3 /* Constants.PointerSize */;\n                    targetRect.bottom += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingTop = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginTop = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 3 /* HoverPosition.ABOVE */:\n                    targetRect.top -= 3 /* Constants.PointerSize */;\n                    targetRect.bottom -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingBottom = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginBottom = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n            }\n            targetRect.center.x = targetRect.left + (width / 2);\n            targetRect.center.y = targetRect.top + (height / 2);\n        }\n        this.computeXCordinate(targetRect);\n        this.computeYCordinate(targetRect);\n        if (this._hoverPointer) {\n            // reset\n            this._hoverPointer.classList.remove('top');\n            this._hoverPointer.classList.remove('left');\n            this._hoverPointer.classList.remove('right');\n            this._hoverPointer.classList.remove('bottom');\n            this.setHoverPointerPosition(targetRect);\n        }\n        this._hover.onContentsChanged();\n    }\n    computeXCordinate(target) {\n        const hoverWidth = this._hover.containerDomNode.clientWidth + 2 /* Constants.HoverBorderWidth */;\n        if (this._target.x !== undefined) {\n            this._x = this._target.x;\n        }\n        else if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            this._x = target.right;\n        }\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            this._x = target.left - hoverWidth;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._x = target.center.x - (this._hover.containerDomNode.clientWidth / 2);\n            }\n            else {\n                this._x = target.left;\n            }\n            // Hover is going beyond window towards right end\n            if (this._x + hoverWidth >= this._targetDocumentElement.clientWidth) {\n                this._hover.containerDomNode.classList.add('right-aligned');\n                this._x = Math.max(this._targetDocumentElement.clientWidth - hoverWidth - 2 /* Constants.HoverWindowEdgeMargin */, this._targetDocumentElement.clientLeft);\n            }\n        }\n        // Hover is going beyond window towards left end\n        if (this._x < this._targetDocumentElement.clientLeft) {\n            this._x = target.left + 2 /* Constants.HoverWindowEdgeMargin */;\n        }\n    }\n    computeYCordinate(target) {\n        if (this._target.y !== undefined) {\n            this._y = this._target.y;\n        }\n        else if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            this._y = target.top;\n        }\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            this._y = target.bottom - 2;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._y = target.center.y + (this._hover.containerDomNode.clientHeight / 2);\n            }\n            else {\n                this._y = target.bottom;\n            }\n        }\n        // Hover on bottom is going beyond window\n        if (this._y > this._targetWindow.innerHeight) {\n            this._y = target.bottom;\n        }\n    }\n    adjustHorizontalHoverPosition(target) {\n        // Do not adjust horizontal hover position if x cordiante is provided\n        if (this._target.x !== undefined) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // When force position is enabled, restrict max width\n        if (this._forcePosition) {\n            const padding = hoverPointerOffset + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n                this._hover.containerDomNode.style.maxWidth = `${this._targetDocumentElement.clientWidth - target.right - padding}px`;\n            }\n            else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n                this._hover.containerDomNode.style.maxWidth = `${target.left - padding}px`;\n            }\n            return;\n        }\n        // Position hover on right to target\n        if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n            // Hover on the right is going beyond window.\n            if (roomOnRight < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnLeft = target.left;\n                // There's enough room on the left, flip the hover position\n                if (roomOnLeft >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 0 /* HoverPosition.LEFT */;\n                }\n                // Hover on the left would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n        }\n        // Position hover on left to target\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            const roomOnLeft = target.left;\n            // Hover on the left is going beyond window.\n            if (roomOnLeft < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n                // There's enough room on the right, flip the hover position\n                if (roomOnRight >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n                }\n                // Hover on the right would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n            // Hover on the left is going beyond window.\n            if (target.left - this._hover.containerDomNode.clientWidth - hoverPointerOffset <= this._targetDocumentElement.clientLeft) {\n                this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n            }\n        }\n    }\n    adjustVerticalHoverPosition(target) {\n        // Do not adjust vertical hover position if the y coordinate is provided\n        // or the position is forced\n        if (this._target.y !== undefined || this._forcePosition) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // Position hover on top of the target\n        if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            // Hover on top is going beyond window\n            if (target.top - this._hover.containerDomNode.clientHeight - hoverPointerOffset < 0) {\n                this._hoverPosition = 2 /* HoverPosition.BELOW */;\n            }\n        }\n        // Position hover below the target\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            // Hover on bottom is going beyond window\n            if (target.bottom + this._hover.containerDomNode.clientHeight + hoverPointerOffset > this._targetWindow.innerHeight) {\n                this._hoverPosition = 3 /* HoverPosition.ABOVE */;\n            }\n        }\n    }\n    adjustHoverMaxHeight(target) {\n        let maxHeight = this._targetWindow.innerHeight / 2;\n        // When force position is enabled, restrict max height\n        if (this._forcePosition) {\n            const padding = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0) + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n                maxHeight = Math.min(maxHeight, target.top - padding);\n            }\n            else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n                maxHeight = Math.min(maxHeight, this._targetWindow.innerHeight - target.bottom - padding);\n            }\n        }\n        this._hover.containerDomNode.style.maxHeight = `${maxHeight}px`;\n        if (this._hover.contentsDomNode.clientHeight < this._hover.contentsDomNode.scrollHeight) {\n            // Add padding for a vertical scrollbar\n            const extraRightPadding = `${this._hover.scrollbar.options.verticalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingRight !== extraRightPadding) {\n                this._hover.contentsDomNode.style.paddingRight = extraRightPadding;\n            }\n        }\n    }\n    setHoverPointerPosition(target) {\n        if (!this._hoverPointer) {\n            return;\n        }\n        switch (this._hoverPosition) {\n            case 0 /* HoverPosition.LEFT */:\n            case 1 /* HoverPosition.RIGHT */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 0 /* HoverPosition.LEFT */ ? 'right' : 'left');\n                const hoverHeight = this._hover.containerDomNode.clientHeight;\n                // If hover is taller than target, then show the pointer at the center of target\n                if (hoverHeight > target.height) {\n                    this._hoverPointer.style.top = `${target.center.y - (this._y - hoverHeight) - 3 /* Constants.PointerSize */}px`;\n                }\n                // Otherwise show the pointer at the center of hover\n                else {\n                    this._hoverPointer.style.top = `${Math.round((hoverHeight / 2)) - 3 /* Constants.PointerSize */}px`;\n                }\n                break;\n            }\n            case 3 /* HoverPosition.ABOVE */:\n            case 2 /* HoverPosition.BELOW */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 3 /* HoverPosition.ABOVE */ ? 'bottom' : 'top');\n                const hoverWidth = this._hover.containerDomNode.clientWidth;\n                // Position pointer at the center of the hover\n                let pointerLeftPosition = Math.round((hoverWidth / 2)) - 3 /* Constants.PointerSize */;\n                // If pointer goes beyond target then position it at the center of the target\n                const pointerX = this._x + pointerLeftPosition;\n                if (pointerX < target.left || pointerX > target.right) {\n                    pointerLeftPosition = target.center.x - this._x - 3 /* Constants.PointerSize */;\n                }\n                this._hoverPointer.style.left = `${pointerLeftPosition}px`;\n                break;\n            }\n        }\n    }\n    focus() {\n        this._hover.containerDomNode.focus();\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            this._onDispose.fire();\n            this._hoverContainer.remove();\n            this._messageListeners.dispose();\n            this._target.dispose();\n            super.dispose();\n        }\n        this._isDisposed = true;\n    }\n};\nHoverWidget = __decorate([\n    __param(1, IKeybindingService),\n    __param(2, IConfigurationService),\n    __param(3, IOpenerService),\n    __param(4, IInstantiationService),\n    __param(5, IAccessibilityService)\n], HoverWidget);\nexport { HoverWidget };\nclass CompositeMouseTracker extends Widget {\n    get onMouseOut() { return this._onMouseOut.event; }\n    get isMouseIn() { return this._isMouseIn; }\n    constructor(_elements) {\n        super();\n        this._elements = _elements;\n        this._isMouseIn = true;\n        this._onMouseOut = this._register(new Emitter());\n        this._elements.forEach(n => this.onmouseover(n, () => this._onTargetMouseOver(n)));\n        this._elements.forEach(n => this.onmouseleave(n, () => this._onTargetMouseLeave(n)));\n    }\n    _onTargetMouseOver(target) {\n        this._isMouseIn = true;\n        this._clearEvaluateMouseStateTimeout(target);\n    }\n    _onTargetMouseLeave(target) {\n        this._isMouseIn = false;\n        this._evaluateMouseState(target);\n    }\n    _evaluateMouseState(target) {\n        this._clearEvaluateMouseStateTimeout(target);\n        // Evaluate whether the mouse is still outside asynchronously such that other mouse targets\n        // have the opportunity to first their mouse in event.\n        this._mouseTimeout = dom.getWindow(target).setTimeout(() => this._fireIfMouseOutside(), 0);\n    }\n    _clearEvaluateMouseStateTimeout(target) {\n        if (this._mouseTimeout) {\n            dom.getWindow(target).clearTimeout(this._mouseTimeout);\n            this._mouseTimeout = undefined;\n        }\n    }\n    _fireIfMouseOutside() {\n        if (!this._isMouseIn) {\n            this._onMouseOut.fire();\n        }\n    }\n}\nclass ElementHoverTarget {\n    constructor(_element) {\n        this._element = _element;\n        this.targetElements = [this._element];\n    }\n    dispose() {\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}