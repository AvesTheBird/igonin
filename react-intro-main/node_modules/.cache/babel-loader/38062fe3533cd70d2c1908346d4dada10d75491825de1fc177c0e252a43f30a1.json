{"ast":null,"code":"/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport InternalEvent from '../event/InternalEvent';\nimport EventObject from '../event/EventObject';\n/**\n * Implements a composite undoable edit. Here is an example for a custom change\n * which gets executed via the model:\n *\n * ```javascript\n * function CustomChange(model, name)\n * {\n *   this.model = model;\n *   this.name = name;\n *   this.previous = name;\n * };\n *\n * execute = ()=>\n * {\n *   let tmp = this.model.name;\n *   this.model.name = this.previous;\n *   this.previous = tmp;\n * };\n *\n * let name = prompt('Enter name');\n * graph.model.execute(new CustomChange(graph.model, name));\n * ```\n *\n * Event: mxEvent.EXECUTED\n *\n * Fires between START_EDIT and END_EDIT after an atomic change was executed.\n * The <code>change</code> property contains the change that was executed.\n *\n * Event: mxEvent.START_EDIT\n *\n * Fires before a set of changes will be executed in <undo> or <redo>.\n * This event contains no properties.\n *\n * Event: mxEvent.END_EDIT\n *\n * Fires after a set of changeswas executed in <undo> or <redo>.\n * This event contains no properties.\n *\n * Constructor: mxUndoableEdit\n *\n * Constructs a new undoable edit for the given source.\n */\nclass UndoableEdit {\n  constructor(source) {\n    let significant = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    /**\n     * Array that contains the changes that make up this edit. The changes are\n     * expected to either have an undo and redo function, or an execute\n     * function. Default is an empty array.\n     */\n    this.changes = [];\n    /**\n     * Specifies if the undoable change is significant.\n     * Default is true.\n     */\n    this.significant = true;\n    /**\n     * Specifies if this edit has been undone. Default is false.\n     */\n    this.undone = false;\n    /**\n     * Specifies if this edit has been redone. Default is false.\n     */\n    this.redone = false;\n    this.source = source;\n    this.changes = [];\n    this.significant = significant;\n  }\n  /**\n   * Returns true if the this edit contains no changes.\n   */\n  isEmpty() {\n    return this.changes.length === 0;\n  }\n  /**\n   * Returns <significant>.\n   */\n  isSignificant() {\n    return this.significant;\n  }\n  /**\n   * Adds the specified change to this edit. The change is an object that is\n   * expected to either have an undo and redo, or an execute function.\n   */\n  add(change) {\n    this.changes.push(change);\n  }\n  /**\n   * Hook to notify any listeners of the changes after an <undo> or <redo>\n   * has been carried out. This implementation is empty.\n   */\n  notify() {\n    return;\n  }\n  /**\n   * Hook to free resources after the edit has been removed from the command\n   * history. This implementation is empty.\n   */\n  die() {\n    return;\n  }\n  /**\n   * Undoes all changes in this edit.\n   */\n  undo() {\n    if (!this.undone) {\n      this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));\n      const count = this.changes.length;\n      for (let i = count - 1; i >= 0; i--) {\n        const change = this.changes[i];\n        if (change.execute) {\n          change.execute();\n        } else if (change.undo) {\n          change.undo();\n        }\n        // New global executed event\n        this.source.fireEvent(new EventObject(InternalEvent.EXECUTED, {\n          change\n        }));\n      }\n      this.undone = true;\n      this.redone = false;\n      this.source.fireEvent(new EventObject(InternalEvent.END_EDIT));\n    }\n    this.notify();\n  }\n  /**\n   * Redoes all changes in this edit.\n   */\n  redo() {\n    if (!this.redone) {\n      this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));\n      const count = this.changes.length;\n      for (let i = 0; i < count; i += 1) {\n        const change = this.changes[i];\n        if (change.execute != null) {\n          change.execute();\n        } else if (change.redo != null) {\n          change.redo();\n        }\n        // New global executed event\n        this.source.fireEvent(new EventObject(InternalEvent.EXECUTED, {\n          change\n        }));\n      }\n      this.undone = false;\n      this.redone = true;\n      this.source.fireEvent(new EventObject(InternalEvent.END_EDIT));\n    }\n    this.notify();\n  }\n}\nexport default UndoableEdit;","map":{"version":3,"names":["InternalEvent","EventObject","UndoableEdit","constructor","source","significant","arguments","length","undefined","changes","undone","redone","isEmpty","isSignificant","add","change","push","notify","die","undo","fireEvent","START_EDIT","count","i","execute","EXECUTED","END_EDIT","redo"],"sources":["D:/OSPanel/domains/old/react/react-intro/node_modules/@maxgraph/core/dist/view/undoable_changes/UndoableEdit.js"],"sourcesContent":["/*\nCopyright 2021-present The maxGraph project Contributors\nCopyright (c) 2006-2015, JGraph Ltd\nCopyright (c) 2006-2015, Gaudenz Alder\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport InternalEvent from '../event/InternalEvent';\nimport EventObject from '../event/EventObject';\n/**\n * Implements a composite undoable edit. Here is an example for a custom change\n * which gets executed via the model:\n *\n * ```javascript\n * function CustomChange(model, name)\n * {\n *   this.model = model;\n *   this.name = name;\n *   this.previous = name;\n * };\n *\n * execute = ()=>\n * {\n *   let tmp = this.model.name;\n *   this.model.name = this.previous;\n *   this.previous = tmp;\n * };\n *\n * let name = prompt('Enter name');\n * graph.model.execute(new CustomChange(graph.model, name));\n * ```\n *\n * Event: mxEvent.EXECUTED\n *\n * Fires between START_EDIT and END_EDIT after an atomic change was executed.\n * The <code>change</code> property contains the change that was executed.\n *\n * Event: mxEvent.START_EDIT\n *\n * Fires before a set of changes will be executed in <undo> or <redo>.\n * This event contains no properties.\n *\n * Event: mxEvent.END_EDIT\n *\n * Fires after a set of changeswas executed in <undo> or <redo>.\n * This event contains no properties.\n *\n * Constructor: mxUndoableEdit\n *\n * Constructs a new undoable edit for the given source.\n */\nclass UndoableEdit {\n    constructor(source, significant = true) {\n        /**\n         * Array that contains the changes that make up this edit. The changes are\n         * expected to either have an undo and redo function, or an execute\n         * function. Default is an empty array.\n         */\n        this.changes = [];\n        /**\n         * Specifies if the undoable change is significant.\n         * Default is true.\n         */\n        this.significant = true;\n        /**\n         * Specifies if this edit has been undone. Default is false.\n         */\n        this.undone = false;\n        /**\n         * Specifies if this edit has been redone. Default is false.\n         */\n        this.redone = false;\n        this.source = source;\n        this.changes = [];\n        this.significant = significant;\n    }\n    /**\n     * Returns true if the this edit contains no changes.\n     */\n    isEmpty() {\n        return this.changes.length === 0;\n    }\n    /**\n     * Returns <significant>.\n     */\n    isSignificant() {\n        return this.significant;\n    }\n    /**\n     * Adds the specified change to this edit. The change is an object that is\n     * expected to either have an undo and redo, or an execute function.\n     */\n    add(change) {\n        this.changes.push(change);\n    }\n    /**\n     * Hook to notify any listeners of the changes after an <undo> or <redo>\n     * has been carried out. This implementation is empty.\n     */\n    notify() {\n        return;\n    }\n    /**\n     * Hook to free resources after the edit has been removed from the command\n     * history. This implementation is empty.\n     */\n    die() {\n        return;\n    }\n    /**\n     * Undoes all changes in this edit.\n     */\n    undo() {\n        if (!this.undone) {\n            this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));\n            const count = this.changes.length;\n            for (let i = count - 1; i >= 0; i--) {\n                const change = this.changes[i];\n                if (change.execute) {\n                    change.execute();\n                }\n                else if (change.undo) {\n                    change.undo();\n                }\n                // New global executed event\n                this.source.fireEvent(new EventObject(InternalEvent.EXECUTED, { change }));\n            }\n            this.undone = true;\n            this.redone = false;\n            this.source.fireEvent(new EventObject(InternalEvent.END_EDIT));\n        }\n        this.notify();\n    }\n    /**\n     * Redoes all changes in this edit.\n     */\n    redo() {\n        if (!this.redone) {\n            this.source.fireEvent(new EventObject(InternalEvent.START_EDIT));\n            const count = this.changes.length;\n            for (let i = 0; i < count; i += 1) {\n                const change = this.changes[i];\n                if (change.execute != null) {\n                    change.execute();\n                }\n                else if (change.redo != null) {\n                    change.redo();\n                }\n                // New global executed event\n                this.source.fireEvent(new EventObject(InternalEvent.EXECUTED, { change }));\n            }\n            this.undone = false;\n            this.redone = true;\n            this.source.fireEvent(new EventObject(InternalEvent.END_EDIT));\n        }\n        this.notify();\n    }\n}\nexport default UndoableEdit;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,wBAAwB;AAClD,OAAOC,WAAW,MAAM,sBAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,YAAY,CAAC;EACfC,WAAWA,CAACC,MAAM,EAAsB;IAAA,IAApBC,WAAW,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAClC;AACR;AACA;AACA;AACA;IACQ,IAAI,CAACG,OAAO,GAAG,EAAE;IACjB;AACR;AACA;AACA;IACQ,IAAI,CAACJ,WAAW,GAAG,IAAI;IACvB;AACR;AACA;IACQ,IAAI,CAACK,MAAM,GAAG,KAAK;IACnB;AACR;AACA;IACQ,IAAI,CAACC,MAAM,GAAG,KAAK;IACnB,IAAI,CAACP,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACK,OAAO,GAAG,EAAE;IACjB,IAAI,CAACJ,WAAW,GAAGA,WAAW;EAClC;EACA;AACJ;AACA;EACIO,OAAOA,CAAA,EAAG;IACN,OAAO,IAAI,CAACH,OAAO,CAACF,MAAM,KAAK,CAAC;EACpC;EACA;AACJ;AACA;EACIM,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACR,WAAW;EAC3B;EACA;AACJ;AACA;AACA;EACIS,GAAGA,CAACC,MAAM,EAAE;IACR,IAAI,CAACN,OAAO,CAACO,IAAI,CAACD,MAAM,CAAC;EAC7B;EACA;AACJ;AACA;AACA;EACIE,MAAMA,CAAA,EAAG;IACL;EACJ;EACA;AACJ;AACA;AACA;EACIC,GAAGA,CAAA,EAAG;IACF;EACJ;EACA;AACJ;AACA;EACIC,IAAIA,CAAA,EAAG;IACH,IAAI,CAAC,IAAI,CAACT,MAAM,EAAE;MACd,IAAI,CAACN,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAACqB,UAAU,CAAC,CAAC;MAChE,MAAMC,KAAK,GAAG,IAAI,CAACb,OAAO,CAACF,MAAM;MACjC,KAAK,IAAIgB,CAAC,GAAGD,KAAK,GAAG,CAAC,EAAEC,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACjC,MAAMR,MAAM,GAAG,IAAI,CAACN,OAAO,CAACc,CAAC,CAAC;QAC9B,IAAIR,MAAM,CAACS,OAAO,EAAE;UAChBT,MAAM,CAACS,OAAO,CAAC,CAAC;QACpB,CAAC,MACI,IAAIT,MAAM,CAACI,IAAI,EAAE;UAClBJ,MAAM,CAACI,IAAI,CAAC,CAAC;QACjB;QACA;QACA,IAAI,CAACf,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAACyB,QAAQ,EAAE;UAAEV;QAAO,CAAC,CAAC,CAAC;MAC9E;MACA,IAAI,CAACL,MAAM,GAAG,IAAI;MAClB,IAAI,CAACC,MAAM,GAAG,KAAK;MACnB,IAAI,CAACP,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAAC0B,QAAQ,CAAC,CAAC;IAClE;IACA,IAAI,CAACT,MAAM,CAAC,CAAC;EACjB;EACA;AACJ;AACA;EACIU,IAAIA,CAAA,EAAG;IACH,IAAI,CAAC,IAAI,CAAChB,MAAM,EAAE;MACd,IAAI,CAACP,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAACqB,UAAU,CAAC,CAAC;MAChE,MAAMC,KAAK,GAAG,IAAI,CAACb,OAAO,CAACF,MAAM;MACjC,KAAK,IAAIgB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,EAAEC,CAAC,IAAI,CAAC,EAAE;QAC/B,MAAMR,MAAM,GAAG,IAAI,CAACN,OAAO,CAACc,CAAC,CAAC;QAC9B,IAAIR,MAAM,CAACS,OAAO,IAAI,IAAI,EAAE;UACxBT,MAAM,CAACS,OAAO,CAAC,CAAC;QACpB,CAAC,MACI,IAAIT,MAAM,CAACY,IAAI,IAAI,IAAI,EAAE;UAC1BZ,MAAM,CAACY,IAAI,CAAC,CAAC;QACjB;QACA;QACA,IAAI,CAACvB,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAACyB,QAAQ,EAAE;UAAEV;QAAO,CAAC,CAAC,CAAC;MAC9E;MACA,IAAI,CAACL,MAAM,GAAG,KAAK;MACnB,IAAI,CAACC,MAAM,GAAG,IAAI;MAClB,IAAI,CAACP,MAAM,CAACgB,SAAS,CAAC,IAAInB,WAAW,CAACD,aAAa,CAAC0B,QAAQ,CAAC,CAAC;IAClE;IACA,IAAI,CAACT,MAAM,CAAC,CAAC;EACjB;AACJ;AACA,eAAef,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}