{"ast":null,"code":"/*\nCopyright 2021-present The maxGraph project Contributors\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport DragSource from '../view/other/DragSource';\nimport Point from '../view/geometry/Point';\nimport { TOOLTIP_VERTICAL_OFFSET } from './Constants';\n/**\n * Configures the given DOM element to act as a drag source for the\n * specified graph. Returns a a new {@link DragSource}. If\n * {@link DragSource#guideEnabled} is enabled then the x and y arguments must\n * be used in funct to match the preview location.\n *\n * Example:\n *\n * ```javascript\n * let funct = (graph, evt, cell, x, y)=>\n * {\n *   if (graph.canImportCell(cell))\n *   {\n *     let parent = graph.getDefaultParent();\n *     let vertex = null;\n *\n *     graph.getDataModel().beginUpdate();\n *     try\n *     {\n *        vertex = graph.insertVertex(parent, null, 'Hello', x, y, 80, 30);\n *     }\n *     finally\n *     {\n *       graph.getDataModel().endUpdate();\n *     }\n *\n *     graph.setSelectionCell(vertex);\n *   }\n * }\n *\n * let img = document.createElement('img');\n * img.setAttribute('src', 'editors/images/rectangle.gif');\n * img.style.position = 'absolute';\n * img.style.left = '0px';\n * img.style.top = '0px';\n * img.style.width = '16px';\n * img.style.height = '16px';\n *\n * let dragImage = img.cloneNode(true);\n * dragImage.style.width = '32px';\n * dragImage.style.height = '32px';\n * mxUtils.makeDraggable(img, graph, funct, dragImage);\n * document.body.appendChild(img);\n * ```\n *\n * @param element DOM element to make draggable.\n * @param graphF {@link Graph} that acts as the drop target or a function that takes a\n * mouse event and returns the current {@link Graph}.\n * @param funct Function to execute on a successful drop.\n * @param dragElement Optional DOM node to be used for the drag preview.\n * @param dx Optional horizontal offset between the cursor and the drag\n * preview.\n * @param dy Optional vertical offset between the cursor and the drag\n * preview.\n * @param autoscroll Optional boolean that specifies if autoscroll should be\n * used. Default is mxGraph.autoscroll.\n * @param scalePreview Optional boolean that specifies if the preview element\n * should be scaled according to the graph scale. If this is true, then\n * the offsets will also be scaled. Default is false.\n * @param highlightDropTargets Optional boolean that specifies if dropTargets\n * should be highlighted. Default is true.\n * @param getDropTarget Optional function to return the drop target for a given\n * location (x, y). Default is mxGraph.getCellAt.\n */\nexport const makeDraggable = function (element, graphF, funct) {\n  let dragElement = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  let dx = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  let dy = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n  let autoscroll = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n  let scalePreview = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n  let highlightDropTargets = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : true;\n  let getDropTarget = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n  const dragSource = new DragSource(element, funct);\n  dragSource.dragOffset = new Point(dx != null ? dx : 0, dy != null ? dy : TOOLTIP_VERTICAL_OFFSET);\n  if (autoscroll != null) {\n    dragSource.autoscroll = autoscroll;\n  }\n  // Cannot enable this by default. This needs to be enabled in the caller\n  // if the funct argument uses the new x- and y-arguments.\n  dragSource.setGuidesEnabled(false);\n  if (highlightDropTargets != null) {\n    dragSource.highlightDropTargets = highlightDropTargets;\n  }\n  // Overrides function to find drop target cell\n  if (getDropTarget != null) {\n    dragSource.getDropTarget = getDropTarget;\n  }\n  // Overrides function to get current graph\n  dragSource.getGraphForEvent = evt => {\n    return typeof graphF === 'function' ? graphF(evt) : graphF;\n  };\n  // Translates switches into dragSource customizations\n  if (dragElement != null) {\n    // @ts-ignore\n    dragSource.createDragElement = () => {\n      return dragElement.cloneNode(true);\n    };\n    if (scalePreview) {\n      dragSource.createPreviewElement = graph => {\n        const elt = dragElement.cloneNode(true);\n        const w = parseInt(elt.style.width);\n        const h = parseInt(elt.style.height);\n        elt.style.width = \"\".concat(Math.round(w * graph.view.scale), \"px\");\n        elt.style.height = \"\".concat(Math.round(h * graph.view.scale), \"px\");\n        return elt;\n      };\n    }\n  }\n  return dragSource;\n};","map":{"version":3,"names":["DragSource","Point","TOOLTIP_VERTICAL_OFFSET","makeDraggable","element","graphF","funct","dragElement","arguments","length","undefined","dx","dy","autoscroll","scalePreview","highlightDropTargets","getDropTarget","dragSource","dragOffset","setGuidesEnabled","getGraphForEvent","evt","createDragElement","cloneNode","createPreviewElement","graph","elt","w","parseInt","style","width","h","height","concat","Math","round","view","scale"],"sources":["D:/ospanel/domains/old/react/react-intro/node_modules/@maxgraph/core/dist/util/gestureUtils.js"],"sourcesContent":["/*\nCopyright 2021-present The maxGraph project Contributors\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport DragSource from '../view/other/DragSource';\nimport Point from '../view/geometry/Point';\nimport { TOOLTIP_VERTICAL_OFFSET } from './Constants';\n/**\n * Configures the given DOM element to act as a drag source for the\n * specified graph. Returns a a new {@link DragSource}. If\n * {@link DragSource#guideEnabled} is enabled then the x and y arguments must\n * be used in funct to match the preview location.\n *\n * Example:\n *\n * ```javascript\n * let funct = (graph, evt, cell, x, y)=>\n * {\n *   if (graph.canImportCell(cell))\n *   {\n *     let parent = graph.getDefaultParent();\n *     let vertex = null;\n *\n *     graph.getDataModel().beginUpdate();\n *     try\n *     {\n *        vertex = graph.insertVertex(parent, null, 'Hello', x, y, 80, 30);\n *     }\n *     finally\n *     {\n *       graph.getDataModel().endUpdate();\n *     }\n *\n *     graph.setSelectionCell(vertex);\n *   }\n * }\n *\n * let img = document.createElement('img');\n * img.setAttribute('src', 'editors/images/rectangle.gif');\n * img.style.position = 'absolute';\n * img.style.left = '0px';\n * img.style.top = '0px';\n * img.style.width = '16px';\n * img.style.height = '16px';\n *\n * let dragImage = img.cloneNode(true);\n * dragImage.style.width = '32px';\n * dragImage.style.height = '32px';\n * mxUtils.makeDraggable(img, graph, funct, dragImage);\n * document.body.appendChild(img);\n * ```\n *\n * @param element DOM element to make draggable.\n * @param graphF {@link Graph} that acts as the drop target or a function that takes a\n * mouse event and returns the current {@link Graph}.\n * @param funct Function to execute on a successful drop.\n * @param dragElement Optional DOM node to be used for the drag preview.\n * @param dx Optional horizontal offset between the cursor and the drag\n * preview.\n * @param dy Optional vertical offset between the cursor and the drag\n * preview.\n * @param autoscroll Optional boolean that specifies if autoscroll should be\n * used. Default is mxGraph.autoscroll.\n * @param scalePreview Optional boolean that specifies if the preview element\n * should be scaled according to the graph scale. If this is true, then\n * the offsets will also be scaled. Default is false.\n * @param highlightDropTargets Optional boolean that specifies if dropTargets\n * should be highlighted. Default is true.\n * @param getDropTarget Optional function to return the drop target for a given\n * location (x, y). Default is mxGraph.getCellAt.\n */\nexport const makeDraggable = (element, graphF, funct, dragElement = null, dx = null, dy = null, autoscroll = null, scalePreview = false, highlightDropTargets = true, getDropTarget = null) => {\n    const dragSource = new DragSource(element, funct);\n    dragSource.dragOffset = new Point(dx != null ? dx : 0, dy != null ? dy : TOOLTIP_VERTICAL_OFFSET);\n    if (autoscroll != null) {\n        dragSource.autoscroll = autoscroll;\n    }\n    // Cannot enable this by default. This needs to be enabled in the caller\n    // if the funct argument uses the new x- and y-arguments.\n    dragSource.setGuidesEnabled(false);\n    if (highlightDropTargets != null) {\n        dragSource.highlightDropTargets = highlightDropTargets;\n    }\n    // Overrides function to find drop target cell\n    if (getDropTarget != null) {\n        dragSource.getDropTarget = getDropTarget;\n    }\n    // Overrides function to get current graph\n    dragSource.getGraphForEvent = (evt) => {\n        return typeof graphF === 'function' ? graphF(evt) : graphF;\n    };\n    // Translates switches into dragSource customizations\n    if (dragElement != null) {\n        // @ts-ignore\n        dragSource.createDragElement = () => {\n            return dragElement.cloneNode(true);\n        };\n        if (scalePreview) {\n            dragSource.createPreviewElement = (graph) => {\n                const elt = dragElement.cloneNode(true);\n                const w = parseInt(elt.style.width);\n                const h = parseInt(elt.style.height);\n                elt.style.width = `${Math.round(w * graph.view.scale)}px`;\n                elt.style.height = `${Math.round(h * graph.view.scale)}px`;\n                return elt;\n            };\n        }\n    }\n    return dragSource;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}