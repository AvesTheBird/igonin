{"ast":null,"code":"'use strict';\n\nconst tt = require('onml/tt.js');\nconst tspan = require('tspan');\nconst textWidth = require('./text-width.js');\nconst findLaneMarkers = require('./find-lane-markers.js');\nconst renderOverUnder = require('./render-over-under.js');\nfunction renderLaneUses(cont, lane) {\n  const res = [];\n  if (cont[1]) {\n    cont[1].map(function (ref, i) {\n      res.push(['use', tt(i * lane.xs, 0, {\n        'xlink:href': '#' + ref\n      })]);\n    });\n    if (cont[2] && cont[2].length) {\n      const labels = findLaneMarkers(cont[1]);\n      if (labels.length) {\n        labels.map(function (label, i) {\n          if (cont[2] && cont[2][i] !== undefined) {\n            res.push(['text', {\n              x: label * lane.xs + lane.xlabel,\n              y: lane.ym,\n              'text-anchor': 'middle',\n              'xml:space': 'preserve'\n            }].concat(tspan.parse(cont[2][i])));\n          }\n        });\n      }\n    }\n  }\n  return res;\n}\nfunction renderWaveLane(content, index, lane) {\n  let xmax = 0;\n  const glengths = [];\n  const res = [];\n  content.map(function (el, j) {\n    const name = el[0][0];\n    if (name) {\n      // check name\n      let xoffset = el[0][1];\n      xoffset = xoffset > 0 ? Math.ceil(2 * xoffset) - 2 * xoffset : -2 * xoffset;\n      res.push(['g', tt(0, lane.y0 + j * lane.yo, {\n        id: 'wavelane_' + j + '_' + index\n      })].concat([['text', {\n        x: lane.tgo,\n        y: lane.ym,\n        class: 'info',\n        'text-anchor': 'end',\n        'xml:space': 'preserve'\n      }].concat(tspan.parse(name))]).concat([['g', tt(xoffset * lane.xs, 0, {\n        id: 'wavelane_draw_' + j + '_' + index\n      })].concat(renderLaneUses(el, lane))]).concat(renderOverUnder(el[3], 'over', lane), renderOverUnder(el[3], 'under', lane)));\n      xmax = Math.max(xmax, (el[1] || []).length);\n      glengths.push(name.textWidth ? name.textWidth : name.charCodeAt ? textWidth(name, 11) : 0);\n    }\n  });\n  // xmax if no xmax_cfg,xmin_cfg, else set to config\n  lane.xmax = Math.min(xmax, lane.xmax_cfg - lane.xmin_cfg);\n  const xgmax = 0;\n  lane.xg = xgmax + 20;\n  return {\n    glengths: glengths,\n    res: res\n  };\n}\nmodule.exports = renderWaveLane;","map":{"version":3,"names":["tt","require","tspan","textWidth","findLaneMarkers","renderOverUnder","renderLaneUses","cont","lane","res","map","ref","i","push","xs","length","labels","label","undefined","x","xlabel","y","ym","concat","parse","renderWaveLane","content","index","xmax","glengths","el","j","name","xoffset","Math","ceil","y0","yo","id","tgo","class","max","charCodeAt","min","xmax_cfg","xmin_cfg","xgmax","xg","module","exports"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/wavedrom/lib/render-wave-lane.js"],"sourcesContent":["'use strict';\n\nconst tt = require('onml/tt.js');\nconst tspan = require('tspan');\nconst textWidth = require('./text-width.js');\nconst findLaneMarkers = require('./find-lane-markers.js');\nconst renderOverUnder = require('./render-over-under.js');\n\nfunction renderLaneUses (cont, lane) {\n    const res = [];\n\n    if (cont[1]) {\n        cont[1].map(function (ref, i) {\n            res.push(['use', tt(i * lane.xs, 0, {'xlink:href': '#' + ref})]);\n        });\n        if (cont[2] && cont[2].length) {\n            const labels = findLaneMarkers(cont[1]);\n            if (labels.length) {\n                labels.map(function (label, i) {\n                    if (cont[2] && (cont[2][i] !== undefined)) {\n                        res.push(['text', {\n                            x: label * lane.xs + lane.xlabel,\n                            y: lane.ym,\n                            'text-anchor': 'middle',\n                            'xml:space': 'preserve'\n                        }].concat(tspan.parse(cont[2][i])));\n                    }\n                });\n            }\n        }\n    }\n    return res;\n}\n\nfunction renderWaveLane (content, index, lane) {\n    let xmax = 0;\n    const glengths = [];\n    const res = [];\n\n    content.map(function (el, j) {\n        const name = el[0][0];\n        if (name) { // check name\n            let xoffset = el[0][1];\n            xoffset = (xoffset > 0)\n                ? (Math.ceil(2 * xoffset) - 2 * xoffset)\n                : (-2 * xoffset);\n\n            res.push(['g', tt(\n                0,\n                lane.y0 + j * lane.yo,\n                {id: 'wavelane_' + j + '_' + index}\n            )]\n                .concat([['text', {\n                    x: lane.tgo,\n                    y: lane.ym,\n                    class: 'info',\n                    'text-anchor': 'end',\n                    'xml:space': 'preserve'\n                }]\n                    .concat(tspan.parse(name))\n                ])\n                .concat([['g', tt(\n                    xoffset * lane.xs,\n                    0,\n                    {id: 'wavelane_draw_' + j + '_' + index}\n                )]\n                    .concat(renderLaneUses(el, lane))\n                ])\n                .concat(\n                    renderOverUnder(el[3], 'over', lane),\n                    renderOverUnder(el[3], 'under', lane)\n                )\n            );\n            xmax = Math.max(xmax, (el[1] || []).length);\n            glengths.push(name.textWidth ? name.textWidth : name.charCodeAt ? textWidth(name, 11) : 0);\n        }\n    });\n    // xmax if no xmax_cfg,xmin_cfg, else set to config\n    lane.xmax = Math.min(xmax, lane.xmax_cfg - lane.xmin_cfg);\n    const xgmax = 0;\n    lane.xg = xgmax + 20;\n    return {glengths: glengths, res: res};\n}\n\nmodule.exports = renderWaveLane;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}