{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const quickFixCommandId = 'editor.action.quickFix';\nexport const autoFixCommandId = 'editor.action.autoFix';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n  static codeActionsPreferredComparator(a, b) {\n    if (a.isPreferred && !b.isPreferred) {\n      return -1;\n    } else if (!a.isPreferred && b.isPreferred) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n  static codeActionsComparator(_ref, _ref2) {\n    let {\n      action: a\n    } = _ref;\n    let {\n      action: b\n    } = _ref2;\n    if (a.isAI && !b.isAI) {\n      return 1;\n    } else if (!a.isAI && b.isAI) {\n      return -1;\n    }\n    if (isNonEmptyArray(a.diagnostics)) {\n      return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n    } else if (isNonEmptyArray(b.diagnostics)) {\n      return 1;\n    } else {\n      return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n    }\n  }\n  constructor(actions, documentation, disposables) {\n    super();\n    this.documentation = documentation;\n    this._register(disposables);\n    this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n    this.validActions = this.allActions.filter(_ref3 => {\n      let {\n        action\n      } = _ref3;\n      return !action.disabled;\n    });\n  }\n  get hasAutoFix() {\n    return this.validActions.some(_ref4 => {\n      let {\n        action: fix\n      } = _ref4;\n      return !!fix.kind && CodeActionKind.QuickFix.contains(new HierarchicalKind(fix.kind)) && !!fix.isPreferred;\n    });\n  }\n  get hasAIFix() {\n    return this.validActions.some(_ref5 => {\n      let {\n        action: fix\n      } = _ref5;\n      return !!fix.isAI;\n    });\n  }\n  get allAIFixes() {\n    return this.validActions.every(_ref6 => {\n      let {\n        action: fix\n      } = _ref6;\n      return !!fix.isAI;\n    });\n  }\n}\nconst emptyCodeActionsResponse = {\n  actions: [],\n  documentation: undefined\n};\nexport async function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n  var _filter$include;\n  const filter = trigger.filter || {};\n  const notebookFilter = {\n    ...filter,\n    excludes: [...(filter.excludes || []), CodeActionKind.Notebook]\n  };\n  const codeActionContext = {\n    only: (_filter$include = filter.include) === null || _filter$include === void 0 ? void 0 : _filter$include.value,\n    trigger: trigger.type\n  };\n  const cts = new TextModelCancellationTokenSource(model, token);\n  // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\n  const excludeNotebookCodeActions = trigger.type === 2 /* languages.CodeActionTriggerType.Auto */;\n  const providers = getCodeActionProviders(registry, model, excludeNotebookCodeActions ? notebookFilter : filter);\n  const disposables = new DisposableStore();\n  const promises = providers.map(async provider => {\n    try {\n      progress.report(provider);\n      const providedCodeActions = await provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n      if (providedCodeActions) {\n        disposables.add(providedCodeActions);\n      }\n      if (cts.token.isCancellationRequested) {\n        return emptyCodeActionsResponse;\n      }\n      const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n      const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n      return {\n        actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n        documentation\n      };\n    } catch (err) {\n      if (isCancellationError(err)) {\n        throw err;\n      }\n      onUnexpectedExternalError(err);\n      return emptyCodeActionsResponse;\n    }\n  });\n  const listener = registry.onDidChange(() => {\n    const newProviders = registry.all(model);\n    if (!equals(newProviders, providers)) {\n      cts.cancel();\n    }\n  });\n  try {\n    const actions = await Promise.all(promises);\n    const allActions = actions.map(x => x.actions).flat();\n    const allDocumentation = [...coalesce(actions.map(x => x.documentation)), ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)];\n    return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n  } finally {\n    listener.dispose();\n    cts.dispose();\n  }\n}\nfunction getCodeActionProviders(registry, model, filter) {\n  return registry.all(model)\n  // Don't include providers that we know will not return code actions of interest\n  .filter(provider => {\n    if (!provider.providedCodeActionKinds) {\n      // We don't know what type of actions this provider will return.\n      return true;\n    }\n    return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new HierarchicalKind(kind)));\n  });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n  if (model && actionsToShow.length) {\n    for (const provider of registry.all(model)) {\n      if (provider._getAdditionalMenuItems) {\n        var _provider$_getAdditio, _trigger$filter;\n        yield* (_provider$_getAdditio = provider._getAdditionalMenuItems) === null || _provider$_getAdditio === void 0 ? void 0 : _provider$_getAdditio.call(provider, {\n          trigger: trigger.type,\n          only: (_trigger$filter = trigger.filter) === null || _trigger$filter === void 0 || (_trigger$filter = _trigger$filter.include) === null || _trigger$filter === void 0 ? void 0 : _trigger$filter.value\n        }, actionsToShow.map(item => item.action));\n      }\n    }\n  }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n  if (!provider.documentation) {\n    return undefined;\n  }\n  const documentation = provider.documentation.map(entry => ({\n    kind: new HierarchicalKind(entry.kind),\n    command: entry.command\n  }));\n  if (only) {\n    let currentBest;\n    for (const entry of documentation) {\n      if (entry.kind.contains(only)) {\n        if (!currentBest) {\n          currentBest = entry;\n        } else {\n          // Take best match\n          if (currentBest.kind.contains(entry.kind)) {\n            currentBest = entry;\n          }\n        }\n      }\n    }\n    if (currentBest) {\n      var _currentBest;\n      return (_currentBest = currentBest) === null || _currentBest === void 0 ? void 0 : _currentBest.command;\n    }\n  }\n  // Otherwise, check to see if any of the provided actions match.\n  for (const action of providedCodeActions) {\n    if (!action.kind) {\n      continue;\n    }\n    for (const entry of documentation) {\n      if (entry.kind.contains(new HierarchicalKind(action.kind))) {\n        return entry.command;\n      }\n    }\n  }\n  return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n  ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n  ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n  ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n  ApplyCodeActionReason[\"FromAILightbulb\"] = \"fromAILightbulb\"; // direct invocation when clicking on the AI lightbulb\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport async function applyCodeAction(accessor, item, codeActionReason, options) {\n  var _item$action$edit;\n  let token = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : CancellationToken.None;\n  const bulkEditService = accessor.get(IBulkEditService);\n  const commandService = accessor.get(ICommandService);\n  const telemetryService = accessor.get(ITelemetryService);\n  const notificationService = accessor.get(INotificationService);\n  telemetryService.publicLog2('codeAction.applyCodeAction', {\n    codeActionTitle: item.action.title,\n    codeActionKind: item.action.kind,\n    codeActionIsPreferred: !!item.action.isPreferred,\n    reason: codeActionReason\n  });\n  await item.resolve(token);\n  if (token.isCancellationRequested) {\n    return;\n  }\n  if ((_item$action$edit = item.action.edit) !== null && _item$action$edit !== void 0 && _item$action$edit.edits.length) {\n    const result = await bulkEditService.apply(item.action.edit, {\n      editor: options === null || options === void 0 ? void 0 : options.editor,\n      label: item.action.title,\n      quotableLabel: item.action.title,\n      code: 'undoredo.codeAction',\n      respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n      showPreview: options === null || options === void 0 ? void 0 : options.preview\n    });\n    if (!result.isApplied) {\n      return;\n    }\n  }\n  if (item.action.command) {\n    try {\n      await commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n    } catch (err) {\n      const message = asMessage(err);\n      notificationService.error(typeof message === 'string' ? message : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n    }\n  }\n}\nfunction asMessage(err) {\n  if (typeof err === 'string') {\n    return err;\n  } else if (err instanceof Error && typeof err.message === 'string') {\n    return err.message;\n  } else {\n    return undefined;\n  }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', async function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n  const {\n    codeActionProvider\n  } = accessor.get(ILanguageFeaturesService);\n  const model = accessor.get(IModelService).getModel(resource);\n  if (!model) {\n    throw illegalArgument();\n  }\n  const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection) ? Selection.liftSelection(rangeOrSelection) : Range.isIRange(rangeOrSelection) ? model.validateRange(rangeOrSelection) : undefined;\n  if (!validatedRangeOrSelection) {\n    throw illegalArgument();\n  }\n  const include = typeof kind === 'string' ? new HierarchicalKind(kind) : undefined;\n  const codeActionSet = await getCodeActions(codeActionProvider, model, validatedRangeOrSelection, {\n    type: 1 /* languages.CodeActionTriggerType.Invoke */,\n    triggerAction: CodeActionTriggerSource.Default,\n    filter: {\n      includeSourceActions: true,\n      include\n    }\n  }, Progress.None, CancellationToken.None);\n  const resolving = [];\n  const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n  for (let i = 0; i < resolveCount; i++) {\n    resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n  }\n  try {\n    await Promise.all(resolving);\n    return codeActionSet.validActions.map(item => item.action);\n  } finally {\n    setTimeout(() => codeActionSet.dispose(), 100);\n  }\n});","map":{"version":3,"names":["coalesce","equals","isNonEmptyArray","CancellationToken","illegalArgument","isCancellationError","onUnexpectedExternalError","Disposable","DisposableStore","URI","IBulkEditService","Range","Selection","ILanguageFeaturesService","IModelService","TextModelCancellationTokenSource","nls","CommandsRegistry","ICommandService","INotificationService","Progress","ITelemetryService","CodeActionItem","CodeActionKind","CodeActionTriggerSource","filtersAction","mayIncludeActionsOfKind","HierarchicalKind","codeActionCommandId","quickFixCommandId","autoFixCommandId","refactorCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","codeActionsPreferredComparator","a","b","isPreferred","codeActionsComparator","_ref","_ref2","action","isAI","diagnostics","constructor","actions","documentation","disposables","_register","allActions","sort","validActions","filter","_ref3","disabled","hasAutoFix","some","_ref4","fix","kind","QuickFix","contains","hasAIFix","_ref5","allAIFixes","every","_ref6","emptyCodeActionsResponse","undefined","getCodeActions","registry","model","rangeOrSelection","trigger","progress","token","_filter$include","notebookFilter","excludes","Notebook","codeActionContext","only","include","value","type","cts","excludeNotebookCodeActions","providers","getCodeActionProviders","promises","map","provider","report","providedCodeActions","provideCodeActions","add","isCancellationRequested","filteredActions","getDocumentationFromProvider","err","listener","onDidChange","newProviders","all","cancel","Promise","x","flat","allDocumentation","getAdditionalDocumentationForShowingActions","dispose","providedCodeActionKinds","actionsToShow","length","_getAdditionalMenuItems","_provider$_getAdditio","_trigger$filter","call","item","entry","command","currentBest","_currentBest","ApplyCodeActionReason","applyCodeAction","accessor","codeActionReason","options","_item$action$edit","arguments","None","bulkEditService","get","commandService","telemetryService","notificationService","publicLog2","codeActionTitle","title","codeActionKind","codeActionIsPreferred","reason","resolve","edit","edits","result","apply","editor","label","quotableLabel","code","respectAutoSaveConfig","OnSave","showPreview","preview","isApplied","executeCommand","id","message","asMessage","error","localize","Error","registerCommand","resource","itemResolveCount","codeActionProvider","getModel","validatedRangeOrSelection","isISelection","liftSelection","isIRange","validateRange","codeActionSet","triggerAction","Default","includeSourceActions","resolving","resolveCount","Math","min","i","push","setTimeout"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const quickFixCommandId = 'editor.action.quickFix';\nexport const autoFixCommandId = 'editor.action.autoFix';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n    static codeActionsPreferredComparator(a, b) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isAI && !b.isAI) {\n            return 1;\n        }\n        else if (!a.isAI && b.isAI) {\n            return -1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n        }\n    }\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new HierarchicalKind(fix.kind)) && !!fix.isPreferred);\n    }\n    get hasAIFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.isAI);\n    }\n    get allAIFixes() {\n        return this.validActions.every(({ action: fix }) => !!fix.isAI);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport async function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    const filter = trigger.filter || {};\n    const notebookFilter = {\n        ...filter,\n        excludes: [...(filter.excludes || []), CodeActionKind.Notebook],\n    };\n    const codeActionContext = {\n        only: filter.include?.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\n    const excludeNotebookCodeActions = (trigger.type === 2 /* languages.CodeActionTriggerType.Auto */);\n    const providers = getCodeActionProviders(registry, model, (excludeNotebookCodeActions) ? notebookFilter : filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map(async (provider) => {\n        try {\n            progress.report(provider);\n            const providedCodeActions = await provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = (providedCodeActions?.actions || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    });\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    try {\n        const actions = await Promise.all(promises);\n        const allActions = actions.map(x => x.actions).flat();\n        const allDocumentation = [\n            ...coalesce(actions.map(x => x.documentation)),\n            ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\n        ];\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    }\n    finally {\n        listener.dispose();\n        cts.dispose();\n    }\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new HierarchicalKind(kind)));\n    });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n    if (model && actionsToShow.length) {\n        for (const provider of registry.all(model)) {\n            if (provider._getAdditionalMenuItems) {\n                yield* provider._getAdditionalMenuItems?.({ trigger: trigger.type, only: trigger.filter?.include?.value }, actionsToShow.map(item => item.action));\n            }\n        }\n    }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new HierarchicalKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest?.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new HierarchicalKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n    ApplyCodeActionReason[\"FromAILightbulb\"] = \"fromAILightbulb\"; // direct invocation when clicking on the AI lightbulb\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport async function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n    const bulkEditService = accessor.get(IBulkEditService);\n    const commandService = accessor.get(ICommandService);\n    const telemetryService = accessor.get(ITelemetryService);\n    const notificationService = accessor.get(INotificationService);\n    telemetryService.publicLog2('codeAction.applyCodeAction', {\n        codeActionTitle: item.action.title,\n        codeActionKind: item.action.kind,\n        codeActionIsPreferred: !!item.action.isPreferred,\n        reason: codeActionReason,\n    });\n    await item.resolve(token);\n    if (token.isCancellationRequested) {\n        return;\n    }\n    if (item.action.edit?.edits.length) {\n        const result = await bulkEditService.apply(item.action.edit, {\n            editor: options?.editor,\n            label: item.action.title,\n            quotableLabel: item.action.title,\n            code: 'undoredo.codeAction',\n            respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n            showPreview: options?.preview,\n        });\n        if (!result.isApplied) {\n            return;\n        }\n    }\n    if (item.action.command) {\n        try {\n            await commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n        }\n        catch (err) {\n            const message = asMessage(err);\n            notificationService.error(typeof message === 'string'\n                ? message\n                : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n        }\n    }\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', async function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n        ? Selection.liftSelection(rangeOrSelection)\n        : Range.isIRange(rangeOrSelection)\n            ? model.validateRange(rangeOrSelection)\n            : undefined;\n    if (!validatedRangeOrSelection) {\n        throw illegalArgument();\n    }\n    const include = typeof kind === 'string' ? new HierarchicalKind(kind) : undefined;\n    const codeActionSet = await getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n    const resolving = [];\n    const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n    for (let i = 0; i < resolveCount; i++) {\n        resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n    }\n    try {\n        await Promise.all(resolving);\n        return codeActionSet.validActions.map(item => item.action);\n    }\n    finally {\n        setTimeout(() => codeActionSet.dispose(), 100);\n    }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}