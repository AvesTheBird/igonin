{"ast":null,"code":"var _RenameCandidateView;\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport * as domFontInfo from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag, NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, nls.localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, nls.localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n  constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n    this._editor = _editor;\n    this._acceptKeybindings = _acceptKeybindings;\n    this._themeService = _themeService;\n    this._keybindingService = _keybindingService;\n    this._logService = _logService;\n    // implement IContentWidget\n    this.allowEditorOverflow = true;\n    this._disposables = new DisposableStore();\n    this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._isEditingRenameCandidate = false;\n    this._nRenameSuggestionsInvocations = 0;\n    this._hadAutomaticRenameSuggestionsInvocation = false;\n    this._candidates = new Set();\n    this._beforeFirstInputFieldEditSW = new StopWatch();\n    this._inputWithButton = new InputWithButton();\n    this._disposables.add(this._inputWithButton);\n    this._editor.addContentWidget(this);\n    this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n        this._updateFont();\n      }\n    }));\n    this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n  }\n  dispose() {\n    this._disposables.dispose();\n    this._editor.removeContentWidget(this);\n  }\n  getId() {\n    return '__renameInputWidget';\n  }\n  getDomNode() {\n    if (!this._domNode) {\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'monaco-editor rename-box';\n      this._domNode.appendChild(this._inputWithButton.domNode);\n      this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n        fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n        onFocusChange: newSymbolName => {\n          this._inputWithButton.input.value = newSymbolName;\n          this._isEditingRenameCandidate = false; // @ulugbekna: reset\n        },\n        onSelectionChange: () => {\n          this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n          this.acceptInput(false); // we don't allow preview with mouse click for now\n        }\n      }));\n      this._disposables.add(this._inputWithButton.onDidInputChange(() => {\n        var _this$_renameCandidat, _this$_timeBeforeFirs, _this$_renameCandidat2, _this$_renameCandidat3;\n        if (((_this$_renameCandidat = this._renameCandidateListView) === null || _this$_renameCandidat === void 0 ? void 0 : _this$_renameCandidat.focusedCandidate) !== undefined) {\n          this._isEditingRenameCandidate = true;\n        }\n        (_this$_timeBeforeFirs = this._timeBeforeFirstInputFieldEdit) !== null && _this$_timeBeforeFirs !== void 0 ? _this$_timeBeforeFirs : this._timeBeforeFirstInputFieldEdit = this._beforeFirstInputFieldEditSW.elapsed();\n        if (((_this$_renameCandidat2 = this._renameCandidateProvidersCts) === null || _this$_renameCandidat2 === void 0 ? void 0 : _this$_renameCandidat2.token.isCancellationRequested) === false) {\n          this._renameCandidateProvidersCts.cancel();\n        }\n        (_this$_renameCandidat3 = this._renameCandidateListView) === null || _this$_renameCandidat3 === void 0 || _this$_renameCandidat3.clearFocus();\n      }));\n      this._label = document.createElement('div');\n      this._label.className = 'rename-label';\n      this._domNode.appendChild(this._label);\n      this._updateFont();\n      this._updateStyles(this._themeService.getColorTheme());\n    }\n    return this._domNode;\n  }\n  _updateStyles(theme) {\n    var _theme$getColor, _theme$getColor2, _theme$getColor3, _theme$getColor4, _border$toString;\n    if (!this._domNode) {\n      return;\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    const widgetBorderColor = theme.getColor(widgetBorder);\n    this._domNode.style.backgroundColor = String((_theme$getColor = theme.getColor(editorWidgetBackground)) !== null && _theme$getColor !== void 0 ? _theme$getColor : '');\n    this._domNode.style.boxShadow = widgetShadowColor ? \" 0 0 8px 2px \".concat(widgetShadowColor) : '';\n    this._domNode.style.border = widgetBorderColor ? \"1px solid \".concat(widgetBorderColor) : '';\n    this._domNode.style.color = String((_theme$getColor2 = theme.getColor(inputForeground)) !== null && _theme$getColor2 !== void 0 ? _theme$getColor2 : '');\n    const border = theme.getColor(inputBorder);\n    this._inputWithButton.domNode.style.backgroundColor = String((_theme$getColor3 = theme.getColor(inputBackground)) !== null && _theme$getColor3 !== void 0 ? _theme$getColor3 : '');\n    this._inputWithButton.input.style.backgroundColor = String((_theme$getColor4 = theme.getColor(inputBackground)) !== null && _theme$getColor4 !== void 0 ? _theme$getColor4 : '');\n    this._inputWithButton.domNode.style.borderWidth = border ? '1px' : '0px';\n    this._inputWithButton.domNode.style.borderStyle = border ? 'solid' : 'none';\n    this._inputWithButton.domNode.style.borderColor = (_border$toString = border === null || border === void 0 ? void 0 : border.toString()) !== null && _border$toString !== void 0 ? _border$toString : 'none';\n  }\n  _updateFont() {\n    if (this._domNode === undefined) {\n      return;\n    }\n    assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n    this._editor.applyFontInfo(this._inputWithButton.input);\n    const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n    this._label.style.fontSize = \"\".concat(this._computeLabelFontSize(fontInfo.fontSize), \"px\");\n  }\n  _computeLabelFontSize(editorFontSize) {\n    return editorFontSize * 0.8;\n  }\n  getPosition() {\n    if (!this._visible) {\n      return null;\n    }\n    if (!this._editor.hasModel() ||\n    // @ulugbekna: shouldn't happen\n    !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n    ) {\n      return null;\n    }\n    const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n    const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n    const cursorBoxTop = this._getTopForPosition();\n    this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n    this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n    const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n    const {\n      totalHeight: candidateViewHeight\n    } = RenameCandidateView.getLayoutInfo({\n      lineHeight\n    });\n    const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */ ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */] : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n    return {\n      position: this._position,\n      preference: positionPreference\n    };\n  }\n  beforeRender() {\n    var _this$_keybindingServ, _this$_keybindingServ2;\n    const [accept, preview] = this._acceptKeybindings;\n    this._label.innerText = nls.localize({\n      key: 'label',\n      comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"']\n    }, \"{0} to Rename, {1} to Preview\", (_this$_keybindingServ = this._keybindingService.lookupKeybinding(accept)) === null || _this$_keybindingServ === void 0 ? void 0 : _this$_keybindingServ.getLabel(), (_this$_keybindingServ2 = this._keybindingService.lookupKeybinding(preview)) === null || _this$_keybindingServ2 === void 0 ? void 0 : _this$_keybindingServ2.getLabel());\n    this._domNode.style.minWidth = \"200px\"; // to prevent from widening when candidates come in\n    return null;\n  }\n  afterRender(position) {\n    // FIXME@ulugbekna: commenting trace log out until we start unmounting the widget from editor properly - https://github.com/microsoft/vscode/issues/226975\n    // this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n    if (position === null) {\n      // cancel rename when input widget isn't rendered anymore\n      this.cancelInput(true, 'afterRender (because position is null)');\n      return;\n    }\n    if (!this._editor.hasModel() ||\n    // shouldn't happen\n    !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n    ) {\n      return;\n    }\n    assertType(this._renameCandidateListView);\n    assertType(this._nPxAvailableAbove !== undefined);\n    assertType(this._nPxAvailableBelow !== undefined);\n    const inputBoxHeight = dom.getTotalHeight(this._inputWithButton.domNode);\n    const labelHeight = dom.getTotalHeight(this._label);\n    let totalHeightAvailable;\n    if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n      totalHeightAvailable = this._nPxAvailableBelow;\n    } else {\n      totalHeightAvailable = this._nPxAvailableAbove;\n    }\n    this._renameCandidateListView.layout({\n      height: totalHeightAvailable - labelHeight - inputBoxHeight,\n      width: dom.getTotalWidth(this._inputWithButton.domNode)\n    });\n  }\n  acceptInput(wantsPreview) {\n    var _this$_currentAcceptI;\n    this._trace(\"invoking acceptInput\");\n    (_this$_currentAcceptI = this._currentAcceptInput) === null || _this$_currentAcceptI === void 0 || _this$_currentAcceptI.call(this, wantsPreview);\n  }\n  cancelInput(focusEditor, caller) {\n    var _this$_currentCancelI;\n    // this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n    (_this$_currentCancelI = this._currentCancelInput) === null || _this$_currentCancelI === void 0 || _this$_currentCancelI.call(this, focusEditor);\n  }\n  focusNextRenameSuggestion() {\n    var _this$_renameCandidat4;\n    if (!((_this$_renameCandidat4 = this._renameCandidateListView) !== null && _this$_renameCandidat4 !== void 0 && _this$_renameCandidat4.focusNext())) {\n      this._inputWithButton.input.value = this._currentName;\n    }\n  }\n  focusPreviousRenameSuggestion() {\n    var _this$_renameCandidat5;\n    if (!((_this$_renameCandidat5 = this._renameCandidateListView) !== null && _this$_renameCandidat5 !== void 0 && _this$_renameCandidat5.focusPrevious())) {\n      this._inputWithButton.input.value = this._currentName;\n    }\n  }\n  /**\n   * @param requestRenameCandidates is `undefined` when there are no rename suggestion providers\n   */\n  getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n    const {\n      start: selectionStart,\n      end: selectionEnd\n    } = this._getSelection(where, currentName);\n    this._renameCts = cts;\n    const disposeOnDone = new DisposableStore();\n    this._nRenameSuggestionsInvocations = 0;\n    this._hadAutomaticRenameSuggestionsInvocation = false;\n    if (requestRenameCandidates === undefined) {\n      this._inputWithButton.button.style.display = 'none';\n    } else {\n      this._inputWithButton.button.style.display = 'flex';\n      this._requestRenameCandidatesOnce = requestRenameCandidates;\n      this._requestRenameCandidates(currentName, false);\n      disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, 'click', () => this._requestRenameCandidates(currentName, true)));\n      disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, dom.EventType.KEY_DOWN, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        if (keyEvent.equals(3 /* KeyCode.Enter */) || keyEvent.equals(10 /* KeyCode.Space */)) {\n          keyEvent.stopPropagation();\n          keyEvent.preventDefault();\n          this._requestRenameCandidates(currentName, true);\n        }\n      }));\n    }\n    this._isEditingRenameCandidate = false;\n    this._domNode.classList.toggle('preview', supportPreview);\n    this._position = new Position(where.startLineNumber, where.startColumn);\n    this._currentName = currentName;\n    this._inputWithButton.input.value = currentName;\n    this._inputWithButton.input.setAttribute('selectionStart', selectionStart.toString());\n    this._inputWithButton.input.setAttribute('selectionEnd', selectionEnd.toString());\n    this._inputWithButton.input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n    this._beforeFirstInputFieldEditSW.reset();\n    disposeOnDone.add(toDisposable(() => {\n      this._renameCts = undefined;\n      cts.dispose(true);\n    })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n    disposeOnDone.add(toDisposable(() => {\n      if (this._renameCandidateProvidersCts !== undefined) {\n        this._renameCandidateProvidersCts.dispose(true);\n        this._renameCandidateProvidersCts = undefined;\n      }\n    }));\n    disposeOnDone.add(toDisposable(() => this._candidates.clear()));\n    const inputResult = new DeferredPromise();\n    inputResult.p.finally(() => {\n      disposeOnDone.dispose();\n      this._hide();\n    });\n    this._currentCancelInput = focusEditor => {\n      var _this$_renameCandidat6;\n      this._trace('invoking _currentCancelInput');\n      this._currentAcceptInput = undefined;\n      this._currentCancelInput = undefined;\n      // fixme session cleanup\n      (_this$_renameCandidat6 = this._renameCandidateListView) === null || _this$_renameCandidat6 === void 0 || _this$_renameCandidat6.clearCandidates();\n      inputResult.complete(focusEditor);\n      return true;\n    };\n    this._currentAcceptInput = wantsPreview => {\n      this._trace('invoking _currentAcceptInput');\n      assertType(this._renameCandidateListView !== undefined);\n      const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n      let newName;\n      let source;\n      const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n      if (focusedCandidate !== undefined) {\n        this._trace('using new name from renameSuggestion');\n        newName = focusedCandidate;\n        source = {\n          k: 'renameSuggestion'\n        };\n      } else {\n        this._trace('using new name from inputField');\n        newName = this._inputWithButton.input.value;\n        source = this._isEditingRenameCandidate ? {\n          k: 'userEditedRenameSuggestion'\n        } : {\n          k: 'inputField'\n        };\n      }\n      if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n        this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n        return;\n      }\n      this._currentAcceptInput = undefined;\n      this._currentCancelInput = undefined;\n      this._renameCandidateListView.clearCandidates();\n      // fixme session cleanup\n      inputResult.complete({\n        newName,\n        wantsPreview: supportPreview && wantsPreview,\n        stats: {\n          source,\n          nRenameSuggestions,\n          timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n          nRenameSuggestionsInvocations: this._nRenameSuggestionsInvocations,\n          hadAutomaticRenameSuggestionsInvocation: this._hadAutomaticRenameSuggestionsInvocation\n        }\n      });\n    };\n    disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n    if (!_sticky) {\n      disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => {\n        var _this$_domNode;\n        return this.cancelInput(!((_this$_domNode = this._domNode) !== null && _this$_domNode !== void 0 && _this$_domNode.ownerDocument.hasFocus()), 'editor.onDidBlurEditorWidget');\n      }));\n    }\n    this._show();\n    return inputResult.p;\n  }\n  _requestRenameCandidates(currentName, isManuallyTriggered) {\n    if (this._requestRenameCandidatesOnce === undefined) {\n      return;\n    }\n    if (this._renameCandidateProvidersCts !== undefined) {\n      this._renameCandidateProvidersCts.dispose(true);\n    }\n    assertType(this._renameCts);\n    if (this._inputWithButton.buttonState !== 'stop') {\n      this._renameCandidateProvidersCts = new CancellationTokenSource();\n      const triggerKind = isManuallyTriggered ? NewSymbolNameTriggerKind.Invoke : NewSymbolNameTriggerKind.Automatic;\n      const candidates = this._requestRenameCandidatesOnce(triggerKind, this._renameCandidateProvidersCts.token);\n      if (candidates.length === 0) {\n        this._inputWithButton.setSparkleButton();\n        return;\n      }\n      if (!isManuallyTriggered) {\n        this._hadAutomaticRenameSuggestionsInvocation = true;\n      }\n      this._nRenameSuggestionsInvocations += 1;\n      this._inputWithButton.setStopButton();\n      this._updateRenameCandidates(candidates, currentName, this._renameCts.token);\n    }\n  }\n  /**\n   * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n   */\n  _getSelection(where, currentName) {\n    assertType(this._editor.hasModel());\n    const selection = this._editor.getSelection();\n    let start = 0;\n    let end = currentName.length;\n    if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n      start = Math.max(0, selection.startColumn - where.startColumn);\n      end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n    }\n    return {\n      start,\n      end\n    };\n  }\n  _show() {\n    this._trace('invoking _show');\n    this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n    this._visible = true;\n    this._visibleContextKey.set(true);\n    this._editor.layoutContentWidget(this);\n    // TODO@ulugbekna: could this be simply run in `afterRender`?\n    setTimeout(() => {\n      this._inputWithButton.input.focus();\n      this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute('selectionStart')), parseInt(this._inputWithButton.input.getAttribute('selectionEnd')));\n    }, 100);\n  }\n  async _updateRenameCandidates(candidates, currentName, token) {\n    var _this = this;\n    const trace = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _this._trace('_updateRenameCandidates', ...args);\n    };\n    trace('start');\n    const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n    this._inputWithButton.setSparkleButton();\n    if (namesListResults === undefined) {\n      trace('returning early - received updateRenameCandidates results - undefined');\n      return;\n    }\n    const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value) ? namesListResult.value : []);\n    trace(\"received updateRenameCandidates results - total (unfiltered) \".concat(newNames.length, \" candidates.\"));\n    // deduplicate and filter out the current value\n    const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n    trace(\"distinct candidates - \".concat(distinctNames.length, \" candidates.\"));\n    const validDistinctNames = distinctNames.filter(_ref => {\n      let {\n        newSymbolName\n      } = _ref;\n      return newSymbolName.trim().length > 0 && newSymbolName !== this._inputWithButton.input.value && newSymbolName !== currentName && !this._candidates.has(newSymbolName);\n    });\n    trace(\"valid distinct candidates - \".concat(newNames.length, \" candidates.\"));\n    validDistinctNames.forEach(n => this._candidates.add(n.newSymbolName));\n    if (validDistinctNames.length < 1) {\n      trace('returning early - no valid distinct candidates');\n      return;\n    }\n    // show the candidates\n    trace('setting candidates');\n    this._renameCandidateListView.setCandidates(validDistinctNames);\n    // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n    trace('asking editor to re-layout');\n    this._editor.layoutContentWidget(this);\n  }\n  _hide() {\n    this._trace('invoked _hide');\n    this._visible = false;\n    this._visibleContextKey.reset();\n    this._editor.layoutContentWidget(this);\n  }\n  _getTopForPosition() {\n    const visibleRanges = this._editor.getVisibleRanges();\n    let firstLineInViewport;\n    if (visibleRanges.length > 0) {\n      firstLineInViewport = visibleRanges[0].startLineNumber;\n    } else {\n      this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n      firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n    }\n    return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n  }\n  _trace() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    this._logService.trace('RenameWidget', ...args);\n  }\n};\nRenameWidget = __decorate([__param(2, IThemeService), __param(3, IKeybindingService), __param(4, IContextKeyService), __param(5, ILogService)], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n  // FIXME@ulugbekna: rewrite using event emitters\n  constructor(parent, opts) {\n    this._disposables = new DisposableStore();\n    this._availableHeight = 0;\n    this._minimumWidth = 0;\n    this._lineHeight = opts.fontInfo.lineHeight;\n    this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n    this._listContainer = document.createElement('div');\n    this._listContainer.className = 'rename-box rename-candidate-list-container';\n    parent.appendChild(this._listContainer);\n    this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n    this._listWidget.onDidChangeFocus(e => {\n      if (e.elements.length === 1) {\n        opts.onFocusChange(e.elements[0].newSymbolName);\n      }\n    }, this._disposables);\n    this._listWidget.onDidChangeSelection(e => {\n      if (e.elements.length === 1) {\n        opts.onSelectionChange();\n      }\n    }, this._disposables);\n    this._disposables.add(this._listWidget.onDidBlur(e => {\n      this._listWidget.setFocus([]);\n    }));\n    this._listWidget.style(getListStyles({\n      listInactiveFocusForeground: quickInputListFocusForeground,\n      listInactiveFocusBackground: quickInputListFocusBackground\n    }));\n  }\n  dispose() {\n    this._listWidget.dispose();\n    this._disposables.dispose();\n  }\n  // height - max height allowed by parent element\n  layout(_ref2) {\n    let {\n      height,\n      width\n    } = _ref2;\n    this._availableHeight = height;\n    this._minimumWidth = width;\n  }\n  setCandidates(candidates) {\n    // insert candidates into list widget\n    this._listWidget.splice(0, 0, candidates);\n    // adjust list widget layout\n    const height = this._pickListHeight(this._listWidget.length);\n    const width = this._pickListWidth(candidates);\n    this._listWidget.layout(height, width);\n    // adjust list container layout\n    this._listContainer.style.height = \"\".concat(height, \"px\");\n    this._listContainer.style.width = \"\".concat(width, \"px\");\n    aria.status(nls.localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n  }\n  clearCandidates() {\n    this._listContainer.style.height = '0px';\n    this._listContainer.style.width = '0px';\n    this._listWidget.splice(0, this._listWidget.length, []);\n  }\n  get nCandidates() {\n    return this._listWidget.length;\n  }\n  get focusedCandidate() {\n    if (this._listWidget.length === 0) {\n      return;\n    }\n    const selectedElement = this._listWidget.getSelectedElements()[0];\n    if (selectedElement !== undefined) {\n      return selectedElement.newSymbolName;\n    }\n    const focusedElement = this._listWidget.getFocusedElements()[0];\n    if (focusedElement !== undefined) {\n      return focusedElement.newSymbolName;\n    }\n    return;\n  }\n  focusNext() {\n    if (this._listWidget.length === 0) {\n      return false;\n    }\n    const focusedIxs = this._listWidget.getFocus();\n    if (focusedIxs.length === 0) {\n      this._listWidget.focusFirst();\n      this._listWidget.reveal(0);\n      return true;\n    } else {\n      if (focusedIxs[0] === this._listWidget.length - 1) {\n        this._listWidget.setFocus([]);\n        this._listWidget.reveal(0); // @ulugbekna: without this, it seems like focused element is obstructed\n        return false;\n      } else {\n        this._listWidget.focusNext();\n        const focused = this._listWidget.getFocus()[0];\n        this._listWidget.reveal(focused);\n        return true;\n      }\n    }\n  }\n  /**\n   * @returns true if focus is moved to previous element\n   */\n  focusPrevious() {\n    if (this._listWidget.length === 0) {\n      return false;\n    }\n    const focusedIxs = this._listWidget.getFocus();\n    if (focusedIxs.length === 0) {\n      this._listWidget.focusLast();\n      const focused = this._listWidget.getFocus()[0];\n      this._listWidget.reveal(focused);\n      return true;\n    } else {\n      if (focusedIxs[0] === 0) {\n        this._listWidget.setFocus([]);\n        return false;\n      } else {\n        this._listWidget.focusPrevious();\n        const focused = this._listWidget.getFocus()[0];\n        this._listWidget.reveal(focused);\n        return true;\n      }\n    }\n  }\n  clearFocus() {\n    this._listWidget.setFocus([]);\n  }\n  get _candidateViewHeight() {\n    const {\n      totalHeight\n    } = RenameCandidateView.getLayoutInfo({\n      lineHeight: this._lineHeight\n    });\n    return totalHeight;\n  }\n  _pickListHeight(nCandidates) {\n    const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n    const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n    const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n    return height;\n  }\n  _pickListWidth(candidates) {\n    const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n    const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n    );\n    return width;\n  }\n  static _createListWidget(container, candidateViewHeight, fontInfo) {\n    const virtualDelegate = new class {\n      getTemplateId(element) {\n        return 'candidate';\n      }\n      getHeight(element) {\n        return candidateViewHeight;\n      }\n    }();\n    const renderer = new class {\n      constructor() {\n        this.templateId = 'candidate';\n      }\n      renderTemplate(container) {\n        return new RenameCandidateView(container, fontInfo);\n      }\n      renderElement(candidate, index, templateData) {\n        templateData.populate(candidate);\n      }\n      disposeTemplate(templateData) {\n        templateData.dispose();\n      }\n    }();\n    return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n      keyboardSupport: false,\n      // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n      mouseSupport: true,\n      multipleSelectionSupport: false\n    });\n  }\n}\nclass InputWithButton {\n  constructor() {\n    this._onDidInputChange = new Emitter();\n    this.onDidInputChange = this._onDidInputChange.event;\n    this._disposables = new DisposableStore();\n  }\n  get domNode() {\n    if (!this._domNode) {\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'rename-input-with-button';\n      this._domNode.style.display = 'flex';\n      this._domNode.style.flexDirection = 'row';\n      this._domNode.style.alignItems = 'center';\n      this._inputNode = document.createElement('input');\n      this._inputNode.className = 'rename-input';\n      this._inputNode.type = 'text';\n      this._inputNode.style.border = 'none';\n      this._inputNode.setAttribute('aria-label', nls.localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n      this._domNode.appendChild(this._inputNode);\n      this._buttonNode = document.createElement('div');\n      this._buttonNode.className = 'rename-suggestions-button';\n      this._buttonNode.setAttribute('tabindex', '0');\n      this._buttonGenHoverText = nls.localize('generateRenameSuggestionsButton', \"Generate new name suggestions\");\n      this._buttonCancelHoverText = nls.localize('cancelRenameSuggestionsButton', \"Cancel\");\n      this._buttonHover = getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('element'), this._buttonNode, this._buttonGenHoverText);\n      this._disposables.add(this._buttonHover);\n      this._domNode.appendChild(this._buttonNode);\n      // notify if selection changes to cancel request to rename-suggestion providers\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.INPUT, () => this._onDidInputChange.fire()));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.KEY_DOWN, e => {\n        const keyEvent = new StandardKeyboardEvent(e);\n        if (keyEvent.keyCode === 15 /* KeyCode.LeftArrow */ || keyEvent.keyCode === 17 /* KeyCode.RightArrow */) {\n          this._onDidInputChange.fire();\n        }\n      }));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.CLICK, () => this._onDidInputChange.fire()));\n      // focus \"container\" border instead of input box\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.FOCUS, () => {\n        this.domNode.style.outlineWidth = '1px';\n        this.domNode.style.outlineStyle = 'solid';\n        this.domNode.style.outlineOffset = '-1px';\n        this.domNode.style.outlineColor = 'var(--vscode-focusBorder)';\n      }));\n      this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.BLUR, () => {\n        this.domNode.style.outline = 'none';\n      }));\n    }\n    return this._domNode;\n  }\n  get input() {\n    assertType(this._inputNode);\n    return this._inputNode;\n  }\n  get button() {\n    assertType(this._buttonNode);\n    return this._buttonNode;\n  }\n  get buttonState() {\n    return this._buttonState;\n  }\n  setSparkleButton() {\n    var _this$_sparkleIcon, _this$_buttonHover;\n    this._buttonState = 'sparkle';\n    (_this$_sparkleIcon = this._sparkleIcon) !== null && _this$_sparkleIcon !== void 0 ? _this$_sparkleIcon : this._sparkleIcon = renderIcon(Codicon.sparkle);\n    dom.clearNode(this.button);\n    this.button.appendChild(this._sparkleIcon);\n    this.button.setAttribute('aria-label', 'Generating new name suggestions');\n    (_this$_buttonHover = this._buttonHover) === null || _this$_buttonHover === void 0 || _this$_buttonHover.update(this._buttonGenHoverText);\n    this.input.focus();\n  }\n  setStopButton() {\n    var _this$_stopIcon, _this$_buttonHover2;\n    this._buttonState = 'stop';\n    (_this$_stopIcon = this._stopIcon) !== null && _this$_stopIcon !== void 0 ? _this$_stopIcon : this._stopIcon = renderIcon(Codicon.primitiveSquare);\n    dom.clearNode(this.button);\n    this.button.appendChild(this._stopIcon);\n    this.button.setAttribute('aria-label', 'Cancel generating new name suggestions');\n    (_this$_buttonHover2 = this._buttonHover) === null || _this$_buttonHover2 === void 0 || _this$_buttonHover2.update(this._buttonCancelHoverText);\n    this.input.focus();\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n}\nclass RenameCandidateView {\n  constructor(parent, fontInfo) {\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'rename-box rename-candidate';\n    this._domNode.style.display = \"flex\";\n    this._domNode.style.columnGap = \"5px\";\n    this._domNode.style.alignItems = \"center\";\n    this._domNode.style.height = \"\".concat(fontInfo.lineHeight, \"px\");\n    this._domNode.style.padding = \"\".concat(RenameCandidateView._PADDING, \"px\");\n    // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n    const iconContainer = document.createElement('div');\n    iconContainer.style.display = \"flex\";\n    iconContainer.style.alignItems = \"center\";\n    iconContainer.style.width = iconContainer.style.height = \"\".concat(fontInfo.lineHeight * 0.8, \"px\");\n    this._domNode.appendChild(iconContainer);\n    this._icon = renderIcon(Codicon.sparkle);\n    this._icon.style.display = \"none\";\n    iconContainer.appendChild(this._icon);\n    this._label = document.createElement('div');\n    domFontInfo.applyFontInfo(this._label, fontInfo);\n    this._domNode.appendChild(this._label);\n    parent.appendChild(this._domNode);\n  }\n  populate(value) {\n    this._updateIcon(value);\n    this._updateLabel(value);\n  }\n  _updateIcon(value) {\n    var _value$tags;\n    const isAIGenerated = !!((_value$tags = value.tags) !== null && _value$tags !== void 0 && _value$tags.includes(NewSymbolNameTag.AIGenerated));\n    this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n  }\n  _updateLabel(value) {\n    this._label.innerText = value.newSymbolName;\n  }\n  static getLayoutInfo(_ref3) {\n    let {\n      lineHeight\n    } = _ref3;\n    const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n    return {\n      totalHeight\n    };\n  }\n  dispose() {}\n}\n_RenameCandidateView = RenameCandidateView;\n_RenameCandidateView._PADDING = 2;","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","StandardKeyboardEvent","aria","getBaseLayerHoverDelegate","getDefaultHoverDelegate","renderIcon","List","arrays","DeferredPromise","raceCancellation","CancellationTokenSource","Codicon","Emitter","DisposableStore","toDisposable","StopWatch","assertType","isDefined","domFontInfo","Position","Range","NewSymbolNameTag","NewSymbolNameTriggerKind","nls","IContextKeyService","RawContextKey","IKeybindingService","ILogService","getListStyles","editorWidgetBackground","inputBackground","inputBorder","inputForeground","quickInputListFocusBackground","quickInputListFocusForeground","widgetBorder","widgetShadow","IThemeService","_sticky","CONTEXT_RENAME_INPUT_VISIBLE","localize","CONTEXT_RENAME_INPUT_FOCUSED","RenameWidget","constructor","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_logService","allowEditorOverflow","_disposables","_visibleContextKey","bindTo","_isEditingRenameCandidate","_nRenameSuggestionsInvocations","_hadAutomaticRenameSuggestionsInvocation","_candidates","Set","_beforeFirstInputFieldEditSW","_inputWithButton","InputWithButton","add","addContentWidget","onDidChangeConfiguration","e","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","dispose","removeContentWidget","getId","getDomNode","_domNode","document","createElement","className","appendChild","domNode","_renameCandidateListView","RenameCandidateListView","fontInfo","getOption","onFocusChange","newSymbolName","input","value","onSelectionChange","acceptInput","onDidInputChange","_this$_renameCandidat","_this$_timeBeforeFirs","_this$_renameCandidat2","_this$_renameCandidat3","focusedCandidate","undefined","_timeBeforeFirstInputFieldEdit","elapsed","_renameCandidateProvidersCts","token","isCancellationRequested","cancel","clearFocus","_label","getColorTheme","theme","_theme$getColor","_theme$getColor2","_theme$getColor3","_theme$getColor4","_border$toString","widgetShadowColor","getColor","widgetBorderColor","style","backgroundColor","String","boxShadow","concat","border","color","borderWidth","borderStyle","borderColor","toString","applyFontInfo","fontSize","_computeLabelFontSize","editorFontSize","getPosition","_visible","hasModel","bodyBox","getClientArea","ownerDocument","body","editorBox","getDomNodePagePosition","cursorBoxTop","_getTopForPosition","_nPxAvailableAbove","top","_nPxAvailableBelow","height","lineHeight","totalHeight","candidateViewHeight","RenameCandidateView","getLayoutInfo","positionPreference","position","_position","preference","beforeRender","_this$_keybindingServ","_this$_keybindingServ2","accept","preview","innerText","comment","lookupKeybinding","getLabel","minWidth","afterRender","cancelInput","inputBoxHeight","getTotalHeight","labelHeight","totalHeightAvailable","layout","width","getTotalWidth","wantsPreview","_this$_currentAcceptI","_trace","_currentAcceptInput","call","focusEditor","caller","_this$_currentCancelI","_currentCancelInput","focusNextRenameSuggestion","_this$_renameCandidat4","focusNext","_currentName","focusPreviousRenameSuggestion","_this$_renameCandidat5","focusPrevious","getInput","where","currentName","supportPreview","requestRenameCandidates","cts","start","selectionStart","end","selectionEnd","_getSelection","_renameCts","disposeOnDone","button","display","_requestRenameCandidatesOnce","_requestRenameCandidates","addDisposableListener","EventType","KEY_DOWN","keyEvent","equals","stopPropagation","preventDefault","classList","toggle","startLineNumber","startColumn","setAttribute","size","Math","max","endColumn","reset","clear","inputResult","p","finally","_hide","_this$_renameCandidat6","clearCandidates","complete","nRenameSuggestions","nCandidates","newName","source","k","trim","stats","timeBeforeFirstInputFieldEdit","nRenameSuggestionsInvocations","hadAutomaticRenameSuggestionsInvocation","onCancellationRequested","onDidBlurEditorWidget","_this$_domNode","hasFocus","_show","isManuallyTriggered","buttonState","triggerKind","Invoke","Automatic","candidates","setSparkleButton","setStopButton","_updateRenameCandidates","selection","getSelection","isEmpty","spansMultipleLines","containsRange","min","revealLineInCenterIfOutsideViewport","lineNumber","set","layoutContentWidget","setTimeout","focus","setSelectionRange","parseInt","getAttribute","_this","trace","_len","args","Array","_key","namesListResults","Promise","allSettled","newNames","flatMap","namesListResult","status","distinctNames","distinct","v","validDistinctNames","filter","_ref","has","forEach","n","setCandidates","visibleRanges","getVisibleRanges","firstLineInViewport","warn","getTopForLineNumber","_len2","_key2","parent","opts","_availableHeight","_minimumWidth","_lineHeight","_typicalHalfwidthCharacterWidth","typicalHalfwidthCharacterWidth","_listContainer","_listWidget","_createListWidget","_candidateViewHeight","onDidChangeFocus","elements","onDidChangeSelection","onDidBlur","setFocus","listInactiveFocusForeground","listInactiveFocusBackground","_ref2","splice","_pickListHeight","_pickListWidth","selectedElement","getSelectedElements","focusedElement","getFocusedElements","focusedIxs","getFocus","focusFirst","reveal","focused","focusLast","heightToFitAllCandidates","MAX_N_CANDIDATES","longestCandidateWidth","ceil","map","container","virtualDelegate","getTemplateId","element","getHeight","renderer","templateId","renderTemplate","renderElement","candidate","index","templateData","populate","disposeTemplate","keyboardSupport","mouseSupport","multipleSelectionSupport","_onDidInputChange","event","flexDirection","alignItems","_inputNode","type","_buttonNode","_buttonGenHoverText","_buttonCancelHoverText","_buttonHover","setupManagedHover","INPUT","fire","keyCode","CLICK","FOCUS","outlineWidth","outlineStyle","outlineOffset","outlineColor","BLUR","outline","_buttonState","_this$_sparkleIcon","_this$_buttonHover","_sparkleIcon","sparkle","clearNode","update","_this$_stopIcon","_this$_buttonHover2","_stopIcon","primitiveSquare","columnGap","padding","_PADDING","iconContainer","_icon","_updateIcon","_updateLabel","_value$tags","isAIGenerated","tags","includes","AIGenerated","_ref3","_RenameCandidateView"],"sources":["D:/ospanel/domains/react/react-intro-main/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport * as domFontInfo from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag, NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, nls.localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, nls.localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._logService = _logService;\n        // implement IContentWidget\n        this.allowEditorOverflow = true;\n        this._disposables = new DisposableStore();\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._isEditingRenameCandidate = false;\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        this._candidates = new Set();\n        this._beforeFirstInputFieldEditSW = new StopWatch();\n        this._inputWithButton = new InputWithButton();\n        this._disposables.add(this._inputWithButton);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._domNode.appendChild(this._inputWithButton.domNode);\n            this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n                fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n                onFocusChange: (newSymbolName) => {\n                    this._inputWithButton.input.value = newSymbolName;\n                    this._isEditingRenameCandidate = false; // @ulugbekna: reset\n                },\n                onSelectionChange: () => {\n                    this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n                    this.acceptInput(false); // we don't allow preview with mouse click for now\n                }\n            }));\n            this._disposables.add(this._inputWithButton.onDidInputChange(() => {\n                if (this._renameCandidateListView?.focusedCandidate !== undefined) {\n                    this._isEditingRenameCandidate = true;\n                }\n                this._timeBeforeFirstInputFieldEdit ??= this._beforeFirstInputFieldEditSW.elapsed();\n                if (this._renameCandidateProvidersCts?.token.isCancellationRequested === false) {\n                    this._renameCandidateProvidersCts.cancel();\n                }\n                this._renameCandidateListView?.clearFocus();\n            }));\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        if (!this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String(theme.getColor(editorWidgetBackground) ?? '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._inputWithButton.domNode.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n        this._inputWithButton.input.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n        this._inputWithButton.domNode.style.borderWidth = border ? '1px' : '0px';\n        this._inputWithButton.domNode.style.borderStyle = border ? 'solid' : 'none';\n        this._inputWithButton.domNode.style.borderColor = border?.toString() ?? 'none';\n    }\n    _updateFont() {\n        if (this._domNode === undefined) {\n            return;\n        }\n        assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n        this._editor.applyFontInfo(this._inputWithButton.input);\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        this._label.style.fontSize = `${this._computeLabelFontSize(fontInfo.fontSize)}px`;\n    }\n    _computeLabelFontSize(editorFontSize) {\n        return editorFontSize * 0.8;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        if (!this._editor.hasModel() || // @ulugbekna: shouldn't happen\n            !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return null;\n        }\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n        const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const cursorBoxTop = this._getTopForPosition();\n        this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n        this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n        const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n        const { totalHeight: candidateViewHeight } = RenameCandidateView.getLayoutInfo({ lineHeight });\n        const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */\n            ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n            : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n        return {\n            position: this._position,\n            preference: positionPreference,\n        };\n    }\n    beforeRender() {\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = nls.localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", this._keybindingService.lookupKeybinding(accept)?.getLabel(), this._keybindingService.lookupKeybinding(preview)?.getLabel());\n        this._domNode.style.minWidth = `200px`; // to prevent from widening when candidates come in\n        return null;\n    }\n    afterRender(position) {\n        // FIXME@ulugbekna: commenting trace log out until we start unmounting the widget from editor properly - https://github.com/microsoft/vscode/issues/226975\n        // this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n        if (position === null) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true, 'afterRender (because position is null)');\n            return;\n        }\n        if (!this._editor.hasModel() || // shouldn't happen\n            !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return;\n        }\n        assertType(this._renameCandidateListView);\n        assertType(this._nPxAvailableAbove !== undefined);\n        assertType(this._nPxAvailableBelow !== undefined);\n        const inputBoxHeight = dom.getTotalHeight(this._inputWithButton.domNode);\n        const labelHeight = dom.getTotalHeight(this._label);\n        let totalHeightAvailable;\n        if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n            totalHeightAvailable = this._nPxAvailableBelow;\n        }\n        else {\n            totalHeightAvailable = this._nPxAvailableAbove;\n        }\n        this._renameCandidateListView.layout({\n            height: totalHeightAvailable - labelHeight - inputBoxHeight,\n            width: dom.getTotalWidth(this._inputWithButton.domNode),\n        });\n    }\n    acceptInput(wantsPreview) {\n        this._trace(`invoking acceptInput`);\n        this._currentAcceptInput?.(wantsPreview);\n    }\n    cancelInput(focusEditor, caller) {\n        // this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n        this._currentCancelInput?.(focusEditor);\n    }\n    focusNextRenameSuggestion() {\n        if (!this._renameCandidateListView?.focusNext()) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    focusPreviousRenameSuggestion() {\n        if (!this._renameCandidateListView?.focusPrevious()) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    /**\n     * @param requestRenameCandidates is `undefined` when there are no rename suggestion providers\n     */\n    getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n        const { start: selectionStart, end: selectionEnd } = this._getSelection(where, currentName);\n        this._renameCts = cts;\n        const disposeOnDone = new DisposableStore();\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        if (requestRenameCandidates === undefined) {\n            this._inputWithButton.button.style.display = 'none';\n        }\n        else {\n            this._inputWithButton.button.style.display = 'flex';\n            this._requestRenameCandidatesOnce = requestRenameCandidates;\n            this._requestRenameCandidates(currentName, false);\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, 'click', () => this._requestRenameCandidates(currentName, true)));\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.equals(3 /* KeyCode.Enter */) || keyEvent.equals(10 /* KeyCode.Space */)) {\n                    keyEvent.stopPropagation();\n                    keyEvent.preventDefault();\n                    this._requestRenameCandidates(currentName, true);\n                }\n            }));\n        }\n        this._isEditingRenameCandidate = false;\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._currentName = currentName;\n        this._inputWithButton.input.value = currentName;\n        this._inputWithButton.input.setAttribute('selectionStart', selectionStart.toString());\n        this._inputWithButton.input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._inputWithButton.input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n        this._beforeFirstInputFieldEditSW.reset();\n        disposeOnDone.add(toDisposable(() => {\n            this._renameCts = undefined;\n            cts.dispose(true);\n        })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n        disposeOnDone.add(toDisposable(() => {\n            if (this._renameCandidateProvidersCts !== undefined) {\n                this._renameCandidateProvidersCts.dispose(true);\n                this._renameCandidateProvidersCts = undefined;\n            }\n        }));\n        disposeOnDone.add(toDisposable(() => this._candidates.clear()));\n        const inputResult = new DeferredPromise();\n        inputResult.p.finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n        this._currentCancelInput = (focusEditor) => {\n            this._trace('invoking _currentCancelInput');\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            // fixme session cleanup\n            this._renameCandidateListView?.clearCandidates();\n            inputResult.complete(focusEditor);\n            return true;\n        };\n        this._currentAcceptInput = (wantsPreview) => {\n            this._trace('invoking _currentAcceptInput');\n            assertType(this._renameCandidateListView !== undefined);\n            const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n            let newName;\n            let source;\n            const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n            if (focusedCandidate !== undefined) {\n                this._trace('using new name from renameSuggestion');\n                newName = focusedCandidate;\n                source = { k: 'renameSuggestion' };\n            }\n            else {\n                this._trace('using new name from inputField');\n                newName = this._inputWithButton.input.value;\n                source = this._isEditingRenameCandidate ? { k: 'userEditedRenameSuggestion' } : { k: 'inputField' };\n            }\n            if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n                this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n                return;\n            }\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            this._renameCandidateListView.clearCandidates();\n            // fixme session cleanup\n            inputResult.complete({\n                newName,\n                wantsPreview: supportPreview && wantsPreview,\n                stats: {\n                    source,\n                    nRenameSuggestions,\n                    timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n                    nRenameSuggestionsInvocations: this._nRenameSuggestionsInvocations,\n                    hadAutomaticRenameSuggestionsInvocation: this._hadAutomaticRenameSuggestionsInvocation,\n                }\n            });\n        };\n        disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n        if (!_sticky) {\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!this._domNode?.ownerDocument.hasFocus(), 'editor.onDidBlurEditorWidget')));\n        }\n        this._show();\n        return inputResult.p;\n    }\n    _requestRenameCandidates(currentName, isManuallyTriggered) {\n        if (this._requestRenameCandidatesOnce === undefined) {\n            return;\n        }\n        if (this._renameCandidateProvidersCts !== undefined) {\n            this._renameCandidateProvidersCts.dispose(true);\n        }\n        assertType(this._renameCts);\n        if (this._inputWithButton.buttonState !== 'stop') {\n            this._renameCandidateProvidersCts = new CancellationTokenSource();\n            const triggerKind = isManuallyTriggered ? NewSymbolNameTriggerKind.Invoke : NewSymbolNameTriggerKind.Automatic;\n            const candidates = this._requestRenameCandidatesOnce(triggerKind, this._renameCandidateProvidersCts.token);\n            if (candidates.length === 0) {\n                this._inputWithButton.setSparkleButton();\n                return;\n            }\n            if (!isManuallyTriggered) {\n                this._hadAutomaticRenameSuggestionsInvocation = true;\n            }\n            this._nRenameSuggestionsInvocations += 1;\n            this._inputWithButton.setStopButton();\n            this._updateRenameCandidates(candidates, currentName, this._renameCts.token);\n        }\n    }\n    /**\n     * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n     */\n    _getSelection(where, currentName) {\n        assertType(this._editor.hasModel());\n        const selection = this._editor.getSelection();\n        let start = 0;\n        let end = currentName.length;\n        if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n            start = Math.max(0, selection.startColumn - where.startColumn);\n            end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n        }\n        return { start, end };\n    }\n    _show() {\n        this._trace('invoking _show');\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        // TODO@ulugbekna: could this be simply run in `afterRender`?\n        setTimeout(() => {\n            this._inputWithButton.input.focus();\n            this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute('selectionStart')), parseInt(this._inputWithButton.input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    async _updateRenameCandidates(candidates, currentName, token) {\n        const trace = (...args) => this._trace('_updateRenameCandidates', ...args);\n        trace('start');\n        const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n        this._inputWithButton.setSparkleButton();\n        if (namesListResults === undefined) {\n            trace('returning early - received updateRenameCandidates results - undefined');\n            return;\n        }\n        const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value)\n            ? namesListResult.value\n            : []);\n        trace(`received updateRenameCandidates results - total (unfiltered) ${newNames.length} candidates.`);\n        // deduplicate and filter out the current value\n        const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n        trace(`distinct candidates - ${distinctNames.length} candidates.`);\n        const validDistinctNames = distinctNames.filter(({ newSymbolName }) => newSymbolName.trim().length > 0 && newSymbolName !== this._inputWithButton.input.value && newSymbolName !== currentName && !this._candidates.has(newSymbolName));\n        trace(`valid distinct candidates - ${newNames.length} candidates.`);\n        validDistinctNames.forEach(n => this._candidates.add(n.newSymbolName));\n        if (validDistinctNames.length < 1) {\n            trace('returning early - no valid distinct candidates');\n            return;\n        }\n        // show the candidates\n        trace('setting candidates');\n        this._renameCandidateListView.setCandidates(validDistinctNames);\n        // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n        trace('asking editor to re-layout');\n        this._editor.layoutContentWidget(this);\n    }\n    _hide() {\n        this._trace('invoked _hide');\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n    _getTopForPosition() {\n        const visibleRanges = this._editor.getVisibleRanges();\n        let firstLineInViewport;\n        if (visibleRanges.length > 0) {\n            firstLineInViewport = visibleRanges[0].startLineNumber;\n        }\n        else {\n            this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n            firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n        }\n        return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n    }\n    _trace(...args) {\n        this._logService.trace('RenameWidget', ...args);\n    }\n};\nRenameWidget = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService),\n    __param(5, ILogService)\n], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n    // FIXME@ulugbekna: rewrite using event emitters\n    constructor(parent, opts) {\n        this._disposables = new DisposableStore();\n        this._availableHeight = 0;\n        this._minimumWidth = 0;\n        this._lineHeight = opts.fontInfo.lineHeight;\n        this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n        this._listContainer = document.createElement('div');\n        this._listContainer.className = 'rename-box rename-candidate-list-container';\n        parent.appendChild(this._listContainer);\n        this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n        this._listWidget.onDidChangeFocus(e => {\n            if (e.elements.length === 1) {\n                opts.onFocusChange(e.elements[0].newSymbolName);\n            }\n        }, this._disposables);\n        this._listWidget.onDidChangeSelection(e => {\n            if (e.elements.length === 1) {\n                opts.onSelectionChange();\n            }\n        }, this._disposables);\n        this._disposables.add(this._listWidget.onDidBlur(e => {\n            this._listWidget.setFocus([]);\n        }));\n        this._listWidget.style(getListStyles({\n            listInactiveFocusForeground: quickInputListFocusForeground,\n            listInactiveFocusBackground: quickInputListFocusBackground,\n        }));\n    }\n    dispose() {\n        this._listWidget.dispose();\n        this._disposables.dispose();\n    }\n    // height - max height allowed by parent element\n    layout({ height, width }) {\n        this._availableHeight = height;\n        this._minimumWidth = width;\n    }\n    setCandidates(candidates) {\n        // insert candidates into list widget\n        this._listWidget.splice(0, 0, candidates);\n        // adjust list widget layout\n        const height = this._pickListHeight(this._listWidget.length);\n        const width = this._pickListWidth(candidates);\n        this._listWidget.layout(height, width);\n        // adjust list container layout\n        this._listContainer.style.height = `${height}px`;\n        this._listContainer.style.width = `${width}px`;\n        aria.status(nls.localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n    }\n    clearCandidates() {\n        this._listContainer.style.height = '0px';\n        this._listContainer.style.width = '0px';\n        this._listWidget.splice(0, this._listWidget.length, []);\n    }\n    get nCandidates() {\n        return this._listWidget.length;\n    }\n    get focusedCandidate() {\n        if (this._listWidget.length === 0) {\n            return;\n        }\n        const selectedElement = this._listWidget.getSelectedElements()[0];\n        if (selectedElement !== undefined) {\n            return selectedElement.newSymbolName;\n        }\n        const focusedElement = this._listWidget.getFocusedElements()[0];\n        if (focusedElement !== undefined) {\n            return focusedElement.newSymbolName;\n        }\n        return;\n    }\n    focusNext() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusFirst();\n            this._listWidget.reveal(0);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === this._listWidget.length - 1) {\n                this._listWidget.setFocus([]);\n                this._listWidget.reveal(0); // @ulugbekna: without this, it seems like focused element is obstructed\n                return false;\n            }\n            else {\n                this._listWidget.focusNext();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    /**\n     * @returns true if focus is moved to previous element\n     */\n    focusPrevious() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusLast();\n            const focused = this._listWidget.getFocus()[0];\n            this._listWidget.reveal(focused);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === 0) {\n                this._listWidget.setFocus([]);\n                return false;\n            }\n            else {\n                this._listWidget.focusPrevious();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    clearFocus() {\n        this._listWidget.setFocus([]);\n    }\n    get _candidateViewHeight() {\n        const { totalHeight } = RenameCandidateView.getLayoutInfo({ lineHeight: this._lineHeight });\n        return totalHeight;\n    }\n    _pickListHeight(nCandidates) {\n        const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n        const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n        const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n        return height;\n    }\n    _pickListWidth(candidates) {\n        const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n        const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n        );\n        return width;\n    }\n    static _createListWidget(container, candidateViewHeight, fontInfo) {\n        const virtualDelegate = new class {\n            getTemplateId(element) {\n                return 'candidate';\n            }\n            getHeight(element) {\n                return candidateViewHeight;\n            }\n        };\n        const renderer = new class {\n            constructor() {\n                this.templateId = 'candidate';\n            }\n            renderTemplate(container) {\n                return new RenameCandidateView(container, fontInfo);\n            }\n            renderElement(candidate, index, templateData) {\n                templateData.populate(candidate);\n            }\n            disposeTemplate(templateData) {\n                templateData.dispose();\n            }\n        };\n        return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n            keyboardSupport: false, // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n            mouseSupport: true,\n            multipleSelectionSupport: false,\n        });\n    }\n}\nclass InputWithButton {\n    constructor() {\n        this._onDidInputChange = new Emitter();\n        this.onDidInputChange = this._onDidInputChange.event;\n        this._disposables = new DisposableStore();\n    }\n    get domNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'rename-input-with-button';\n            this._domNode.style.display = 'flex';\n            this._domNode.style.flexDirection = 'row';\n            this._domNode.style.alignItems = 'center';\n            this._inputNode = document.createElement('input');\n            this._inputNode.className = 'rename-input';\n            this._inputNode.type = 'text';\n            this._inputNode.style.border = 'none';\n            this._inputNode.setAttribute('aria-label', nls.localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._inputNode);\n            this._buttonNode = document.createElement('div');\n            this._buttonNode.className = 'rename-suggestions-button';\n            this._buttonNode.setAttribute('tabindex', '0');\n            this._buttonGenHoverText = nls.localize('generateRenameSuggestionsButton', \"Generate new name suggestions\");\n            this._buttonCancelHoverText = nls.localize('cancelRenameSuggestionsButton', \"Cancel\");\n            this._buttonHover = getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('element'), this._buttonNode, this._buttonGenHoverText);\n            this._disposables.add(this._buttonHover);\n            this._domNode.appendChild(this._buttonNode);\n            // notify if selection changes to cancel request to rename-suggestion providers\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.INPUT, () => this._onDidInputChange.fire()));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.keyCode === 15 /* KeyCode.LeftArrow */ || keyEvent.keyCode === 17 /* KeyCode.RightArrow */) {\n                    this._onDidInputChange.fire();\n                }\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.CLICK, () => this._onDidInputChange.fire()));\n            // focus \"container\" border instead of input box\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.FOCUS, () => {\n                this.domNode.style.outlineWidth = '1px';\n                this.domNode.style.outlineStyle = 'solid';\n                this.domNode.style.outlineOffset = '-1px';\n                this.domNode.style.outlineColor = 'var(--vscode-focusBorder)';\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.BLUR, () => {\n                this.domNode.style.outline = 'none';\n            }));\n        }\n        return this._domNode;\n    }\n    get input() {\n        assertType(this._inputNode);\n        return this._inputNode;\n    }\n    get button() {\n        assertType(this._buttonNode);\n        return this._buttonNode;\n    }\n    get buttonState() {\n        return this._buttonState;\n    }\n    setSparkleButton() {\n        this._buttonState = 'sparkle';\n        this._sparkleIcon ??= renderIcon(Codicon.sparkle);\n        dom.clearNode(this.button);\n        this.button.appendChild(this._sparkleIcon);\n        this.button.setAttribute('aria-label', 'Generating new name suggestions');\n        this._buttonHover?.update(this._buttonGenHoverText);\n        this.input.focus();\n    }\n    setStopButton() {\n        this._buttonState = 'stop';\n        this._stopIcon ??= renderIcon(Codicon.primitiveSquare);\n        dom.clearNode(this.button);\n        this.button.appendChild(this._stopIcon);\n        this.button.setAttribute('aria-label', 'Cancel generating new name suggestions');\n        this._buttonHover?.update(this._buttonCancelHoverText);\n        this.input.focus();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nclass RenameCandidateView {\n    static { this._PADDING = 2; }\n    constructor(parent, fontInfo) {\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'rename-box rename-candidate';\n        this._domNode.style.display = `flex`;\n        this._domNode.style.columnGap = `5px`;\n        this._domNode.style.alignItems = `center`;\n        this._domNode.style.height = `${fontInfo.lineHeight}px`;\n        this._domNode.style.padding = `${RenameCandidateView._PADDING}px`;\n        // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n        const iconContainer = document.createElement('div');\n        iconContainer.style.display = `flex`;\n        iconContainer.style.alignItems = `center`;\n        iconContainer.style.width = iconContainer.style.height = `${fontInfo.lineHeight * 0.8}px`;\n        this._domNode.appendChild(iconContainer);\n        this._icon = renderIcon(Codicon.sparkle);\n        this._icon.style.display = `none`;\n        iconContainer.appendChild(this._icon);\n        this._label = document.createElement('div');\n        domFontInfo.applyFontInfo(this._label, fontInfo);\n        this._domNode.appendChild(this._label);\n        parent.appendChild(this._domNode);\n    }\n    populate(value) {\n        this._updateIcon(value);\n        this._updateLabel(value);\n    }\n    _updateIcon(value) {\n        const isAIGenerated = !!value.tags?.includes(NewSymbolNameTag.AIGenerated);\n        this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n    _updateLabel(value) {\n        this._label.innerText = value.newSymbolName;\n    }\n    static getLayoutInfo({ lineHeight }) {\n        const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n        return { totalHeight };\n    }\n    dispose() {\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}